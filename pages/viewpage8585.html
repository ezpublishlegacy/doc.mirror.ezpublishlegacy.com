<!DOCTYPE html>
<html>

<!-- Mirrored from doc.ez.no/pages/viewpage.action?pageId=2719830 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 21 Oct 2014 10:05:25 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <title>Siteaccess Matching - eZ Publish Platform 5.x - eZ Documentation</title>

        

                        
    
                        
    
                        
    

    <meta http-equiv="X-UA-Compatible" content="IE=EDGE,chrome=IE7">
<meta charset="UTF-8">
<meta id="confluence-context-path" name="confluence-context-path" content="">
<meta id="confluence-base-url" name="confluence-base-url" content="../index.html">

<meta id="atlassian-token" name="atlassian-token" content="494111f00e28ced96046bfb6fbe8f75e18d44b71">

<meta id="confluence-space-key" name="confluence-space-key" content="EZP">
<script type="text/javascript">
        var contextPath = '';
</script>

    

<!-- include system css resources -->


    <link type="text/css" rel="stylesheet" href="../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch934e.css?media=print" media="print">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 8]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+8" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/6e55d36b98fe54865e616dc7ce47dca4/_/download/contextbatch/css/atl.confluence.plugins.pagetree-desktop%2cmain%2cvi/batch.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/6e55d36b98fe54865e616dc7ce47dca4/_/download/contextbatch/css/atl.confluence.plugins.pagetree-desktop,main,viewcontent,atl.general/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/70f6d025b64de5008ccd042576cd8d90/_/download/contextbatch/css/page/batch.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/70f6d025b64de5008ccd042576cd8d90/_/download/contextbatch/css/page/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/47016f6b93087cd2003bf867318254ee/_/download/contextbatch/css/theme.doc/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/2.6.10/_/download/batch/org.randombits.confluence.toc_toc-plugin-styles/org.randombits.confluence.toc_toc-plugin-styles.117.d" media="all">
<link type="text/css" rel="stylesheet" href="../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/2.1.4/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plug/com.atlassian.confluence.ext.newcode-macro-plugin_synt" media="all">
<link type="text/css" rel="stylesheet" href="../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/2.1.4/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plug/com.atlassian.confluence.ext.newcode-macro-plugin_sh-t" media="all">
<link type="text/css" rel="stylesheet" href="../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/2.0.22/_/download/batch/confluence.extra.information_information-plugin/confluence.extra.information_information-plugin-adg-s" media="all">
<link type="text/css" rel="stylesheet" href="../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/1.3/_/download/batch/com.atlassian.confluence.plugins.confluence-hig/com.atlassian.confluence.plugins.confluence-highlight-ac" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/1.3/_/download/batch/com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources/com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/5.3.3-m6/_/download/batch/confluence.extra.jira_web-resources-adg/confluence.extra.jira_web-resources-adg.css" media="all">
<link type="text/css" rel="stylesheet" href="../s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/51/_/styles/colorsb538.css?spaceKey=EZP" media="all">
<link type="text/css" rel="stylesheet" href="../s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/51/_/styles/customb538.css?spaceKey=EZP" media="all">

<!-- end system css resources -->

    <meta name="confluence-request-time" content="1413884534489">
        
    
        
            <meta name="ajs-is-confluence-admin" content="false">
            <meta name="ajs-connection-timeout" content="10000">
            <meta name="ajs-use-keyboard-shortcuts" content="true">
            <meta name="ajs-keyboardshortcut-hash" content="ec556f85a7b4fc86b37ab7a78ce3d8b0">
            <meta id="team-calendars-has-jira-link" content="true">
            <meta name="ajs-team-calendars-display-time-format" content="displayTimeFormat12">
            <meta id="team-calendars-user-timezone" content="UTC">
            <script type="text/x-template" id="team-calendars-messages" title="team-calendars-messages">
    <fieldset class="i18n hidden">
                    <input type="hidden" name="calendar3.month.short.april" value="Apr">
                    <input type="hidden" name="calendar3.month.short.november" value="Nov">
                    <input type="hidden" name="calendar3.month.long.november" value="November">
                    <input type="hidden" name="calendar3.day.short.friday" value="Fri">
                    <input type="hidden" name="calendar3.month.long.february" value="February">
                    <input type="hidden" name="calendar3.month.short.february" value="Feb">
                    <input type="hidden" name="calendar3.day.long.wednesday" value="Wednesday">
                    <input type="hidden" name="calendar3.month.long.december" value="December">
                    <input type="hidden" name="calendar3.day.short.sunday" value="Sun">
                    <input type="hidden" name="calendar3.month.long.april" value="April">
                    <input type="hidden" name="calendar3.month.long.july" value="July">
                    <input type="hidden" name="calendar3.month.long.september" value="September">
                    <input type="hidden" name="calendar3.month.short.august" value="Aug">
                    <input type="hidden" name="calendar3.month.short.june" value="Jun">
                    <input type="hidden" name="calendar3.month.short.may" value="May">
                    <input type="hidden" name="calendar3.day.short.tuesday" value="Tue">
                    <input type="hidden" name="calendar3.day.short.wednesday" value="Wed">
                    <input type="hidden" name="calendar3.day.long.thursday" value="Thursday">
                    <input type="hidden" name="calendar3.month.long.march" value="March">
                    <input type="hidden" name="calendar3.month.long.october" value="October">
                    <input type="hidden" name="calendar3.day.short.saturday" value="Sat">
                    <input type="hidden" name="calendar3.month.short.january" value="Jan">
                    <input type="hidden" name="calendar3.month.long.may" value="May">
                    <input type="hidden" name="calendar3.month.long.january" value="January">
                    <input type="hidden" name="calendar3.month.short.october" value="Oct">
                    <input type="hidden" name="calendar3.day.short.thursday" value="Thu">
                    <input type="hidden" name="calendar3.day.long.friday" value="Friday">
                    <input type="hidden" name="calendar3.day.long.sunday" value="Sunday">
                    <input type="hidden" name="calendar3.month.long.june" value="June">
                    <input type="hidden" name="calendar3.month.long.august" value="August">
                    <input type="hidden" name="calendar3.day.long.tuesday" value="Tuesday">
                    <input type="hidden" name="calendar3.day.long.saturday" value="Saturday">
                    <input type="hidden" name="calendar3.month.short.september" value="Sep">
                    <input type="hidden" name="calendar3.day.long.monday" value="Monday">
                    <input type="hidden" name="calendar3.month.short.july" value="Jul">
                    <input type="hidden" name="calendar3.month.short.march" value="Mar">
                    <input type="hidden" name="calendar3.day.short.monday" value="Mon">
                    <input type="hidden" name="calendar3.month.short.december" value="Dec">
            </fieldset>
</script>

            

    
            
    
    
            <meta name="ajs-page-id" content="2719830">
            <meta name="ajs-content-type" content="page">
            <meta name="ajs-page-title" content="Siteaccess Matching">
            <meta name="ajs-parent-page-title" content="Siteaccess">
            <meta name="ajs-parent-page-id" content="2719828">
            <meta name="ajs-space-key" content="EZP">
            <meta name="ajs-space-name" content="eZ Publish Platform 5.x">
            <meta name="ajs-from-page-title" content="">
            <meta name="ajs-can-remove-page" content="false">
            <meta name="ajs-editor.loader.comment.resources" content="&lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; href=_/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/9f01679814e63f4c0513d02c90477002/_/download/contextbatch/css/comment-editor/batch.html media=&quot;all&quot;&gt;
">
            <meta name="ajs-context-path" content="">
            <meta name="ajs-base-url" content="https://doc.ez.no">
            <meta name="ajs-version-number" content="5.4.4">
            <meta name="ajs-build-number" content="4733">
            <meta name="ajs-remote-user" content="">
            <meta name="ajs-current-user-fullname" content="">
            <meta name="ajs-current-user-avatar-url" content="">
            <meta name="ajs-static-resource-url-prefix" content="/s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/_">
            <meta name="ajs-global-settings-attachment-max-size" content="10485760">
            <meta name="ajs-user-locale" content="en_GB">
            <meta name="ajs-enabled-dark-features" content="sync.event">
            <meta name="ajs-atl-token" content="494111f00e28ced96046bfb6fbe8f75e18d44b71">
            <meta name="ajs-confluence-flavour" content="VANILLA">
            <meta name="ajs-editor.loader.resources" content="&lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; href=_/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/eb8de6aa7acc3a4b2e8aee165b9628ad/_/download/contextbatch/css/editor%2cmacro-browser%2cfullpage-editor%2c-v/batch.11b.delaye media=&quot;all&quot;&gt;
&lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; href=_/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/eb8de6aa7acc3a4b2e8aee165b9628ad/_/download/contextbatch/css/editor%2cmacro-browser%2cfullpage-edito/batch.11ca781.delaye?media=%28max-width%3A+1450px%29%22 media=&quot;(max-width: 1450px)&quot;&gt;
&lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; href=_/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/eb8de6aa7acc3a4b2e8aee165b9628ad/_/download/contextbatch/css/editor%2cmacro-browser%2cfullpage-edito/batch.11d23d0.delaye?media=print%22 media=&quot;print&quot;&gt;
&lt;!--[if lt IE 9]&gt;
&lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; href=_/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/eb8de6aa7acc3a4b2e8aee165b9628ad/_/download/contextbatch/css/editor%2cmacro-browser%2cfullpage-edito/batch.11ed0b5.delaye?conditionalComment=lt+IE+9%22 media=&quot;all&quot;&gt;
&lt;![endif]--&gt;
&lt;!--[if IE]&gt;
&lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; href=_/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/eb8de6aa7acc3a4b2e8aee165b9628ad/_/download/contextbatch/css/editor%2cmacro-browser%2cfullpage-edito/batch.11fbe23.delaye?ieonly=true%22 media=&quot;all&quot;&gt;
&lt;![endif]--&gt;
&lt;script type=&quot;text/javascript&quot; src=_/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/eb8de6aa7acc3a4b2e8aee165b9628ad/_/download/contextbatch/js/editor%2cmacro-browser%2cfullpage-editor%2c-vi/batch.120.delaye &gt;&lt;/script&gt;
">
            <meta name="ajs-date.format" content="MMM dd, yyyy">
    
    <link rel="shortcut icon" href="../favicon.html">
    <link rel="icon" type="image/x-icon" href="../favicon.html">

<link rel="search" type="application/opensearchdescription+xml" href="../opensearch/osd.action" title="eZ Documentation"/>

    <!-- include system javascript resources -->
    <script type="text/javascript" src="../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/js/batch.js" ></script>
<!--[if lte IE 8]>
<script type="text/javascript" src="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/js/batch.js?conditionalComment=lte+IE+8" ></script>
<![endif]-->
<script type="text/javascript" src="../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/6e55d36b98fe54865e616dc7ce47dca4/_/download/contextbatch/js/atl.confluence.plugins.pagetree-desktop%2cmain%2cvi/batch.js" ></script>
<script type="text/javascript" src="../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/70f6d025b64de5008ccd042576cd8d90/_/download/contextbatch/js/page/batch.js" ></script>
<script type="text/javascript" src="../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/84fc2bb4cbbfc06481d75335376bb250/_/download/contextbatch/js/atl.comments/batch.js" ></script>
<script type="text/javascript" src="../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/2.1.4/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plug/com.atlassian.confluence.ext-2.newcode-macro-plugin_synt" ></script>
<script type="text/javascript" src="../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/2.1.4/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plug/com.atlassian.confluence.ext-3.newcode-macro-plugin_synt" ></script>
<script type="text/javascript" src="../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/1.3/_/download/batch/com.atlassian.confluence.plugins.confluence-hig/com.atlassian.confluence.plugins-2.confluence-highlight-ac" ></script>
<script type="text/javascript" src="../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/1.3/_/download/batch/com.atlassian.mywork.mywork-confluence-host-plu/com.atlassian.mywork.mywork-confluence-host-plugin_mw-he" ></script>

    

        
    <!-- end system javascript resources -->

        
        

    
                <link rel="canonical" href="../display/EZP/Siteaccess%2bMatching.html">
        <link rel="shortlink" href="../x/VoAp.html">
    <meta name="wikilink" content="[EZP:Siteaccess Matching]">
    <meta name="page-version" content="26">

</head>

<body             onload="placeFocus()"
     id="com-atlassian-confluence" class="theme-documentation  aui-theme-default aui-layout">

        
    <div id="full-height-container">
    <div id="header-precursor">
        
                    </div>






<header id="header" role="banner">
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation"><div class="aui-header-inner"><div class="aui-header-before"><a class="aui-dropdown2-trigger app-switcher-trigger" aria-owns="app-switcher" aria-haspopup="true" tabindex="0"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a><div id="app-switcher" class="aui-dropdown2 aui-style-default"><div class="app-switcher-loading">Loading&hellip;</div></div><script>
            (function (NL) {
                var initialise = function () {
                    // For some milestones of AUI, the atlassian soy namespace was renamed to aui. Handle that here by ensuring that window.atlassian is defined.
                    window.atlassian = window.atlassian || window.aui;
                    new NL.AppSwitcher({
                        dropdownContents: '#app-switcher'
                    });
                };
                if (NL.AppSwitcher) {
                    initialise();
                } else {
                    NL.onInit = initialise;
                }
            }(window.NL = (window.NL || {})));
            window.NL.isUserAdmin = false</script></div><div class="aui-header-primary"><h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="../index.html"><img src="../s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/_/images/logo/atl.site.logo" alt="eZ Documentation" /></a></h1><ul class="aui-nav">
                            <li>
            
        
        
<a  id="space-directory-link" href="../spacedirectory/view.html"  class=" aui-nav-imagelink"   title="Spaces">
            <span>Spaces</span>
    </a>
        </li>
                            <li id="browseMenu" role="menu">
            
    
        <a id="browse-menu-link" class="aui-nav-link aui-dropdown2-trigger" href="#" aria-haspopup="true" aria-owns="browse-menu-link-content" title="Browse">
        <span class="browse">Browse</span>
    </a>
    <nav id="browse-menu-link-content" class="aui-dropdown2 aui-style-default" aria-hidden="true">
                    <div class="aui-dropdown2-section">
                <ul  id="browse-menu-link-leading" class="aui-list-truncate section-leading first">
                                            <li>
    
            
<a  id="space-pages-link" href="listpages-dirview4915.html?key=EZP" class="    "      title="Browse pages in the eZ Publish Platform 5.x space" >
        Pages
</a>
</li>
                                            <li>
    
            
<a  id="space-blogposts-link" href="viewrecentblogposts4915.html?key=EZP" class="    "      title="Browse blogs in the eZ Publish Platform 5.x space" >
        Blog
</a>
</li>
                                            <li>
    
            
<a  id="space-labels-link" href="../labels/listlabels-heatmap4915.html?key=EZP" class="    "      title="Browse labels in the eZ Publish Platform 5.x space" >
        Labels
</a>
</li>
                                            <li>
    
            
<a  id="space-advanced-link" href="../spaces/viewspacesummary4915.html?key=EZP" class="    "      title="Browse additional space functions in the eZ Publish Platform 5.x space" >
        Space Operations
</a>
</li>
                                    </ul>
            </div>
            </nav>
    
        </li>
        </ul>
</div><div class="aui-header-secondary"><ul class="aui-nav">
                <li>
        
    
            
<a  id="doctheme-anchor" href="#"  class=" aui-nav-imagelink"   title="">
            <span></span>
    </a>
    </li>
        <li>
<form id="quick-search" class="aui-quicksearch dont-default-focus header-quicksearch" action="https://doc.ez.no/dosearchsite.action" method="get">
    <fieldset>
                    <input type='hidden' name='where' value='EZP'/>
                            <input type="hidden" name="spaceSearch" value="true"/>
                <label for="quick-search-query" class="assistive">Quick Search</label>
        <input id="quick-search-query" class="text app-search search quick-search-query" type="text"
               accessKey="q" autocomplete="off" name="queryString" title="Quick Search"  placeholder="Search space" />
        <input id="quick-search-submit" class="quick-search-submit" type="submit" value="Search"/>

        <div class="aui-dd-parent quick-nav-drop-down"></div>
    </fieldset>
    <div class="hidden parameters">
                    <!-- putMetadata failed to add value for key "quick-nav-enabled" so rendering metadata inline - see server debug log for details -->
        <meta name="ajs-quick-nav-enabled" content="true">
                </div>
</form>
</li>
    <li>    
        <a id="help-menu-link" class="aui-nav-link aui-dropdown2-trigger" href="#" aria-haspopup="true" aria-owns="help-menu-link-content" title="Help">
        <span class="aui-icon aui-icon-small aui-iconfont-help">Help</span>
    </a>
    <nav id="help-menu-link-content" class="aui-dropdown2 aui-style-default" aria-hidden="true">
                    <div class="aui-dropdown2-section">
                <ul  id="help-menu-link-leading" class="aui-list-truncate section-leading first">
                                            <li>
    
            
<a  id="confluence-help-link" href="http://docs.atlassian.com/confluence/docs-54/Getting+Help+And+Support" class="    "      title="Visit the Confluence documentation home"  target="_blank"
>
        Online Help
</a>
</li>
                                            <li>
    
                
<a  id="keyboard-shortcuts-link" href="#" class="    "      title="View available keyboard shortcuts" >
        Keyboard Shortcuts
</a>
</li>
                                            <li>
    
            
<a  id="feed-builder-link" href="../dashboard/configurerssfeed.html" class="    "      title="Create your custom RSS feed." >
        Feed Builder
</a>
</li>
                                            <li>
    
            
<a  id="whats-new-menu-link" href="http://docs.atlassian.com/confluence/docs-54/whatsnew/iframe" class="    "      title="" >
        What’s new
</a>
</li>
                                            <li>
    
                
<a  id="gadget-directory-link" href="#" class="   user-item administration-link "      title="Browse gadgets provided by Confluence" >
        Available Gadgets
</a>
</li>
                                            <li>
    
            
<a  id="confluence-about-link" href="../aboutconfluencepage.html" class="    "      title="Get more information about Confluence" >
        About Confluence
</a>
</li>
                                    </ul>
            </div>
            </nav>
    </li>
    <li>    
    </li>
                <li>                                    <li>
    
            
<a  id="login-link" href="../login0d97.html?os_destination=%2Fpages%2Fviewpage.action%3FpageId%3D2719830" class="   user-item login-link "      title="" >
        Log in
</a>
</li>
                        </li>
</ul>
</div></div><!-- .aui-header-inner--></nav><!-- .aui-header -->
    <br class="clear">
</header>

    <div id="splitter">
    <div id="splitter-sidebar"  class="padding-div" >
        
        <p>&nbsp;<br/>
<strong>Navigation</strong><br/>
&bull; <a href="https://confluence.ez.no/display/MAIN" class="external-link" rel="nofollow">eZ Documentation Center</a><br/>
&nbsp;</p>
    

                    
    


<div class="plugin_pagetree">

        
        
    <ul class="plugin_pagetree_children_list plugin_pagetree_children_list_noleftspace">
        <div class="plugin_pagetree_children">
        </div>
    </ul>

    <fieldset class="hidden">
        <input type="hidden" name="treeId" value="">
        <input type="hidden" name="treeRequestId" value="/plugins/pagetree/naturalchildren.action?decorator=none&amp;excerpt=false&amp;sort=position&amp;reverse=false&amp;disableLinks=false&amp;expandCurrent=false">
        <input type="hidden" name="treePageId" value="2719830">

        <input type="hidden" name="noRoot" value="false">
        <input type="hidden" name="rootPageId" value="1114149">

        <input type="hidden" name="rootPage" value="">
        <input type="hidden" name="startDepth" value="0">
        <input type="hidden" name="spaceKey" value="EZP" >

        <input type="hidden" name="i18n-pagetree.loading" value="Loading...">
        <input type="hidden" name="i18n-pagetree.error.permission" value="Unable to load page tree. It seems that you do not have permission to view the root page.">
        <input type="hidden" name="i18n-pagetree.eeror.general" value="There was a problem retrieving the page tree. Please check the server log file for more information.">
        <input type="hidden" name="loginUrl" value="/login.action?os_destination=%2Fpages%2Fviewpage.action%3FpageId%3D2719830">
        <input type="hidden" name="mobile" value="false">

                <fieldset class="hidden">
                                                <input type="hidden" name="ancestorId" value="2719828">
                                    <input type="hidden" name="ancestorId" value="2719826">
                                    <input type="hidden" name="ancestorId" value="2720528">
                                    <input type="hidden" name="ancestorId" value="6291674">
                                    <input type="hidden" name="ancestorId" value="1114149">
                                    </fieldset>
    </fieldset>
</div>



            </div>
    <div id="splitter-content">

                    <script type="text/javascript" src="../s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/5.4.4/_/download/resources/com.atlassian.confluence.plugins.doctheme_resources/doc-theme.js"></script>
    
                        
        <div id="theme-header">
            <div class="sectionColumnWrapper"><div class="sectionMacro">
<div class="sectionMacroRow"><div class="columnMacro"></div>
<div class="columnMacro">
<div class="panel" style="background-color: #ecf0f1;border-style: solid;border-width: 1px;"><div class="panelContent" style="background-color: #ecf0f1;">
<p>This documentation is for <strong>eZ Publish Platform 5.x</strong> "Platform stack". For documentation on "legacy" <a href="../eZ-Publish/index.html" class="external-link" rel="nofollow">go here</a>, for explanation on difference see <a href="viewpage0139.html?pageId=11403666" class="external-link" rel="nofollow">5.x Architecture overview</a></p>
</div></div></div>
<div class="columnMacro"></div></div></div></div>
        </div>
    
            
<div id="main"  class="aui-page-panel" >
    <div id="main-header">
        
        
    <div id="navigation" class="content-navigation view">
                    <ul class="ajs-menu-bar">
                                    
                    
        <li class="normal ajs-menu-item">
        <a id="action-menu-link" class="action ajs-menu-title aui-dropdown2-trigger" href="#" aria-haspopup="true" aria-owns="action-menu" data-container="#navigation"><span><span>Tools</span></span></a>         <div id="action-menu" class="aui-dropdown2 aui-style-default">
                            <ul  id="action-menu-primary"                     class="section-primary first aui-dropdown2-section">
                                            <li>

    
        
                            
    
    
    <a  id="view-attachments-link" href="viewpageattachments8585.html?pageId=2719830" rel="nofollow"  class="action-view-attachments"  accessKey="t"  title="View Attachments">
                <span>A<u>t</u>tachments (0)</span>    </a>
</li>
                                        <li>

    
        
                            
    
    
    <a  id="action-view-history-link" href="viewpreviousversions8585.html?pageId=2719830" rel="nofollow"  class="action-view-history"   title="">
                <span>Page History</span>    </a>
</li>
                                        <li>

    
        
                            
    
    
    <a  id="action-page-permissions-link" href="viewinfo8585.html?pageId=2719830" rel="nofollow"  class="action-page-permissions"   title="Edit restrictions">
                <span>Restrictions</span>    </a>
</li>
                                </ul>
                            <ul  id="action-menu-secondary"                     class="section-secondary aui-dropdown2-section">
                                            <li>

    
        
                            
    
    
    <a  id="view-page-info-link" href="viewinfo8585.html?pageId=2719830" rel="nofollow"  class="action-view-info"   title="">
                <span>Page Information</span>    </a>
</li>
                                        <li>

    
        
                            
    
    
    <a  id="link-to-page-link" href="viewinfo8585.html?pageId=2719830" rel="nofollow"  class=""   title="Link to this Page">
                <span>Link to this Page…</span>    </a>
</li>
                                        <li>

    
        
                            
    
    
    <a  id="view-in-hierarchy-link" href="listpages-dirviewd96a.html?key=EZP&amp;openId=2719830#selectedPageInHierarchy" rel="nofollow"  class=""   title="">
                <span>View in Hierarchy</span>    </a>
</li>
                                        <li>

    
        
                            
    
    
    <a  id="action-view-source-link" href="../plugins/viewsource/viewpagesrc8585.html?pageId=2719830" rel="nofollow"  class="action-view-source popup-link"   title="">
                <span>View Source</span>    </a>
</li>
                                        <li>

    
        
                            
    
    
    <a  id="action-export-pdf-link" href="../download/temp/pdfexport-20141021-211014-0855-365/EZP-SiteaccessMatching-211014-0855-366f1f7.pdf?pageId=2719830" rel="nofollow"  class=""   title="">
                <span>Export to PDF</span>    </a>
</li>
                                        <li>

    
        
                            
    
    
    <a  id="action-export-word-link" href="../exportword8585?pageId=2719830" rel="nofollow"  class="action-export-word"   title="">
                <span>Export to Word</span>    </a>
</li>
                                </ul>
                    </div>
    </li>
            </ul>
    </div>

        
                <div id="title-heading" class="pagetitle with-breadcrumbs">
        
                            <div class="space-logo " data-key="EZP" data-name="eZ Publish Platform 5.x" data-entity-type="confluence.space">
            <a><img class="logo space custom" src="../download/attachments/1736738/EZP9600?version=4&amp;modificationDate=1405688262000&amp;api=v2" alt=""></a>
        </div>            
                            <div id="breadcrumb-section">
                    
    
    
    <ol id="breadcrumbs">
                    
                
        <li class="first" >
                

                    <span class=""><a href="../display/EZP/eZ%2bPublish%2bPlatform%2bDocumentation.html">eZ Publish Platform 5.x</a></span>
                                                <li id="ellipsis" title="Show all breadcrumbs"><span><strong>&#8230;</strong></span></li>
                                    
                
        <li class="hidden-crumb" >
                

                    <span class=""><a href="../display/EZP/eZ%2bPublish%2bPlatform%2bDocumentation.html">eZ Publish Platform Documentation</a></span>
                                        
                
        <li class="hidden-crumb" >
                

                    <span class=""><a href="viewpage6ff2.html?pageId=6291674">Development &amp; Administration Guides</a></span>
                                        
                
        <li class="hidden-crumb" >
                

                    <span class=""><a href="../display/EZP/Developing%2bwith%2beZ%2bPublish%2b5.html">Developing with eZ Publish 5</a></span>
                                        
                
        <li class="hidden-crumb" >
                

                    <span class=""><a href="../display/EZP/MVC%2band%2bApplication.html">MVC and Application</a></span>
                            
                
        <li>
                

                    <span class=""><a href="../display/EZP/Siteaccess.html">Siteaccess</a></span>
                </ol>


                </div>
            
            <h1 id="title-text" class="with-breadcrumbs">
                                        <a href="../display/EZP/Siteaccess%2bMatching.html">Siteaccess Matching</a>
                            </h1>
        </div>
    </div>

    

    
    
    
    
    

        




        




    

    

    







    
    
        
    
    
                    
    

    


<div id="content" class="page view">
    

<div id="action-messages">
                        </div>



        <script type="text/x-template" title="searchResultsGrid">
    <table class="aui">
        <thead>
            <tr class="header">
                <th class="search-result-title">Page Title</th>
                <th class="search-result-space">Space</th>
                <th class="search-result-date">Updated</th>
            </tr>
        </thead>
    </table>
</script>
<script type="text/x-template" title="searchResultsGridCount">
    <p class="search-result-count">{0}</p>
</script>
<script type="text/x-template" title="searchResultsGridRow">
    <tr class="search-result">
        <td class="search-result-title"><a href="{1}" class="content-type-{2}"><span>{0}</span></a></td>
        <td class="search-result-space"><a class="space" href="/display/{4}/" title="{3}">{3}</a></td>
        <td class="search-result-date"><span class="date" title="{6}">{5}</span></td>
    </tr>
</script>
        
    
    
        <fieldset class="hidden parameters">
            <input type="hidden" title="parentPageId" value="2719828">
        </fieldset>

                            
    

                    

        
        <a href="#page-metadata-end" class="assistive">Skip to end of metadata</a>
<div id="page-metadata-start" class="assistive"></div>

    <div class="page-metadata">
        <ul>
                            <li class="page-metadata-item noprint">

    
            
                            
    
    
    <a  id="content-metadata-page-restrictions" href="#" rel="nofollow"  class="hidden"   title="Restrictions apply">
                    <img alt="" src="../download/resources/com.atlassian.confluence.plugins.confluence-page-banner_page-banner-resources/images/red_padlock.png" height="16" width="16" title="">
                <span></span>    </a>
</li>
                        <li class="page-metadata-modification-info">
                
        
    
        
    
        
        
            Created and last modified by <span class='author'>     <a href="../loginaee9.html"
                       class="url fn"
                            >Jérôme Vieilledent</a></span> on <a class='last-modified' title='May 21, 2014 14:21' href='diffpagesbyversion0fe0.html?pageId=2719830&amp;selectedPageVersions=25&amp;selectedPageVersions=26'>May 21, 2014</a>
                </li>
        </ul>
    </div>


<a href="#page-metadata-start" class="assistive">Go to start of metadata</a>
<div id="page-metadata-end" class="assistive"></div>

        
        <fieldset class="hidden parameters">
                        <input type="hidden" title="browsePageTreeMode" value="view">
        </fieldset>

        <div class="wiki-content">
                           
        <p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1413884534582 {padding: 0px;}
div.rbtoc1413884534582 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1413884534582 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1413884534582'>
<ul class='toc-indentation'>
<li><a href='#SiteaccessMatching-Configuration'>Configuration</a></li>
<li><a href='#SiteaccessMatching-Availablematchers'>Available matchers</a></li>
<li><a href='#SiteaccessMatching-Compoundsiteaccessmatcher'>Compound siteaccess matcher</a></li>
<li><a href='#SiteaccessMatching-Matchingbyrequestheader'>Matching by request header</a></li>
<li><a href='#SiteaccessMatching-Matchingbyenvironmentvariable'>Matching by environment variable</a></li>
<li><a href='#SiteaccessMatching-URILexerandsemanticPathinfo'>URILexer and semanticPathinfo</a></li>
</ul>
</div></p><p>Siteaccess matching is done through <strong>eZ\Publish\MVC\SiteAccess\Matcher</strong> objects. You can configure this matching and even develop custom matchers.</p><h2 id="SiteaccessMatching-Configuration">Configuration</h2><p>You can configure siteaccess matching in your main <strong>ezpublish/config/ezpublish.yml</strong> :</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>ezpublish.yml</b></div><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="theme: Eclipse; brush: plain; gutter: false"><![CDATA[ezpublish:
    siteaccess:
        default_siteaccess: ezdemo_site
        list:
            - ezdemo_site
            - eng
            - fre
            - fr_eng
            - ezdemo_site_admin
        groups:
            ezdemo_site_group:
                - ezdemo_site
                - eng
                - fre
                - fr_eng
                - ezdemo_site_admin
        match:
            Map\URI:
                ezdemo_site: ezdemo_site
                fre: fre
                ezdemo_site_admin: ezdemo_site_admin
]]></script>
</div></div><p> </p><p>You need to set several parameters:</p><ul><li><strong>ezpublish.siteaccess.default_siteaccess</strong></li><li><strong>ezpublish.siteaccess.list</strong></li><li><em>(optional)</em><strong> ezpublish.siteaccess.groups</strong></li><li><strong>ezpublish.siteaccess.match</strong></li></ul><p><strong>ezpublish.siteaccess.default_siteaccess</strong> is the default siteaccess that will be used if matching was not successful. This ensures that a siteaccess is always defined.</p><p><strong>ezpublish.siteaccess.list</strong> is the list of all available siteaccesses in your website.</p><p><em>(optional)</em> <strong>ezpublish.siteaccess.groups</strong> defines which groups siteaccesses are member of. This is useful when you want to mutualize settings between several siteaccesses and avoid config duplication. Siteaccess groups are considered as regular siteaccesses as far as configuration is concerned.</p>    <div class="aui-message success shadowed information-macro">
                            <span class="aui-icon icon-success">Icon</span>
                <div class="message-content">
                            <p>A siteaccess can be part of several groups.</p><p>A siteaccess configuration has always precedence on the group configuration.</p>
                    </div>
    </div>
<p><strong style="font-size: 10.0pt;line-height: 13.0pt;">ezpublish.siteaccess.match</strong><span style="font-size: 10.0pt;line-height: 13.0pt;"> holds the matching configuration. It consists in a hash where the key is the name of the matcher class. If the matcher class doesn't start with a </span><strong style="font-size: 10.0pt;line-height: 13.0pt;">\</strong><span style="font-size: 10.0pt;line-height: 13.0pt;">, it will be considered relative to </span><code style="font-size: 10.0pt;line-height: 13.0pt;">eZ\Publish\MVC\SiteAccess\Matcher</code><span style="font-size: 10.0pt;line-height: 13.0pt;"> (e.g. </span><code style="font-size: 10.0pt;line-height: 13.0pt;">Map\Host</code><span style="font-size: 10.0pt;line-height: 13.0pt;"> will refer to </span><span style="font-size: 10.0pt;line-height: 13.0pt;"><code>eZ\Publish\MVC\SiteAccess\Matcher\Map\Host</code>)</span></p>    <div class="aui-message success shadowed information-macro">
                            <span class="aui-icon icon-success">Icon</span>
                <div class="message-content">
                            <p><span>Every <strong>custom matcher</strong> can be specified with a <strong>fully qualified class name</strong> (e.g. <code>\My\SiteAccess\Matcher</code>) or by a <strong>service identifier prefixed by @</strong> (e.g. <code>@my_matcher_service</code>).</span></p><ul><li><span>In the case of a fully qualified class name, the matching configuration will be passed in the constructor.</span></li><li><span>In the case of a service, it must implement <code>eZ\Bundle\EzPublishCoreBundle\SiteAccess\Matcher</code>. The matching configuration will be passed to <code>setMatchingConfiguration()</code>.</span></li></ul>
                    </div>
    </div>
    <div class="aui-message warning shadowed information-macro">
                            <span class="aui-icon icon-warning">Icon</span>
                <div class="message-content">
                            <p>Make sure to type matcher in correct case, if wrong case like &quot;Uri&quot; instead of &quot;URI&quot; it will happily work on systems like Mac OS X because of case in sensitive file system, while it will fail when you deploy it to a linux server. This is a known artifact of <a href="http://www.php-fig.org/psr/psr-0/" class="external-link" rel="nofollow">PSR-0 autoloading</a> of PHP classes.</p>
                    </div>
    </div>
<h2 id="SiteaccessMatching-Availablematchers">Available matchers</h2><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Name</th><th class="confluenceTh">Description</th><th class="confluenceTh">Configuration</th><th colspan="1" class="confluenceTh">Example</th></tr><tr><td class="confluenceTd"><code>URIElement</code></td><td class="confluenceTd">Maps a URI element to a siteaccess.<br />This is the default matcher used when choosing <br />URI matching in setup wizard. </td><td class="confluenceTd"><p>The element number you want to match (starting from 1).</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="theme: Eclipse; brush: php; gutter: false"><![CDATA[ezpublish:
    siteaccess:
        match:
            URIElement: 1]]></script>
</div></div><p><span style="font-size: 10.0pt;line-height: 13.0pt;"><strong>Important:</strong> When using a value &gt; 1, <br />it will concatenate the elements with _</span></p></td><td colspan="1" class="confluenceTd"><p><strong>URI:</strong> <code>/ezdemo_site/foo/bar</code></p><p><span style="font-size: 10.0pt;line-height: 13.0pt;"><u>Element number</u>: 1</span><br /><span style="font-size: 10.0pt;line-height: 13.0pt;"><u>Matched siteaccess</u>: ezdemo_site</span></p><p><u>Element number</u>: 2<br /><span style="font-size: 10.0pt;line-height: 13.0pt;"><u>Matched siteaccess</u>: ezdemo_site_foo </span></p></td></tr><tr><td colspan="1" class="confluenceTd"><code>URIText</code></td><td colspan="1" class="confluenceTd">Matches URI using <em>pre</em> and/or <em>post</em> sub-strings <br />in the first URI segment</td><td colspan="1" class="confluenceTd"><p>The prefix and/or suffix (none are required)</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="theme: Eclipse; brush: php; gutter: false"><![CDATA[ezpublish:
    siteaccess:
        match:
            URIText:
                prefix: foo
                suffix: bar]]></script>
</div></div></td><td colspan="1" class="confluenceTd"><p><strong>URI:</strong> <code>/footestbar/my/content</code></p><p><u>Prefix</u>: foo<br /><u>Suffix</u>: bar<br /><u>Matched siteaccess</u>: test </p></td></tr><tr><td colspan="1" class="confluenceTd"><code>HostElement</code></td><td colspan="1" class="confluenceTd">Maps an element in the host name to a siteaccess.</td><td colspan="1" class="confluenceTd"><p>The element number you want to match (starting from 1).</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="theme: Eclipse; brush: php; gutter: false"><![CDATA[ezpublish:
    siteaccess:
        match:
            HostElement: 2]]></script>
</div></div></td><td colspan="1" class="confluenceTd"><p><strong>Host name:</strong> <code>www.example.com</code></p><p><u>Element number</u>: 2<br /><u>Matched siteaccess</u>: example </p></td></tr><tr><td colspan="1" class="confluenceTd"><code>HostText</code></td><td colspan="1" class="confluenceTd">Matches a siteaccess in the host name, <br />using <em>pre</em> and/or <em>post</em> sub-strings.</td><td colspan="1" class="confluenceTd"><p>The prefix and/or suffix (none are required)</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="theme: Eclipse; brush: php; gutter: false"><![CDATA[ezpublish:
    siteaccess:
        match:
            HostText:
                prefix: www.
                suffix: .com]]></script>
</div></div></td><td colspan="1" class="confluenceTd"><p><strong>Host name</strong>: <code>www.foo.com</code></p><p><u>Prefix</u>: www.<br /><u>Suffix</u>: .com<br /><u>Matched siteaccess</u>: foo </p></td></tr><tr><td colspan="1" class="confluenceTd"><code>Map\Host</code></td><td colspan="1" class="confluenceTd">Maps a host name to a siteaccess.</td><td colspan="1" class="confluenceTd"><p>A hash map of host/siteaccess</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="theme: Eclipse; brush: php; gutter: false"><![CDATA[ezpublish:
    siteaccess:
        match:
            Map\Host:
                www.foo.com: foo_front
                adm.foo.com: foo_admin
                www.bar-stuff.fr: bar_front
                adm.bar-stuff.fr: bar_admin]]></script>
</div></div></td><td colspan="1" class="confluenceTd"><strong>Map</strong>:<ul><li>www.foo.com =&gt; foo_front</li><li>admin.foo.com =&gt; foo_admin </li></ul><p><strong>Host name</strong>: www.example.com</p><p><u>Matched siteaccess</u>: foo_front</p></td></tr><tr><td colspan="1" class="confluenceTd"><code>Map\URI</code></td><td colspan="1" class="confluenceTd">Maps a URI to a siteaccess</td><td colspan="1" class="confluenceTd"><p>A hash map of URI/siteaccess</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="theme: Eclipse; brush: php; gutter: false"><![CDATA[ezpublish:
    siteaccess:
        match:
            Map\URI:
                something: ezdemo_site
                foobar: ezdemo_site_admin]]></script>
</div></div></td><td colspan="1" class="confluenceTd"><p><strong>URI:</strong> <code>/something/my/content</code></p><p><u>Map</u>:</p><ul><li>something =&gt; ezdemo_site</li><li>foobar =&gt; ezdemo_site_admin</li></ul><p><u>Matched siteaccess</u>: ezdemo_site</p></td></tr><tr><td colspan="1" class="confluenceTd"><code>Map\Port</code></td><td colspan="1" class="confluenceTd">Maps a port to a siteaccess</td><td colspan="1" class="confluenceTd"><p>A has map of Port/siteaccess</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="theme: Eclipse; brush: php; gutter: false"><![CDATA[ezpublish:
    siteaccess:
        match:
            Match\Port:
                80: foo
                8080: bar]]></script>
</div></div></td><td colspan="1" class="confluenceTd"><p><strong>URL:</strong> <code><span class="nolink">http://ezpublish.dev:8080/my/content</span></code></p><p><u>Map</u>:</p><ul><li>80: foo</li><li>8080: bar</li></ul><p><u>Matched siteaccess</u>: bar</p></td></tr><tr><td colspan="1" class="confluenceTd"><code>Regex\Host</code></td><td colspan="1" class="confluenceTd">Matches against a regexp and extract a portion of it</td><td colspan="1" class="confluenceTd"><p>The regexp to match against <br />and the captured element to use</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="theme: Eclipse; brush: php; gutter: false"><![CDATA[ezpublish:
    siteaccess:
        match:
            Regex\Host:
                regex: &quot;^(\\w+_sa)$&quot;
                # Default is 1
                itemNumber: 1]]></script>
</div></div></td><td colspan="1" class="confluenceTd"><p><strong>Host name:</strong> <code>example_sa</code></p><p><u>regex</u>: <code>^(\\w+)_sa$</code><br /><u>itemNumber</u>: 1</p><p><u>Matched siteaccess</u>: example</p></td></tr><tr><td colspan="1" class="confluenceTd"><code>Regex\URI</code></td><td colspan="1" class="confluenceTd">Matches against a regexp and extract a portion of it</td><td colspan="1" class="confluenceTd"><p><span>The regexp to match against <br />and the captured element to use</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="theme: Eclipse; brush: php; gutter: false"><![CDATA[ezpublish:
    siteaccess:
        match:
            Regex\URI:
                regex: &quot;^/foo(\\w+)bar&quot;
                # Default is 1
                itemNumber: 1]]></script>
</div></div><p><span><br /></span></p></td><td colspan="1" class="confluenceTd"><p><strong>URI:</strong> <code>/footestbar/something</code></p><p><u>regex</u>: ^/foo(\\w+)bar<br /><u>itemNumber</u>: 1</p><p><u>Matched siteaccess</u>: test </p></td></tr></tbody></table></div><p> </p><h2 id="SiteaccessMatching-Compoundsiteaccessmatcher">Compound siteaccess matcher</h2><p>The Compound siteaccess matcher allows to combine several matchers together:</p><ul style="list-style-type: square;"><li><a href="http://example.com/en" class="external-link" rel="nofollow">http://example.com/en</a> matches site_en (match on host=example.com <em>and</em> URIElement(1)=en)</li><li><a href="http://example.com/fr" class="external-link" rel="nofollow">http://example.com/fr</a> matches site_fr (match on host=example.com <em>and</em> URIElement(1)=fr)</li><li><a href="http://admin.example.com/" class="external-link" rel="nofollow">http://admin.example.com</a> matches site_admin (match on host=admin.example.com)</li></ul><p>Compound matchers cover the legacy <strong style="font-size: 14.0px;line-height: 1.4285715;"><em>host_uri</em></strong> matching feature.</p><p>They are based on logical combinations, or/and, using logical compound matchers:</p><ul><li><code>Compound\LogicalAnd</code></li><li><code>Compound\LogicalOr</code></li></ul><p>Each compound matcher will specify two or more sub-matchers. A rule will match if all the matchers, combined with the logical matcher, are positive. The example above would have used <code style="line-height: 1.4285715;">Map\Host</code> and <code style="line-height: 1.4285715;">Map\Uri</code>., combined with a <code>LogicalAnd</code>. When both the URI and host match, the siteaccess configured with &quot;match&quot; is used.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>ezpublish.yml</b></div><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="theme: Eclipse; brush: plain; gutter: false"><![CDATA[ezpublish:
    siteaccess:
        match:
            Compound\LogicalAnd:
                # Nested matchers, with their configuration.
                # No need to precise their matching values (true will suffice).
                site_en:
                    matchers:
                        Map\URI:
                            en: true
                        Map\Host:
                            example.com: true
                    match: site_en
                site_fr:
                    matchers:
                        Map\URI:
                            en: true
                        Map\Host:
                            example.com: true
                    match: site_en
            Map\Host:
                admin.example.com: site_admin]]></script>
</div></div><h2 id="SiteaccessMatching-Matchingbyrequestheader">Matching by request header</h2><p>It is possible to define which siteaccess to use by setting a <strong>X-Siteaccess</strong> header in your request. This can be useful for REST requests.</p><p>In such case, <strong>X-Siteaccess</strong> must be the <strong>siteaccess name</strong> (e.g. <em>ezdemo_site</em>).</p><h2 id="SiteaccessMatching-Matchingbyenvironmentvariable">Matching by environment variable</h2><p>It is also possible to define which siteaccess to use directly via an <strong>EZPUBLISH_SITEACCESS</strong> environment variable.</p><p>This is recommended if you want to get <strong>performance gain</strong> since no matching logic is done in this case.</p><p>You can define this environment variable directly from your web server configuration:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Apache VirtualHost example</b></div><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="theme: Eclipse; brush: plain; gutter: false"><![CDATA[# This configuration assumes that mod_env is activated
&lt;VirtualHost *:80&gt;
    DocumentRoot &quot;/path/to/ezpublish5/web/folder&quot;
    ServerName example.com
    ServerAlias www.example.com
    SetEnv EZPUBLISH_SITEACCESS ezdemo_site
&lt;/VirtualHost&gt;]]></script>
</div></div>    <div class="aui-message success shadowed information-macro">
                            <span class="aui-icon icon-success">Icon</span>
                <div class="message-content">
                            <p><span>This can also be done via PHP-FPM configuration file, if you use it. See </span><a href="http://php.net/manual/en/install.fpm.configuration.php#example-60" class="external-link" rel="nofollow">PHP-FPM documentation</a><span> for more information.</span></p>
                    </div>
    </div>
    <div class="aui-message hint shadowed information-macro">
                    <p class="title">Note about precedence</p>
                            <span class="aui-icon icon-hint">Icon</span>
                <div class="message-content">
                            <p> The precedence order for siteaccess matching is the following (the first matched wins):</p><ol><li>Request header</li><li>Environment variable</li><li>Configured matchers</li></ol>
                    </div>
    </div>
<p> </p><h2 id="SiteaccessMatching-URILexerandsemanticPathinfo">URILexer and semanticPathinfo</h2><p>In some cases, after matching a siteaccess, it is neecessary to modify the original request URI. This is for example needed with URI-based matchers since the siteaccess is contained in the original URI and it is not part of the route itself.</p><p>The problem is addressed by <em>analyzing</em> this URI and by modifying it when needed through the <strong>URILexer</strong> interface.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>URILexer interface</b></div><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="theme: Eclipse; brush: php; gutter: false"><![CDATA[/**
 * Interface for SiteAccess matchers that need to alter the URI after matching.
 * This is useful when you have the siteaccess in the URI like &quot;/&lt;siteaccessName&gt;/my/awesome/uri&quot;
 */
interface URILexer
{
    /**
     * Analyses $uri and removes the siteaccess part, if needed.
     *
     * @param string $uri The original URI
     * @return string The modified URI
     */
    public function analyseURI( $uri );
    /**
     * Analyses $linkUri when generating a link to a route, in order to have the siteaccess part back in the URI.
     *
     * @param string $linkUri
     * @return string The modified link URI
     */
    public function analyseLink( $linkUri );
}]]></script>
</div></div><p>Once modified, the URI is stored in the <em><strong>semanticPathinfo</strong></em> request attribute, and the original pathinfo is not modified.</p><p> </p>

                
        
    
        </div>

        <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="https://doc.ez.no/display/EZP/Siteaccess+Matching"
    dc:identifier="https://doc.ez.no/display/EZP/Siteaccess+Matching"
    dc:title="Siteaccess Matching"
    trackback:ping="https://doc.ez.no/rpc/trackback/2719830"/>
</rdf:RDF>
-->

            
    



<div id="labels-section" class="pageSection group">
    <div class="labels-section-content content-column" entityid="2719830" entitytype="page">
	<div class="labels-content">
		
    <ul class="label-list label-list-right ">
            

<li class="aui-label " data-label-id="3276803">
    <a class="aui-label-split-main" href="../label/EZP/siteaccess.html">siteaccess</a>
    </li><li class="aui-label " data-label-id="15630343">
    <a class="aui-label-split-main" href="../label/EZP/configuration.html">configuration</a>
    </li>             </ul>

    </div>
</div></div>

            
            




            
    








                    
    
<div id="comments-section" class="pageSection group">
            <div class="section-header">
            <h2 id="comments-section-title" class="section-title">
                                    4 Comments
                            </h2>
        </div>
    
    
    
                            <ol class="comment-threads top-level" id="page-comments">
                        <li id="comment-thread-2720420" class="comment-thread">
                    <div class="comment  " id="comment-2720420">
                <p class="comment-user-logo">
                    <img class="userLogo logo anonymous" src="../s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/_/images/icons/profilepics/anonymous.png"
           alt="User icon: philippe.vincent-royol@ez.no" title="philippe.vincent-royol@ez.no">                </p>
                <div class="comment-header">
                    <h4 class="author">    <a href="../loginc880.html"
                       class="url fn"
                            >Philippe Vincent-Royol</a></h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>Nice work ! Just a question about host/uri match: how could it work with the matcher? it ll be include in ez5 or should we develop it ?</p>
                    </div>
                    <div class="comment-actions">
                                                      <ul class="comment-actions-secondary">
                                                                      <li class="first comment-permalink"><a title="Permanent link to this comment" href="../display/EZP/Siteaccess%2bMatchingdf84.html?focusedCommentId=2720420#comment-2720420"
                id="comment-permalink-2720420"                ><span>Permalink</span></a></li>
            </ul>
                                <ul class="comment-actions-primary">
                                                                      <li class="first comment-date"><a title="Sep 04, 2012 11:04" href="../display/EZP/Siteaccess%2bMatchingdf84.html?focusedCommentId=2720420#comment-2720420"
                              ><span>Sep 04, 2012</span></a></li>
            </ul>
                      </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="https://doc.ez.no/display/EZP/Siteaccess+Matching?focusedCommentId=2720420#comment-2720420"
    dc:identifier="https://doc.ez.no/display/EZP/Siteaccess+Matching?focusedCommentId=2720420#comment-2720420"
    dc:title="Siteaccess Matching"
    trackback:ping="https://doc.ez.no/rpc/trackback/2720420"/>
</rdf:RDF>
-->

                    
            </li>
                        <li id="comment-thread-2720425" class="comment-thread">
                    <div class="comment  " id="comment-2720425">
                <p class="comment-user-logo">
                    <img class="userLogo logo anonymous" src="../s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/_/images/icons/profilepics/anonymous.png"
           alt="User icon: jerome.vieilledent@ez.no" title="jerome.vieilledent@ez.no">                </p>
                <div class="comment-header">
                    <h4 class="author">    <a href="../loginaee9.html"
                       class="url fn"
                            >Jérôme Vieilledent</a></h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>Thanks.</p><p>It's a pending task. We will introduce matcher combinators for that. So it will be more powerful <img class="emoticon emoticon-smile" src="../s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/_/images/icons/emoticons/smile.png" data-emoticon-name="smile" alt="(smile)" /></p><p><em>Edit: See Compound SiteAccess matchers.</em></p>
                    </div>
                    <div class="comment-actions">
                                                      <ul class="comment-actions-secondary">
                                                                      <li class="first comment-permalink"><a title="Permanent link to this comment" href="../display/EZP/Siteaccess%2bMatching8462.html?focusedCommentId=2720425#comment-2720425"
                id="comment-permalink-2720425"                ><span>Permalink</span></a></li>
            </ul>
                                <ul class="comment-actions-primary">
                                                                      <li class="first comment-date"><a title="Apr 11, 2014 08:07" href="../display/EZP/Siteaccess%2bMatching8462.html?focusedCommentId=2720425#comment-2720425"
                              ><span>Apr 11, 2014</span></a></li>
            </ul>
                      </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="https://doc.ez.no/display/EZP/Siteaccess+Matching?focusedCommentId=2720425#comment-2720425"
    dc:identifier="https://doc.ez.no/display/EZP/Siteaccess+Matching?focusedCommentId=2720425#comment-2720425"
    dc:title="Siteaccess Matching"
    trackback:ping="https://doc.ez.no/rpc/trackback/2720425"/>
</rdf:RDF>
-->

                    
            </li>
                        <li id="comment-thread-2720628" class="comment-thread">
                    <div class="comment  " id="comment-2720628">
                <p class="comment-user-logo">
                    <img class="userLogo logo anonymous" src="../s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/_/images/icons/profilepics/anonymous.png"
           alt="User icon: joao.inacio@ez.no" title="joao.inacio@ez.no">                </p>
                <div class="comment-header">
                    <h4 class="author">    <a href="../loginfe55.html"
                       class="url fn"
                            >Joao Inacio</a></h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>The configuration doc. seems outdated. From what I could tell, It is now set in (and imported from) <strong>parameters.yml</strong>, using a different structure:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>parameters.yml</b></div><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="theme: Eclipse; brush: php; gutter: false"><![CDATA[ezpublish:
    siteaccess:
        # Available siteaccesses
        list:
            - ezdemo_site
            - ezdemo_site_admin
        # Siteaccess groups. Use them to group common settings.
        groups:
            ezdemo_group: [ezdemo_site, ezdemo_site_admin]

]]></script>
</div></div>
                    </div>
                    <div class="comment-actions">
                                                      <ul class="comment-actions-secondary">
                                                                      <li class="first comment-permalink"><a title="Permanent link to this comment" href="../display/EZP/Siteaccess%2bMatchingfe96.html?focusedCommentId=2720628#comment-2720628"
                id="comment-permalink-2720628"                ><span>Permalink</span></a></li>
            </ul>
                                <ul class="comment-actions-primary">
                                                                      <li class="first comment-date"><a title="Sep 18, 2012 22:43" href="../display/EZP/Siteaccess%2bMatchingfe96.html?focusedCommentId=2720628#comment-2720628"
                              ><span>Sep 18, 2012</span></a></li>
            </ul>
                      </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="https://doc.ez.no/display/EZP/Siteaccess+Matching?focusedCommentId=2720628#comment-2720628"
    dc:identifier="https://doc.ez.no/display/EZP/Siteaccess+Matching?focusedCommentId=2720628#comment-2720628"
    dc:title="Siteaccess Matching"
    trackback:ping="https://doc.ez.no/rpc/trackback/2720628"/>
</rdf:RDF>
-->

                    
            </li>
                        <li id="comment-thread-2720646" class="comment-thread">
                    <div class="comment  " id="comment-2720646">
                <p class="comment-user-logo">
                    <img class="userLogo logo anonymous" src="../s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/_/images/icons/profilepics/anonymous.png"
           alt="User icon: jerome.vieilledent@ez.no" title="jerome.vieilledent@ez.no">                </p>
                <div class="comment-header">
                    <h4 class="author">    <a href="../loginaee9.html"
                       class="url fn"
                            >Jérôme Vieilledent</a></h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>You're right <img class="emoticon emoticon-smile" src="../s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/_/images/icons/emoticons/smile.png" data-emoticon-name="smile" alt="(smile)" />. I just didn't have time to update the documentation yet <img class="emoticon emoticon-wink" src="../s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/_/images/icons/emoticons/wink.png" data-emoticon-name="wink" alt="(wink)" /></p>
                    </div>
                    <div class="comment-actions">
                                                      <ul class="comment-actions-secondary">
                                                                      <li class="first comment-permalink"><a title="Permanent link to this comment" href="../display/EZP/Siteaccess%2bMatching9cdb.html?focusedCommentId=2720646#comment-2720646"
                id="comment-permalink-2720646"                ><span>Permalink</span></a></li>
            </ul>
                                <ul class="comment-actions-primary">
                                                                      <li class="first comment-date"><a title="Sep 20, 2012 17:14" href="../display/EZP/Siteaccess%2bMatching9cdb.html?focusedCommentId=2720646#comment-2720646"
                              ><span>Sep 20, 2012</span></a></li>
            </ul>
                      </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="https://doc.ez.no/display/EZP/Siteaccess+Matching?focusedCommentId=2720646#comment-2720646"
    dc:identifier="https://doc.ez.no/display/EZP/Siteaccess+Matching?focusedCommentId=2720646#comment-2720646"
    dc:title="Siteaccess Matching"
    trackback:ping="https://doc.ez.no/rpc/trackback/2720646"/>
</rdf:RDF>
-->

                    
            </li>
                </ol>
    
            <div class="bottom-comment-panels comment-panels">
                                    
    


    
            </div>
    
    </div>


            
</div>


    




    
    

    
    
    








</div>
  
        <div id="theme-footer">
            <div class="sectionColumnWrapper"><div class="sectionMacro">
<div class="sectionMacroRow"><div class="columnMacro"></div>
<div class="columnMacro">
<div class="panel" style="background-color: #ecf0f1;border-style: solid;border-width: 1px;"><div class="panelContent" style="background-color: #ecf0f1;">
<p>Where Content Means Business</p>
</div></div></div>
<div class="columnMacro"></div></div></div></div>
        </div>
    
    </div>
</div>


        
            <div id="footer">

    <section class="footer-body">

                                                <p class="license license-opensource">
                  Powered by a free <b>Atlassian Confluence Open Source Project License</b> granted to eZ Publish. <a href="http://www.atlassian.com/c/conf/11461">Evaluate Confluence today</a>.<br>
                </p>
                        
    

    <ul id="poweredby">
        <li class="noprint">Powered by <a href="http://www.atlassian.com/software/confluence" class="hover-footer-link">Atlassian Confluence</a> <span id='footer-build-information'>5.4.4</span>, <a href="http://www.atlassian.com/software/confluence/overview/team-collaboration-software?utm_source=confluence-footer" class="hover-footer-link">Team Collaboration Software</a></li>
        <li class="print-only">Printed by Atlassian Confluence 5.4.4, Team Collaboration Software.</li>
        <li class="noprint"><a href="http://jira.atlassian.com/secure/BrowseProject.jspa?id=10470" class="hover-footer-link">Report a bug</a></li>
        <li class="noprint"><a href="http://www.atlassian.com/about/connected.jsp?s_kwcid=Confluence-stayintouch" class="hover-footer-link">Atlassian News</a></li>
    </ul>

    

            <script>
AJS.toInit(function(){
 if(AJS.params.spaceKey &&
    AJS.params.spaceKey === 'MAIN' ||
    AJS.params.spaceKey === 'EZMA' ||
    AJS.params.spaceKey === 'ODC' ||
    AJS.params.spaceKey === 'EZP50' ||
    AJS.params.spaceKey === 'EZP51' ||
    AJS.params.spaceKey === 'EZP52' ||
    AJS.params.spaceKey === 'EZPCLOUD' ||
    AJS.params.spaceKey === 'EZP' ||
    AJS.params.spaceKey === 'EZRECO'
){

(function()
{var isSecure=('https:'==document.location.protocol);var ff=document.createElement('script');ff.type='text/javascript';ff.async=true;ff.src=(isSecure?'https':'http')+'://'+(isSecure?'secure.':'lb.')+'liveviewer.ez.no/statjs/sst-120-1304513615/stat.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(ff,s);}
)();

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-303624-13', 'ez.no');
  ga('send', 'pageview');
}}
);
</script>
    
    </section>

</div>

            
    </div>
</body>

<!-- Mirrored from doc.ez.no/pages/viewpage.action?pageId=2719830 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 21 Oct 2014 10:05:25 GMT -->
</html>
