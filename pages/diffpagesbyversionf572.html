<!DOCTYPE html>
<html>

<!-- Mirrored from doc.ez.no/pages/diffpagesbyversion.action?pageId=7439125&selectedPageVersions=22&selectedPageVersions=23 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 21 Oct 2014 09:39:58 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <title>Page Comparison - Upgrading from 5.1 to 5.2 (v.22 vs v.23) - eZ Publish Platform 5.x - eZ Documentation</title>

        

                        
    
                        
    
                        
    

    <meta http-equiv="X-UA-Compatible" content="IE=EDGE,chrome=IE7">
<meta charset="UTF-8">
<meta id="confluence-context-path" name="confluence-context-path" content="">
<meta id="confluence-base-url" name="confluence-base-url" content="../index.html">

<meta id="atlassian-token" name="atlassian-token" content="494111f00e28ced96046bfb6fbe8f75e18d44b71">

<meta id="confluence-space-key" name="confluence-space-key" content="EZP">
<script type="text/javascript">
        var contextPath = '';
</script>

    

<!-- include system css resources -->


    <link type="text/css" rel="stylesheet" href="../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch934e.css?media=print" media="print">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 8]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+8" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/f10c36425b731f08af1bde9c7e745307/_/download/contextbatch/css/pagediffs/batch.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/f10c36425b731f08af1bde9c7e745307/_/download/contextbatch/css/pagediffs/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/0530abbfd1f6123e0fbc7e3ab0d2fc5c/_/download/contextbatch/css/atl.confluence.plugins.pagetree-desktop%2cmain/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/70f6d025b64de5008ccd042576cd8d90/_/download/contextbatch/css/page/batch.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/70f6d025b64de5008ccd042576cd8d90/_/download/contextbatch/css/page/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/e6a8343e61db195b04f1598119e4df48/_/download/contextbatch/css/atl.general/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/47016f6b93087cd2003bf867318254ee/_/download/contextbatch/css/theme.doc/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/1.3/_/download/batch/com.atlassian.confluence.plugins.confluence-hig/com.atlassian.confluence.plugins.confluence-highlight-ac" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/1.3/_/download/batch/com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources/com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/5.3.3-m6/_/download/batch/confluence.extra.jira_web-resources-adg/confluence.extra.jira_web-resources-adg.css" media="all">
<link type="text/css" rel="stylesheet" href="../s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/51/_/styles/colorsb538.css?spaceKey=EZP" media="all">
<link type="text/css" rel="stylesheet" href="../s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/51/_/styles/customb538.css?spaceKey=EZP" media="all">

<!-- end system css resources -->

    <meta name="robots" content="noindex,nofollow">
    <meta name="robots" content="noarchive">
    <meta name="confluence-request-time" content="1413881524071">
        
    
        
            <meta name="ajs-is-confluence-admin" content="false">
            <meta name="ajs-connection-timeout" content="10000">
            <meta name="ajs-use-keyboard-shortcuts" content="true">
            <meta name="ajs-keyboardshortcut-hash" content="ec556f85a7b4fc86b37ab7a78ce3d8b0">
            <meta id="team-calendars-has-jira-link" content="true">
            <meta name="ajs-team-calendars-display-time-format" content="displayTimeFormat12">
            <meta id="team-calendars-user-timezone" content="UTC">
            <script type="text/x-template" id="team-calendars-messages" title="team-calendars-messages">
    <fieldset class="i18n hidden">
                    <input type="hidden" name="calendar3.month.short.april" value="Apr">
                    <input type="hidden" name="calendar3.month.short.november" value="Nov">
                    <input type="hidden" name="calendar3.month.long.november" value="November">
                    <input type="hidden" name="calendar3.day.short.friday" value="Fri">
                    <input type="hidden" name="calendar3.month.long.february" value="February">
                    <input type="hidden" name="calendar3.month.short.february" value="Feb">
                    <input type="hidden" name="calendar3.day.long.wednesday" value="Wednesday">
                    <input type="hidden" name="calendar3.month.long.december" value="December">
                    <input type="hidden" name="calendar3.day.short.sunday" value="Sun">
                    <input type="hidden" name="calendar3.month.long.april" value="April">
                    <input type="hidden" name="calendar3.month.long.july" value="July">
                    <input type="hidden" name="calendar3.month.long.september" value="September">
                    <input type="hidden" name="calendar3.month.short.august" value="Aug">
                    <input type="hidden" name="calendar3.month.short.june" value="Jun">
                    <input type="hidden" name="calendar3.month.short.may" value="May">
                    <input type="hidden" name="calendar3.day.short.tuesday" value="Tue">
                    <input type="hidden" name="calendar3.day.short.wednesday" value="Wed">
                    <input type="hidden" name="calendar3.day.long.thursday" value="Thursday">
                    <input type="hidden" name="calendar3.month.long.march" value="March">
                    <input type="hidden" name="calendar3.month.long.october" value="October">
                    <input type="hidden" name="calendar3.day.short.saturday" value="Sat">
                    <input type="hidden" name="calendar3.month.short.january" value="Jan">
                    <input type="hidden" name="calendar3.month.long.may" value="May">
                    <input type="hidden" name="calendar3.month.long.january" value="January">
                    <input type="hidden" name="calendar3.month.short.october" value="Oct">
                    <input type="hidden" name="calendar3.day.short.thursday" value="Thu">
                    <input type="hidden" name="calendar3.day.long.friday" value="Friday">
                    <input type="hidden" name="calendar3.day.long.sunday" value="Sunday">
                    <input type="hidden" name="calendar3.month.long.june" value="June">
                    <input type="hidden" name="calendar3.month.long.august" value="August">
                    <input type="hidden" name="calendar3.day.long.tuesday" value="Tuesday">
                    <input type="hidden" name="calendar3.day.long.saturday" value="Saturday">
                    <input type="hidden" name="calendar3.month.short.september" value="Sep">
                    <input type="hidden" name="calendar3.day.long.monday" value="Monday">
                    <input type="hidden" name="calendar3.month.short.july" value="Jul">
                    <input type="hidden" name="calendar3.month.short.march" value="Mar">
                    <input type="hidden" name="calendar3.day.short.monday" value="Mon">
                    <input type="hidden" name="calendar3.month.short.december" value="Dec">
            </fieldset>
</script>

            

    
            
    
    
            <meta name="ajs-page-id" content="7439125">
            <meta name="ajs-content-type" content="page">
            <meta name="ajs-page-title" content="Upgrading from 5.1 to 5.2">
            <meta name="ajs-parent-page-title" content="Upgrade">
            <meta name="ajs-parent-page-id" content="19234967">
            <meta name="ajs-space-key" content="EZP">
            <meta name="ajs-space-name" content="eZ Publish Platform 5.x">
            <meta name="ajs-from-page-title" content="">
            <meta name="ajs-can-remove-page" content="false">
            <meta name="ajs-context-path" content="">
            <meta name="ajs-base-url" content="https://doc.ez.no">
            <meta name="ajs-version-number" content="5.4.4">
            <meta name="ajs-build-number" content="4733">
            <meta name="ajs-remote-user" content="">
            <meta name="ajs-current-user-fullname" content="">
            <meta name="ajs-current-user-avatar-url" content="">
            <meta name="ajs-static-resource-url-prefix" content="/s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/_">
            <meta name="ajs-global-settings-attachment-max-size" content="10485760">
            <meta name="ajs-user-locale" content="en_GB">
            <meta name="ajs-enabled-dark-features" content="sync.event">
            <meta name="ajs-atl-token" content="494111f00e28ced96046bfb6fbe8f75e18d44b71">
            <meta name="ajs-confluence-flavour" content="VANILLA">
            <meta name="ajs-editor.loader.resources" content="&lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; href=https://doc.ez.no/pages/"/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/ff74d20045a1ee5a81efff6a44eea98b/_/download/contextbatch/css/editor,macro-browser,fullpage-editor,-atl.general/batch.css" media=&quot;all&quot;&gt;
&lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; href=https://doc.ez.no/pages/"/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/ff74d20045a1ee5a81efff6a44eea98b/_/download/contextbatch/css/editor,macro-browser,fullpage-editor,-atl.general/batch.css?media=%28max-width%3A+1450px%29%22 media=&quot;(max-width: 1450px)&quot;&gt;
&lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; href=https://doc.ez.no/pages/"/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/ff74d20045a1ee5a81efff6a44eea98b/_/download/contextbatch/css/editor,macro-browser,fullpage-editor,-atl.general/batch.css?media=print%22 media=&quot;print&quot;&gt;
&lt;!--[if lt IE 9]&gt;
&lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; href=https://doc.ez.no/pages/"/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/ff74d20045a1ee5a81efff6a44eea98b/_/download/contextbatch/css/editor,macro-browser,fullpage-editor,-atl.general/batch.css?conditionalComment=lt+IE+9%22 media=&quot;all&quot;&gt;
&lt;![endif]--&gt;
&lt;!--[if IE]&gt;
&lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; href=https://doc.ez.no/pages/"/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/ff74d20045a1ee5a81efff6a44eea98b/_/download/contextbatch/css/editor,macro-browser,fullpage-editor,-atl.general/batch.css?ieonly=true%22 media=&quot;all&quot;&gt;
&lt;![endif]--&gt;
&lt;script type=&quot;text/javascript&quot; src=https://doc.ez.no/pages/"/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/ff74d20045a1ee5a81efff6a44eea98b/_/download/contextbatch/js/editor,macro-browser,fullpage-editor,-atl.general/batch.js" &gt;&lt;/script&gt;
">
            <meta name="ajs-date.format" content="MMM dd, yyyy">
    
    <link rel="shortcut icon" href="https://doc.ez.no/favicon.ico">
    <link rel="icon" type="image/x-icon" href="https://doc.ez.no/favicon.ico">

<link rel="search" type="application/opensearchdescription+xml" href="https://doc.ez.no/opensearch/osd.action" title="eZ Documentation"/>

    <!-- include system javascript resources -->
    <script type="text/javascript" src="https://doc.ez.no/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/js/batch.js" ></script>
<!--[if lte IE 8]>
<script type="text/javascript" src="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/js/batch.js?conditionalComment=lte+IE+8" ></script>
<![endif]-->
<script type="text/javascript" src="https://doc.ez.no/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/f10c36425b731f08af1bde9c7e745307/_/download/contextbatch/js/pagediffs/batch.js" ></script>
<script type="text/javascript" src="https://doc.ez.no/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/0530abbfd1f6123e0fbc7e3ab0d2fc5c/_/download/contextbatch/js/atl.confluence.plugins.pagetree-desktop,main/batch.js" ></script>
<script type="text/javascript" src="https://doc.ez.no/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/70f6d025b64de5008ccd042576cd8d90/_/download/contextbatch/js/page/batch.js" ></script>
<script type="text/javascript" src="https://doc.ez.no/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/e6a8343e61db195b04f1598119e4df48/_/download/contextbatch/js/atl.general/batch.js" ></script>
<script type="text/javascript" src="https://doc.ez.no/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/1.3/_/download/batch/com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources/com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources.js" ></script>
<script type="text/javascript" src="https://doc.ez.no/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/1.3/_/download/batch/com.atlassian.mywork.mywork-confluence-host-plugin:mw-header-anchor/com.atlassian.mywork.mywork-confluence-host-plugin:mw-header-anchor.js" ></script>

    

        
    <!-- end system javascript resources -->

        
        

    
                <link rel="canonical" href="https://doc.ez.no/display/EZP/Upgrading+from+5.1+to+5.2">
        <link rel="shortlink" href="https://doc.ez.no/x/FYNx">
    <meta name="wikilink" content="[EZP:Upgrading from 5.1 to 5.2]">
    <meta name="page-version" content="23">

</head>

<body             onload="placeFocus()"
     id="com-atlassian-confluence" class="theme-documentation  aui-theme-default aui-layout">

        
    <div id="full-height-container">
    <div id="header-precursor">
        
                    </div>






<header id="header" role="banner">
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation"><div class="aui-header-inner"><div class="aui-header-before"><a class="aui-dropdown2-trigger app-switcher-trigger" aria-owns="app-switcher" aria-haspopup="true" tabindex="0"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a><div id="app-switcher" class="aui-dropdown2 aui-style-default"><div class="app-switcher-loading">Loading&hellip;</div></div><script>
            (function (NL) {
                var initialise = function () {
                    // For some milestones of AUI, the atlassian soy namespace was renamed to aui. Handle that here by ensuring that window.atlassian is defined.
                    window.atlassian = window.atlassian || window.aui;
                    new NL.AppSwitcher({
                        dropdownContents: '#app-switcher'
                    });
                };
                if (NL.AppSwitcher) {
                    initialise();
                } else {
                    NL.onInit = initialise;
                }
            }(window.NL = (window.NL || {})));
            window.NL.isUserAdmin = false</script></div><div class="aui-header-primary"><h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://doc.ez.no/"><img src="https://doc.ez.no/s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/_/images/logo/confluence-logo.png" alt="eZ Documentation" /></a></h1><ul class="aui-nav">
                            <li>
            
        
        
<a  id="space-directory-link" href="https://doc.ez.no/spacedirectory/view.action"  class=" aui-nav-imagelink"   title="Spaces">
            <span>Spaces</span>
    </a>
        </li>
                            <li id="browseMenu" role="menu">
            
    
        <a id="browse-menu-link" class="aui-nav-link aui-dropdown2-trigger" href="#" aria-haspopup="true" aria-owns="browse-menu-link-content" title="Browse">
        <span class="browse">Browse</span>
    </a>
    <nav id="browse-menu-link-content" class="aui-dropdown2 aui-style-default" aria-hidden="true">
                    <div class="aui-dropdown2-section">
                <ul  id="browse-menu-link-leading" class="aui-list-truncate section-leading first">
                                            <li>
    
            
<a  id="space-pages-link" href="https://doc.ez.no/pages/listpages.action?key=EZP" class="    "      title="Browse pages in the eZ Publish Platform 5.x space" >
        Pages
</a>
</li>
                                            <li>
    
            
<a  id="space-blogposts-link" href="https://doc.ez.no/pages/viewrecentblogposts.action?key=EZP" class="    "      title="Browse blogs in the eZ Publish Platform 5.x space" >
        Blog
</a>
</li>
                                            <li>
    
            
<a  id="space-labels-link" href="https://doc.ez.no/labels/listlabels-heatmap.action?key=EZP" class="    "      title="Browse labels in the eZ Publish Platform 5.x space" >
        Labels
</a>
</li>
                                            <li>
    
            
<a  id="space-advanced-link" href="https://doc.ez.no/spaces/viewspacesummary.action?key=EZP" class="    "      title="Browse additional space functions in the eZ Publish Platform 5.x space" >
        Space Operations
</a>
</li>
                                    </ul>
            </div>
            </nav>
    
        </li>
        </ul>
</div><div class="aui-header-secondary"><ul class="aui-nav">
                <li>
<form id="quick-search" class="aui-quicksearch dont-default-focus header-quicksearch" action="https://doc.ez.no/dosearchsite.action" method="get">
    <fieldset>
                    <input type='hidden' name='where' value='EZP'/>
                            <input type="hidden" name="spaceSearch" value="true"/>
                <label for="quick-search-query" class="assistive">Quick Search</label>
        <input id="quick-search-query" class="text app-search search quick-search-query" type="text"
               accessKey="q" autocomplete="off" name="queryString" title="Quick Search"  placeholder="Search space" />
        <input id="quick-search-submit" class="quick-search-submit" type="submit" value="Search"/>

        <div class="aui-dd-parent quick-nav-drop-down"></div>
    </fieldset>
    <div class="hidden parameters">
                    <!-- putMetadata failed to add value for key "quick-nav-enabled" so rendering metadata inline - see server debug log for details -->
        <meta name="ajs-quick-nav-enabled" content="true">
                </div>
</form>
</li>
    <li>    
        <a id="help-menu-link" class="aui-nav-link aui-dropdown2-trigger" href="#" aria-haspopup="true" aria-owns="help-menu-link-content" title="Help">
        <span class="aui-icon aui-icon-small aui-iconfont-help">Help</span>
    </a>
    <nav id="help-menu-link-content" class="aui-dropdown2 aui-style-default" aria-hidden="true">
                    <div class="aui-dropdown2-section">
                <ul  id="help-menu-link-leading" class="aui-list-truncate section-leading first">
                                            <li>
    
            
<a  id="confluence-help-link" href="http://docs.atlassian.com/confluence/docs-54/Getting+Help+And+Support" class="    "      title="Visit the Confluence documentation home"  target="_blank"
>
        Online Help
</a>
</li>
                                            <li>
    
                
<a  id="keyboard-shortcuts-link" href="#" class="    "      title="View available keyboard shortcuts" >
        Keyboard Shortcuts
</a>
</li>
                                            <li>
    
            
<a  id="feed-builder-link" href="https://doc.ez.no/dashboard/configurerssfeed.action" class="    "      title="Create your custom RSS feed." >
        Feed Builder
</a>
</li>
                                            <li>
    
            
<a  id="whats-new-menu-link" href="http://docs.atlassian.com/confluence/docs-54/whatsnew/iframe" class="    "      title="" >
        What’s new
</a>
</li>
                                            <li>
    
                
<a  id="gadget-directory-link" href="#" class="   user-item administration-link "      title="Browse gadgets provided by Confluence" >
        Available Gadgets
</a>
</li>
                                            <li>
    
            
<a  id="confluence-about-link" href="https://doc.ez.no/aboutconfluencepage.action" class="    "      title="Get more information about Confluence" >
        About Confluence
</a>
</li>
                                    </ul>
            </div>
            </nav>
    </li>
    <li>    
    </li>
                <li>                                    <li>
    
            
<a  id="login-link" href="https://doc.ez.no/login.action?os_destination=%2Fpages%2Fdiffpagesbyversion.action%3FpageId%3D7439125%26selectedPageVersions%3D22%26selectedPageVersions%3D23" class="   user-item login-link "      title="" >
        Log in
</a>
</li>
                        </li>
</ul>
</div></div><!-- .aui-header-inner--></nav><!-- .aui-header -->
    <br class="clear">
</header>

    <div id="splitter">
    <div id="splitter-sidebar"  class="padding-div" >
        
        <p>&nbsp;<br/>
<strong>Navigation</strong><br/>
&bull; <a href="https://confluence.ez.no/display/MAIN" class="external-link" rel="nofollow">eZ Documentation Center</a><br/>
&nbsp;</p>
    

                    
    


<div class="plugin_pagetree">

        
        
    <ul class="plugin_pagetree_children_list plugin_pagetree_children_list_noleftspace">
        <div class="plugin_pagetree_children">
        </div>
    </ul>

    <fieldset class="hidden">
        <input type="hidden" name="treeId" value="">
        <input type="hidden" name="treeRequestId" value="/plugins/pagetree/naturalchildren.action?decorator=none&amp;excerpt=false&amp;sort=position&amp;reverse=false&amp;disableLinks=false&amp;expandCurrent=false">
        <input type="hidden" name="treePageId" value="7439125">

        <input type="hidden" name="noRoot" value="false">
        <input type="hidden" name="rootPageId" value="1114149">

        <input type="hidden" name="rootPage" value="">
        <input type="hidden" name="startDepth" value="0">
        <input type="hidden" name="spaceKey" value="EZP" >

        <input type="hidden" name="i18n-pagetree.loading" value="Loading...">
        <input type="hidden" name="i18n-pagetree.error.permission" value="Unable to load page tree. It seems that you do not have permission to view the root page.">
        <input type="hidden" name="i18n-pagetree.eeror.general" value="There was a problem retrieving the page tree. Please check the server log file for more information.">
        <input type="hidden" name="loginUrl" value="/login.action?os_destination=%2Fpages%2Fdiffpagesbyversion.action%3FpageId%3D7439125%26selectedPageVersions%3D22%26selectedPageVersions%3D23">
        <input type="hidden" name="mobile" value="false">

                <fieldset class="hidden">
                                                <input type="hidden" name="ancestorId" value="19234967">
                                    <input type="hidden" name="ancestorId" value="6292016">
                                    <input type="hidden" name="ancestorId" value="1114149">
                                    </fieldset>
    </fieldset>
</div>



            </div>
    <div id="splitter-content">

                    <script type="text/javascript" src="https://doc.ez.no/s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/5.4.4/_/download/resources/com.atlassian.confluence.plugins.doctheme:resources/doc-theme.js"></script>
    
                        
        <div id="theme-header">
            <div class="sectionColumnWrapper"><div class="sectionMacro">
<div class="sectionMacroRow"><div class="columnMacro"></div>
<div class="columnMacro">
<div class="panel" style="background-color: #ecf0f1;border-style: solid;border-width: 1px;"><div class="panelContent" style="background-color: #ecf0f1;">
<p>This documentation is for <strong>eZ Publish Platform 5.x</strong> "Platform stack". For documentation on "legacy" <a href="https://doc.ez.no/eZ-Publish/" class="external-link" rel="nofollow">go here</a>, for explanation on difference see <a href="https://doc.ez.no/pages/viewpage.action?pageId=11403666" class="external-link" rel="nofollow">5.x Architecture overview</a></p>
</div></div></div>
<div class="columnMacro"></div></div></div></div>
        </div>
    
            
<div id="main"  class="aui-page-panel" >
    <div id="main-header">
        
        
    <div id="navigation" class="content-navigation view-information">
                    <ul class="ajs-menu-bar">
                            <li class="ajs-button normal">

    
        
                            
    
    
    <a  id="viewPageLink" href="https://doc.ez.no/display/EZP/Upgrading+from+5.1+to+5.2" rel="nofollow"  class="view"   title="">
                <span>View Page</span>    </a>
</li>
                        
                    
        <li class="normal ajs-menu-item">
        <a id="action-menu-link" class="action ajs-menu-title aui-dropdown2-trigger" href="#" aria-haspopup="true" aria-owns="action-menu" data-container="#navigation"><span><span>Tools</span></span></a>         <div id="action-menu" class="aui-dropdown2 aui-style-default">
                            <ul  id="action-menu-primary"                     class="section-primary first aui-dropdown2-section">
                                            <li>

    
        
                            
    
    
    <a  id="view-attachments-link" href="https://doc.ez.no/pages/viewpageattachments.action?pageId=7439125" rel="nofollow"  class="action-view-attachments"  accessKey="t"  title="View Attachments">
                <span>A<u>t</u>tachments (0)</span>    </a>
</li>
                                        <li>

    
        
                            
    
    
    <a  id="action-view-history-link" href="https://doc.ez.no/pages/viewpreviousversions.action?pageId=7439125" rel="nofollow"  class="action-view-history"   title="">
                <span>Page History</span>    </a>
</li>
                                        <li>

    
        
                            
    
    
    <a  id="action-page-permissions-link" href="https://doc.ez.no/pages/viewinfo.action?pageId=7439125" rel="nofollow"  class="action-page-permissions"   title="Edit restrictions">
                <span>Restrictions</span>    </a>
</li>
                                </ul>
                            <ul  id="action-menu-secondary"                     class="section-secondary aui-dropdown2-section">
                                            <li>

    
        
                            
    
    
    <a  id="view-page-info-link" href="https://doc.ez.no/pages/viewinfo.action?pageId=7439125" rel="nofollow"  class="action-view-info"   title="">
                <span>Page Information</span>    </a>
</li>
                                        <li>

    
        
                            
    
    
    <a  id="link-to-page-link" href="https://doc.ez.no/pages/viewinfo.action?pageId=7439125" rel="nofollow"  class=""   title="Link to this Page">
                <span>Link to this Page…</span>    </a>
</li>
                                        <li>

    
        
                            
    
    
    <a  id="view-in-hierarchy-link" href="https://doc.ez.no/pages/listpages-dirview.action?key=EZP&amp;openId=7439125#selectedPageInHierarchy" rel="nofollow"  class=""   title="">
                <span>View in Hierarchy</span>    </a>
</li>
                                        <li>

    
        
                            
    
    
    <a  id="action-view-source-link" href="https://doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=7439125" rel="nofollow"  class="action-view-source popup-link"   title="">
                <span>View Source</span>    </a>
</li>
                                        <li>

    
        
                            
    
    
    <a  id="action-export-pdf-link" href="https://doc.ez.no/spaces/flyingpdf/pdfpageexport.action?pageId=7439125" rel="nofollow"  class=""   title="">
                <span>Export to PDF</span>    </a>
</li>
                                        <li>

    
        
                            
    
    
    <a  id="action-export-word-link" href="https://doc.ez.no/exportword?pageId=7439125" rel="nofollow"  class="action-export-word"   title="">
                <span>Export to Word</span>    </a>
</li>
                                </ul>
                    </div>
    </li>
            </ul>
    </div>

        
                <div id="title-heading" class="pagetitle with-breadcrumbs">
        
                            <div class="space-logo " data-key="EZP" data-name="eZ Publish Platform 5.x" data-entity-type="confluence.space">
            <a><img class="logo space custom" src="https://doc.ez.no/download/attachments/1736738/EZP?version=4&amp;modificationDate=1405688262000&amp;api=v2" alt=""></a>
        </div>            
                            <div id="breadcrumb-section">
                    
    
    
    <ol id="breadcrumbs">
                    
                
        <li class="first" >
                

                    <span class=""><a href="https://doc.ez.no/display/EZP">eZ Publish Platform 5.x</a></span>
                                                <li id="ellipsis" title="Show all breadcrumbs"><span><strong>&#8230;</strong></span></li>
                                    
                
        <li class="hidden-crumb" >
                

                    <span class=""><a href="https://doc.ez.no/display/EZP/eZ+Publish+Platform+Documentation">eZ Publish Platform Documentation</a></span>
                                        
                
        <li class="hidden-crumb" >
                

                    <span class=""><a href="https://doc.ez.no/display/EZP/Installation+and+Upgrade+Guides">Installation and Upgrade Guides</a></span>
                                        
                
        <li class="hidden-crumb" >
                

                    <span class=""><a href="https://doc.ez.no/display/EZP/Upgrade">Upgrade</a></span>
                            
                
        <li>
                

                    <span class=""><a href="https://doc.ez.no/display/EZP/Upgrading+from+5.1+to+5.2">Upgrading from 5.1 to 5.2</a></span>
                </ol>


                </div>
            
            <h1 id="title-text" class="with-breadcrumbs">
                            Page History
                        </h1>
        </div>
    </div>

    

    
    
    
    
    

    

    
                
    
        




        




    

    

    







    
    
        
    
    
                    
    

    


<div id="content" class="page view-information">
    

<div id="action-messages">
                        </div>



        <script type="text/x-template" title="searchResultsGrid">
    <table class="aui">
        <thead>
            <tr class="header">
                <th class="search-result-title">Page Title</th>
                <th class="search-result-space">Space</th>
                <th class="search-result-date">Updated</th>
            </tr>
        </thead>
    </table>
</script>
<script type="text/x-template" title="searchResultsGridCount">
    <p class="search-result-count">{0}</p>
</script>
<script type="text/x-template" title="searchResultsGridRow">
    <tr class="search-result">
        <td class="search-result-title"><a href="{1}" class="content-type-{2}"><span>{0}</span></a></td>
        <td class="search-result-space"><a class="space" href="/display/{4}/" title="{3}">{3}</a></td>
        <td class="search-result-date"><span class="date" title="{6}">{5}</span></td>
    </tr>
</script>
        
    
    
                            
    
                        
                    <div class="diff-menu">
                <h2 class="diff-title">Versions Compared</h2>

                <div class="page-navigation section">
                                <div class="old page-version article">
                <h3 class="version-title">
                    <a class="page version-navigation" href="https://doc.ez.no/pages/viewpage.action?pageId=21987901">
                        <span class="assistive">Old Version</span>
                        <span class="version"> 22 </span>
                    </a>
                </h3>
                <p class="metadata author"><span class="assistive">changes.mady.by.user </span>    <a href="https://doc.ez.no/display/~sarah.haim-lubczanski@ez.no"
                       class="url fn"
                            >Sarah Haïm-Lubczanski</a></p>
                <p class="metadata modified"><span class="assistive">Saved on </span><time datetime="2014-03-07 15:02:05.0">Mar 07, 2014</time></p>
            </div>
        
                    <span class="assistive">compared with</span>

                                <div class="new page-version article">
                <h3 class="version-title">
                    <a class="page version-navigation" href="https://doc.ez.no/pages/viewpage.action?pageId=7439125">
                        <span class="assistive">New Version</span>
                        <span class="version"> Current </span>
                    </a>
                </h3>
                <p class="metadata author"><span class="assistive">changes.mady.by.user </span>    <a href="https://doc.ez.no/display/~sarah.haim-lubczanski@ez.no"
                       class="url fn"
                            >Sarah Haïm-Lubczanski</a></p>
                <p class="metadata modified"><span class="assistive">Saved on </span><time datetime="2014-03-07 15:02:06.0">Mar 07, 2014</time></p>
            </div>
        
                    <div class="diff-navigation nav">
                        <ul>
                                                    <li><a class="previous version-navigation" href="https://doc.ez.no/pages/diffpages.action?originalId=19891542&amp;pageId=21987901">
                                <span>Previous Change: Difference between versions 21 and 22</span>
                            </a></li>
                                                                           <li><a class="all version-navigation" href="https://doc.ez.no/pages/viewpreviousversions.action?pageId=7439125">
                                <span>View Page History</span>
                           </a></li>
                        </ul>
                    </div>
                </div>

                        <div class="legend">
            <h2 class="legend-title">Key</h2>
            <ul>
                <li><span class="diff-html-added">This line was added.</span></li>
                <li><span class="diff-html-removed">This line was removed.</span></li>
                <li><span class="diff-html-changed">Formatting was changed.</span></li>
            </ul>
        </div>
    
                            <div id="version-comment" class="noteMacro">
        <strong>Comment:</strong>
        Migrated to Confluence 5.3<br />
    </div>
                </div>
                                                                
    
<div id="page-diffs" class="wiki-content">
            <div class="attribute-heading"><p><span style="color: rgb(51,51,51);font-size: 14.0px;line-height: 1.4285715;"><table class="diff-macro bodyless"><thead><tr><th class="diff-macro-title"><span class="icon macro-placeholder-icon" style="background-image: url(https://doc.ez.no/s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/_/images/icons/macrobrowser/dropdown/toc.png);"> </span>Table of Contents</th></tr></thead></table><br /></span></p><p><span style="color: rgb(51,51,51);font-size: 14.0px;line-height: 1.4285715;">This section describes how to upgrade your existing eZ Publish 5.1 installation to version 5.2. Make sure that you have a working backup of the site before you do the actual upgrade, and make sure that the installation you are performing the upgrade on is offline.</span></p></div><h2 id="Upgradingfrom5.1to5.2-NoteonPaths">Note on Paths</h2><ul><li><em>/&lt;ezp5-root&gt;/</em>: The root directory where eZ Publish 5 is installed in, examples: "<em>/home/myuser/www</em>/" or "<em>/var/sites/ezpublish/</em>"</li><li><em>/&lt;ezp5-root&gt;/ezpublish_legacy/</em>:  Root directory of "Legacy" (aka "Legacy Stack", refers to the eZ Publish 4.x installation which is bundled with eZ Publish 5) normally inside "<em>ezpublish_legacy</em>/", example: "<em>/home/myuser/www/ezpublish_legacy/</em>"</li></ul><h2 id="Upgradingfrom5.1to5.2-Checkforrequirements">Check for requirements</h2><p>php 5.3.3 and higher is needed. Further information regarding system requirements can be found on <a href="https://confluence.ez.no/display/EZP/Requirements" class="external-link" rel="nofollow">Requirements Documentation Page</a>.<a name="eztoc126882_2" rel="nofollow" /></p><h2 id="Upgradingfrom5.1to5.2-Upgradesteps">Upgrade steps<a name="eztoc126882_1" rel="nofollow" /></h2><h3 id="Upgradingfrom5.1to5.2-Step1:Upgradethedistributionfiles">Step 1: Upgrade the distribution files</h3><p>The easiest way to upgrade the distribution files is to unpack eZ Publish 5.2 to a separate directory and then copy the directories that contain site-specific files from the existing 5.1 installation into "<em>/&lt;ezp5-root&gt;/</em>". Make sure you copy the following directories:</p><ul><li><code>ezpublish_legacy/design/&lt;your designs&gt;</code> (do NOT include built-in designs: admin, base, standard or admin2)</li><li><code>ezpublish_legacy/var/&lt;your_var_dir&gt;/storage</code></li><li><code>ezpublish_legacy/var/storage/packages</code></li><li><code>ezpublish_legacy/settings/siteaccess/&lt;your_siteaccesses&gt;</code></li><li><code>ezpublish_legacy/settings/override/*</code></li><li><code>ezpublish_legacy/extension/*</code> (not including the built-in / standalone ones: ezflow, ezjscore, ezoe, ezodf, ezie, ezmultiupload, ezmbpaex, ez_network, ezprestapiprovider, ezscriptmonitor, ezsi, ezfind)</li><li>src/</li><li><code>config.php</code> &amp; <code>config.cluster.php</code>, if applicable</li><li><code>ezpublish/config/*</code></li></ul><p><em><strong>NB:</strong> Since writable directories and files have been replaced / copied, their permissions might have changed. You may have to reconfigure webserver user permissions on specific folders as explained in the file <a href="https://confluence.ez.no/pages/viewpage.action?pageId=7438581#InstallingeZPublishonaLinux%2FUNIXbasedsystem-Settingupfolderpermission" class="external-link" rel="nofollow">permissions chapter of the installation process</a>.</em></p><table class="diff-macro"><thead><tr><th class="diff-macro-title"><span class="icon macro-placeholder-icon" style="background-image: url(https://doc.ez.no/s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/_/images/icons/macrobrowser/dropdown/info.png);"> </span>Info</th></tr></thead><tbody><tr><td class="diff-macro-properties"><table><tbody><tr><th>title</th><td>opcode cache</td></tr></tbody></table></td></tr></tbody><tbody><tr><td class="diff-macro-body"><p>If you use APC, or an op-code cache solution, make sure to clear the cache. The easiest way is to restart your web server.</p></td></tr></tbody></table><h3 id="Upgradingfrom5.1to5.2-Step2:upgradecustomextensions">Step 2: upgrade custom extensions</h3><p>If you are using custom extensions, the sub-directories inside the "extension" directory will also have to be copied from the existing 5.1 installation into "<em>/&lt;ezp5-root&gt;/ezpublish_legacy/extension/</em>". However, make sure that you do not overwrite any extensions that are included in eZ Publish distribution, which currently are (<em><strong>Note:</strong> As of eZ Publish 5.2, these extensions have the same version number as eZ Publish</em>):</p><p>Note that upgrading the distribution files will overwrite the autoload arrays for extensions. You will need to re-generate the autoload arrays for active extensions later.</p><p><em><strong>Important: </strong>If you plan to upgrade your eZ Website Interface, eZ Flow or eZ Demo site package as well, then additional extensions will be updated and the step for re-generate the autoload arrays can be skipped until that is done (links to documentation for upgrading these site packages can be found in the last step of this page).</em><a name="eztoc126882_4" rel="nofollow" /></p><h3 id="Upgradingfrom5.1to5.2-Step3:upgradethedatabase">Step 3: upgrade the database</h3><p>Import to your database the changes provided in</p><pre class="wordwrap"><span class="line">/&lt;ezp5-root&gt;/ezpublish_legacy/update/database/&lt;mysql|postgresql&gt;/5.2/dbupdate-5.1.0-to-5.2.0.sql</span></pre><h3 id="Upgradingfrom5.1to5.2-Step4:Apply5.2configurationchanges">Step 4: Apply 5.2 configuration changes</h3><h5 id="Upgradingfrom5.1to5.2-YAMLfiles">YAML files</h5><p>Since default configuration files have been overwritten during step one, the few additions to those files that were made in 5.2 need to be applied manually to the configuration files. All of those changes are <strong>additions</strong>, none of them replaces what you already have. For most of them, at least one, if not all hierarchy elements (monolog, handler, framework, router...) will already be there. All you have to do is add the missing bits in the existing configuration blocks.</p><p>In <strong>ezpublish/config/config_dev.yml</strong>, add the configuration for the chromephp log handler:</p><table class="diff-macro"><thead><tr><th class="diff-macro-title"><span class="icon macro-placeholder-icon" style="background-image: url(https://doc.ez.no/s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/_/plugins/servlet/confluence/placeholder/macro-icon?name=code);"> </span>Code Block</th></tr></thead><tbody><tr><td class="diff-macro-body"><pre>monolog:
    handlers:
        chromephp:
            type: chromephp
            level: info</pre></td></tr></tbody></table><pre class="wordwrap copytoclipboard"><span style="font-family: Arial , sans-serif;font-size: 14.0px;line-height: 1.4285715;">In </span><strong style="font-family: Arial , sans-serif;font-size: 14.0px;line-height: 1.4285715;">ezpublish/config/config.yml</strong><span style="font-family: Arial , sans-serif;font-size: 14.0px;line-height: 1.4285715;">, you need to add a few default values for the framework</span></pre><table class="diff-macro"><thead><tr><th class="diff-macro-title"><span class="icon macro-placeholder-icon" style="background-image: url(https://doc.ez.no/s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/_/plugins/servlet/confluence/placeholder/macro-icon?name=code);"> </span>Code Block</th></tr></thead><tbody><tr><td class="diff-macro-body"><pre>framework:
    router:
        resource: "%kernel.root_dir%/config/routing.yml"
        strict_requirements: %kernel.debug%
    trusted_proxies: ~    
    http_method_override: true
 
twig:    
    debug: %kernel.debug%
    strict_variables: %kernel.debug%</pre></td></tr></tbody></table><p>In <strong style="font-size: 14.0px;line-height: 1.4285715;">routing_dev.yml</strong>, add the resource import for the SensioDistributionBundle webconfigurator routes:</p><table class="diff-macro"><thead><tr><th class="diff-macro-title"><span class="icon macro-placeholder-icon" style="background-image: url(https://doc.ez.no/s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/_/plugins/servlet/confluence/placeholder/macro-icon?name=code);"> </span>Code Block</th></tr></thead><tbody><tr><td class="diff-macro-body"><pre>_configurator:
    resource: "@SensioDistributionBundle/Resources/config/routing/webconfigurator.xml"
    prefix: /_configurator</pre></td></tr></tbody></table><pre class="wordwrap"><span style="font-family: Arial , sans-serif;font-size: 14.0px;line-height: 1.4285715;">In </span><strong style="font-family: Arial , sans-serif;font-size: 14.0px;line-height: 1.4285715;">ezpublish/config/security.yml</strong><span style="font-family: Arial , sans-serif;font-size: 14.0px;line-height: 1.4285715;">, add the following:</span></pre><table class="diff-macro"><thead><tr><th class="diff-macro-title"><span class="icon macro-placeholder-icon" style="background-image: url(https://doc.ez.no/s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/_/plugins/servlet/confluence/placeholder/macro-icon?name=code);"> </span>Code Block</th></tr></thead><tbody><tr><td class="diff-macro-body"><pre>access_control:    
    - { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY, requires_channel: https }</pre></td></tr></tbody></table><p class="wordwrap"><span style="font-family: Arial , sans-serif;font-size: 14.0px;line-height: 1.4285715;">If you have added anything to <code>parameters.yml</code>, we suggest that you add your custom settings to <code>parameters.yml.dist</code>, so that the composer post-update script handles those, and generates their values correctly.</span></p><h5 id="Upgradingfrom5.1to5.2-ezpublish/EzPublishKernel.php">ezpublish/EzPublishKernel.php</h5><p>It is not possible to just copy your old <code>EzPublishKernel.php</code> file over from the previous installation, since quite a few changes were made to this file in this release. We suggest that you simply reflect in the new kernel file any changes you made in the previous version.</p><h5 id="Upgradingfrom5.1to5.2-composer.json">composer.json</h5><p>If you had modified composer.json to add your own requirements, you must re-apply those changes to the new version, and run composer install.</p><h3 id="Upgradingfrom5.1to5.2-Step5:Updateclusterdata(ifapplicable)">Step 5: Update cluster data (if applicable)</h3><p>If your installation uses the DFS cluster, you are affected by the <a href="https://github.com/ezsystems/ezpublish-legacy/blob/master/doc/features/5.2/dfs_split_tables.md" class="external-link" rel="nofollow">split DFS tables feature</a> that was added in 5.2. You can also check the <a href="https://doc.ez.no/doc_hidden/eZ-Publish/Technical-manual/5.x/Features/Clustering/Setting-it-up-for-an-eZDFSFileHandler" rel="nofollow">DFS setup documentation</a> document on steps 3 and 4 for additional details and usage examples about the newly introduced configurations.</p><p>To use the feature, you need to update your DFS database structure. It won't affect existing data, and doesn't require particular measures. Import the following file into your<em>cluster</em> database (it should be different from your eZ Publish database):</p><pre class="wordwrap"><span class="line">/&lt;ezp5-root&gt;/ezpublish_legacy/update/database/mysql/5.2/dbupdate-cluster-5.1.0-to-5.2.0.sql</span></pre><p>The split table feature stores cache and storage into two different tables. For now, your ezdfsfile table contains both cache and storage. Starting from now, eZ Publish will use the newly created table, ezdfsfile_cache, to store cache. Since the table  is empty, it will react as if there was no cache, and work without any changes.</p><p>However, we recommend that you remove entries related to cache from your ezdfsfile table. There are several options.</p><h6 id="Upgradingfrom5.1to5.2-Option1:unclusterize,cleardata,andreclusterize">Option 1: unclusterize, clear data, and reclusterize</h6><p><em>This method requires that you shutdown the website completely</em> for a little while. It mainly applies to small/medium websites (up to a couple thousand content objects).</p><table class="diff-macro"><thead><tr><th class="diff-macro-title"><span class="icon macro-placeholder-icon" style="background-image: url(https://doc.ez.no/s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/_/images/icons/macrobrowser/dropdown/warning.png);"> </span>Warning</th></tr></thead><tbody><tr><td class="diff-macro-properties"><table><tbody><tr><th>title</th><td>May require a lot of disk space</td></tr></tbody></table></td></tr></tbody><tbody><tr><td class="diff-macro-body"><p>Since this method will create a local copy of every storage file (not including cache) from your NFS to the local server, this method may require a large amount of disk space. You can get an estimate of the required space by running the following query on your cluster database:</p><table class="diff-macro"><thead><tr><th class="diff-macro-title"><span class="icon macro-placeholder-icon" style="background-image: url(https://doc.ez.no/s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/_/plugins/servlet/confluence/placeholder/macro-icon?name=code);"> </span>Code Block</th></tr></thead><tbody><tr><td class="diff-macro-properties"><table><tbody><tr><th>language</th><td>sql</td></tr></tbody></table></td></tr></tbody><tbody><tr><td class="diff-macro-body"><pre>SELECT SUM(size) from ezdfsfile WHERE name LIKE 'var/ezdemo\_site/storage/%';</pre></td></tr></tbody></table><p>It will give you the total size of storage items, in bytes. Remember to escape _ in your vardir.</p></td></tr></tbody></table><p>Use the following commands from your <em>/&lt;ezp5-root&gt;/ezpublish_legacy/</em> folder:</p><table class="diff-macro"><thead><tr><th class="diff-macro-title"><span class="icon macro-placeholder-icon" style="background-image: url(https://doc.ez.no/s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/_/plugins/servlet/confluence/placeholder/macro-icon?name=code);"> </span>Code Block</th></tr></thead><tbody><tr><td class="diff-macro-body"><pre>cd ezpublish_legacy
bin/php/clusterize.php -u</pre></td></tr></tbody></table><p class="wordwrap"><span style="font-family: Arial , sans-serif;font-size: 14.0px;line-height: 1.4285715;">Next, truncate the ezdfsfile table from your database:</span></p><table class="diff-macro"><thead><tr><th class="diff-macro-title"><span class="icon macro-placeholder-icon" style="background-image: url(https://doc.ez.no/s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/_/plugins/servlet/confluence/placeholder/macro-icon?name=code);"> </span>Code Block</th></tr></thead><tbody><tr><td class="diff-macro-body"><pre>TRUNCATE TABLE ezdfsfile</pre></td></tr></tbody></table><p>And finally, re-create cluster data based on local data:</p><table class="diff-macro"><thead><tr><th class="diff-macro-title"><span class="icon macro-placeholder-icon" style="background-image: url(https://doc.ez.no/s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/_/plugins/servlet/confluence/placeholder/macro-icon?name=code);"> </span>Code Block</th></tr></thead><tbody><tr><td class="diff-macro-body"><pre>cd ezpublish_legacy
bin/php/clusterize.php</pre></td></tr></tbody></table><h6 id="Upgradingfrom5.1to5.2-Option2:performabackgroundcleanupofthestoragetable">Option 2: perform a background cleanup of the storage table</h6><p>An upgrade script is provided that will let you cleanup  the ezdfsfile table on a live website, even with a large cluster. It will delete a configurable (by default 1000) batch of cache rows from ezdfsfile, and sleep (by default for 100 ms) between batches. Run the following from the legacy root:</p><table class="diff-macro"><thead><tr><th class="diff-macro-title"><span class="icon macro-placeholder-icon" style="background-image: url(https://doc.ez.no/s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/_/plugins/servlet/confluence/placeholder/macro-icon?name=code);"> </span>Code Block</th></tr></thead><tbody><tr><td class="diff-macro-body"><pre>cd ezpublish_legacy
php update/common/scripts/5.2/cleanupdfscache.php -h</pre></td></tr></tbody></table><p class="wordwrap"><span style="font-family: Arial , sans-serif;font-size: 14.0px;line-height: 1.4285715;">The script can be interrupted and restarted anytime without risks for the system. We strongly suggest, if you execute it on a live website, that you monitor your database server's performances, and increase the sleep delay and/or decrease the limit if the SQL server's load is too high.</span></p><h3 id="Upgradingfrom5.1to5.2-Step6:Regeneratetheautoloadarrayforextensions">Step 6: Regenerate the autoload array for extensions</h3><p>To regenerate the autoload array, execute the following script from the root of your eZ Publish Legacy directory:</p><table class="diff-macro"><thead><tr><th class="diff-macro-title"><span class="icon macro-placeholder-icon" style="background-image: url(https://doc.ez.no/s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/_/plugins/servlet/confluence/placeholder/macro-icon?name=code);"> </span>Code Block</th></tr></thead><tbody><tr><td class="diff-macro-body"><pre>cd ezpublish_legacy
php bin/php/ezpgenerateautoloads.php --extension</pre></td></tr></tbody></table><h3 id="Upgradingfrom5.1to5.2-Step7:Linkassets">Step 7: Link assets</h3><p>Assets from the various bundles need to be made available for the webserver through the web/ document root.</p><p>The following commands will first symlink eZ Publish 5 assets in "Bundles" and the second will symlink assets (design files like images, scripts and css, and files in var folder)  from eZ Publish Legacy:</p><table class="diff-macro"><thead><tr><th class="diff-macro-title"><span class="icon macro-placeholder-icon" style="background-image: url(https://doc.ez.no/s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/_/plugins/servlet/confluence/placeholder/macro-icon?name=code);"> </span>Code Block</th></tr></thead><tbody><tr><td class="diff-macro-body"><pre>php ezpublish/console assets:install --symlink
php ezpublish/console ezpublish:legacy:assets_install --symlink
php ezpublish/console assetic:dump --env=prod</pre></td></tr></tbody></table><h3 id="Upgradingfrom5.1to5.2-Step8:Updaterewriterules">Step 8: Update rewrite rules</h3><p>There are two ways eZ Publish 5 can be installed, either the full install with both the new Symfony stack and the legacy stack, or legacy only. In latter case you only need to point your '4.7 like' rewrite rules to <em>/&lt;ezp5-root&gt;/ezpublish_legacy/</em> and that's it. Otherwise, update your virtual host according to <a href="https://confluence.ez.no/display/EZP/Virtual+host+setup" class="external-link" rel="nofollow">the eZ Publish 5.2 rewrite rules on confluence</a> and point your host configuration to <em>/&lt;ezp5-root&gt;/web/</em>.</p><h3 id="Upgradingfrom5.1to5.2-Step9:Clearthecaches">Step 9: Clear the caches</h3><p>Whenever an eZ Publish solution is upgraded, all caches must be cleared in a proper way. This should be done from within a system shell:<br />Navigate into the new eZ Publish directory.Run the script using the following shell command:cd /&lt;ezp5-root&gt;/ezpublish_legacy/php bin/php/ezcache.php --clear-all --purgePurging ensures that the caches are physically removed. When the "--purge" parameter is not specified, the caches will be expired but not removed.<br />Note: Sometimes the script is unable to clear all cache files because of restrictive file/directory permission settings. Make sure that all cache files have been cleared by inspecting the contents of the various cache sub-directories within the "var" directory (typically the "var/cache/" and "var/&lt;name_of_siteaccess&gt;/cache/" directories). If there are any cache files left, you need to remove them manually.</p><h3 id="Upgradingfrom5.1to5.2-Step10:UpgradeExtensions(sitepackage)">Step 10: Upgrade Extensions (site package)</h3><p>Next, depending on if you originally installed eZ Flow, eZ Webin or eZ Demo site, follow the steps mentioned in the <a href="https://doc.ez.no/doc_hidden/Extensions/eZ-Publish-extensions/Website-Interface/Website-interface-5.2-upgrade" rel="nofollow">eZ Webin</a>, <a href="https://doc.ez.no/doc_hidden/Extensions/eZ-Publish-extensions/eZ-Flow/Upgrading-eZ-Flow/eZ-Flow-5.2-upgrade" rel="nofollow">eZ Flow</a> or <a href="https://doc.ez.no/doc_hidden/Extensions/eZ-Publish-extensions/eZ-Demo/eZ-Demo-5.2-upgrade" rel="nofollow">eZ Demo</a> upgrade documentation.</p>
</div>
    
    

            
</div>


    




    
    

    
    
    







</div>
  
        <div id="theme-footer">
            <div class="sectionColumnWrapper"><div class="sectionMacro">
<div class="sectionMacroRow"><div class="columnMacro"></div>
<div class="columnMacro">
<div class="panel" style="background-color: #ecf0f1;border-style: solid;border-width: 1px;"><div class="panelContent" style="background-color: #ecf0f1;">
<p>Where Content Means Business</p>
</div></div></div>
<div class="columnMacro"></div></div></div></div>
        </div>
    
    </div>
</div>


        
            <div id="footer">

    <section class="footer-body">

                                                <p class="license license-opensource">
                  Powered by a free <b>Atlassian Confluence Open Source Project License</b> granted to eZ Publish. <a href="http://www.atlassian.com/c/conf/11461">Evaluate Confluence today</a>.<br>
                </p>
                        
    

    <ul id="poweredby">
        <li class="noprint">Powered by <a href="http://www.atlassian.com/software/confluence" class="hover-footer-link">Atlassian Confluence</a> <span id='footer-build-information'>5.4.4</span>, <a href="http://www.atlassian.com/software/confluence/overview/team-collaboration-software?utm_source=confluence-footer" class="hover-footer-link">Team Collaboration Software</a></li>
        <li class="print-only">Printed by Atlassian Confluence 5.4.4, Team Collaboration Software.</li>
        <li class="noprint"><a href="http://jira.atlassian.com/secure/BrowseProject.jspa?id=10470" class="hover-footer-link">Report a bug</a></li>
        <li class="noprint"><a href="http://www.atlassian.com/about/connected.jsp?s_kwcid=Confluence-stayintouch" class="hover-footer-link">Atlassian News</a></li>
    </ul>

    

            <script>
AJS.toInit(function(){
 if(AJS.params.spaceKey &&
    AJS.params.spaceKey === 'MAIN' ||
    AJS.params.spaceKey === 'EZMA' ||
    AJS.params.spaceKey === 'ODC' ||
    AJS.params.spaceKey === 'EZP50' ||
    AJS.params.spaceKey === 'EZP51' ||
    AJS.params.spaceKey === 'EZP52' ||
    AJS.params.spaceKey === 'EZPCLOUD' ||
    AJS.params.spaceKey === 'EZP' ||
    AJS.params.spaceKey === 'EZRECO'
){

(function()
{var isSecure=('https:'==document.location.protocol);var ff=document.createElement('script');ff.type='text/javascript';ff.async=true;ff.src=(isSecure?'https':'http')+'://'+(isSecure?'secure.':'lb.')+'liveviewer.ez.no/statjs/sst-120-1304513615/stat.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(ff,s);}
)();

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-303624-13', 'ez.no');
  ga('send', 'pageview');
}}
);
</script>
    
    </section>

</div>

            
    </div>
</body>

<!-- Mirrored from doc.ez.no/pages/diffpagesbyversion.action?pageId=7439125&selectedPageVersions=22&selectedPageVersions=23 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 21 Oct 2014 09:39:58 GMT -->
</html>
