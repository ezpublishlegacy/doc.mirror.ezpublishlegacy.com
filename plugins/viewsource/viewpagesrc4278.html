                    
    
                    
    
                    
    
<!DOCTYPE html>
<html>
    
<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=26675665 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 09:52:28 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
        <title>View Source</title>
        <link rel="canonical" href="../../pages/viewpage4278.html?pageId=26675665" />
        <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager.resource-base-url-pattern"]="\"(?:(?:/s/.*?/_)?/download)\"";
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"\"";
WRM._unparsedData["com.atlassian.plugins.browser.metrics.browser-metrics-plugin:browser-metrics.feature-data-provider-legacy"]="true";
</script>
<link type="text/css" rel="stylesheet" href="../../s/1b9968ac17721e3a6947d14e3a43c3f8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch9c16.css?build-number=5983" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/f3685658010e413141854089096800b5/_/download/contextbatch/css/plugin.viewsource/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/df762e50bc83a9608020a1ff1476cda6-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/5714bd5a5c86641cad10106916cda7c8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css" media="all">
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/51/_/styles/colorsb538.css?spaceKey=EZP" media="all">
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/51/_/styles/customb538.css?spaceKey=EZP" media="all">

    </head>

    <body class="mceContentBody aui-theme-default wiki-content fullsize">
        <p>&nbsp;</p>         <h2>Intro</h2><p><strong>Criteria</strong> are the <em>filters</em> for Content and Location Search in &quot;Platform stack&quot;, for generic use of API Search see <a class="confluence-link" href="../../display/EZP/Search%2bCriteria%2band%2bSort%2bClauses.html" data-linked-resource-id="19891641" data-linked-resource-version="49" data-linked-resource-type="page" data-linked-resource-default-alias="Search Criteria and Sort Clauses" data-base-url="https://doc.ez.no">Search Criteria and Sort Clauses</a></p><p>Criteria, the plural form for Criterion, consists of two parts just like <a class="confluence-link" href="../../display/EZP/Sort%2bClauses%2breference.html" data-linked-resource-id="26676002" data-linked-resource-version="4" data-linked-resource-type="page" data-linked-resource-default-alias="Sort Clauses reference" data-base-url="https://doc.ez.no">SortClause</a> and FacetBuilder:</p><ul style="list-style-type: square;"><li><span style="font-family: monospace;">The API Value: <span><em>Criterion</em> </span></span></li><li><code><span>Specific handler per </span>SearchEngine: <em>Criterion Handler</em></code></li></ul><p>The <code>Criterion</code> represents the value you use in the API, while <code>CriterionHandler</code> deals with the business logic in the background translating the value to something the Search engine can understand.</p><table class="wysiwyg-macro" data-macro-name="info" data-macro-id="11dae1b3-a78e-4f8f-8e02-cbb83d7ad8e0" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingd35c.png?definition=e2luZm99&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p><em>Implementation and availability of a handler typically depends on SearchEngine capabilities/limitations, currently only Legacy <em>(SQL) </em>Search Engine exists, and for instance its support for FullText and Field Criterion is not optimal and it is advised to avoid heavy use of these until future search engine arrives.</em></p></td></tr></table><h2>Common concepts for most Criteria</h2><p>For how to use each and every Criterion see list below as it depends on the Criterion Value constructor, but in <em>general</em> you should be aware of the following common concepts:</p><ul><li><code>target</code>: Exposed if the given Criterion supports targeting a specific sub field, example: FieldDefinition or Meta Data identifier</li><li><code>value</code>: The value(s) to <em>filter</em> on, this is typically a  <code>scalar</code> or <code>array</code> of<code> scalars.</code></li><li><code>operator</code>: Exposed on some Criteria<ul><li>All operators can be seen as constants on <code><span><span>eZ\Publish\API\Repository\Values\Content\Query\Criterion\</span></span></code><span><code>Operator,</code> at time of writing: </span><code><code>IN, EQ, GT, GTE, LT, LTE</code>, LIKE,</code><span> </span><code><code>BETWEEN,</code></code><code><code>CONTAINS</code></code></li><li>Most Criteria does not expose this and selects <code>EQ </code><strong>or </strong><code>IN</code> depending on if value is <code>scalar </code><strong>or </strong><code>array</code></li><li><code>IN</code> &amp; <code><span>BETWEEN </span></code><span>always acts on a <code>array</code> of values, while the other operators acts on single <code>scalar</code> value</span></li></ul></li><li><span><code>valueData</code> : <span class="pl-s1"><span class="pl-c">Additional value data, required by some criterions, MapLocationDistance for instance</span></span></span></li></ul><p> </p><table class="wysiwyg-macro" data-macro-name="note" data-macro-id="4230e70f-9702-467d-9778-0636b76a6a4a" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingdd57.png?definition=e25vdGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>In the Legacy search engine, the field index/sort key column is limited to 255 characters by design.<br />Due to this storage limitation, searching content using the eZ Country fieldtype when there are multiple countries selected may not return all the expected results.</p></td></tr></table><p> </p><p><span><span class="pl-s1"><span class="pl-c"><br /></span></span></span></p><h2>List of Criteria</h2><p>The list below reflects Criteria available in eZ\Publish\API\Repository\Values\Content\Query\Criterion namespace (it is also possible <a class="confluence-link" href="../../display/EZP/Search%2bCriteria%2band%2bSort%2bClauses.html" data-linked-resource-id="19891641" data-linked-resource-version="49" data-linked-resource-type="page" data-linked-resource-default-alias="Search Criteria and Sort Clauses" data-base-url="../../index.html">to make custom criterion</a>):</p><h3>Only for LocationSearch</h3><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Criterion</th><th class="confluenceTh">Constructor arguments description</th></tr><tr><td colspan="1" class="confluenceTd"><code>Location\Depth </code><img class="editor-inline-macro" height="18" width="88" src="../servlet/status-macro/placeholder91ff.png?title=%3E%3D+5.3%2F2014.03&amp;colour=Yellow" data-macro-name="status" data-macro-id="c7e31983-8792-4a8d-9464-8a36069fabb2" data-macro-parameters="colour=Yellow|title=>\= 5.3/2014.03" data-macro-schema-version="1"></td><td colspan="1" class="confluenceTd"><code>operator</code> (<code>IN, EQ, GT, GTE, LT, LTE, </code><code>BETWEEN</code>), <code>value</code> being the location depth(s) as an integer(s).</td></tr><tr><td colspan="1" class="confluenceTd"><code>Location\IsMainLocation </code><img class="editor-inline-macro" height="18" width="88" src="../servlet/status-macro/placeholder91ff.png?title=%3E%3D+5.3%2F2014.03&amp;colour=Yellow" data-macro-name="status" data-macro-id="65d69031-beb4-4f1a-a0e1-12c8356008dc" data-macro-parameters="colour=Yellow|title=>\= 5.3/2014.03" data-macro-schema-version="1"></td><td colspan="1" class="confluenceTd"><code>Whether or not the value meaning if the location is a Main Location <br />value</code> <code>(</code><code>Location\IsMainLocation</code><span><code>::MAIN, Location\</code></span>IsMainLocation::NOT_MAIN).</td></tr><tr><td colspan="1" class="confluenceTd"><code>Location\Priority </code><img class="editor-inline-macro" height="18" width="88" src="../servlet/status-macro/placeholder91ff.png?title=%3E%3D+5.3%2F2014.03&amp;colour=Yellow" data-macro-name="status" data-macro-id="7a683aec-ef91-4b08-bed9-b0352f7d699d" data-macro-parameters="colour=Yellow|title=>\= 5.3/2014.03" data-macro-schema-version="1"></td><td colspan="1" class="confluenceTd"><code>Priorities are integers that can be used for sorting in ascending or descending order. What is higher or lower priority in relation to the priority number is left to the user choice.<br />operator</code> (<code>GT, GTE, LT, LTE, </code><code>BETWEEN</code>), <code>value</code> being the location priority(s) as an integer(s).</td></tr></tbody></table><h3>Only for ContentSearch</h3><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Criterion</th><th class="confluenceTh">Constructor arguments description</th></tr><tr><td colspan="1" class="confluenceTd"><code>Depth </code><img class="editor-inline-macro" height="18" width="88" src="../servlet/status-macro/placeholderc625.png?title=deprecated+in+5.3%2F2014.03&amp;colour=Red" data-macro-name="status" data-macro-id="765670a7-9484-4067-84bd-3a6772c9e8fc" data-macro-parameters="colour=Red|title=deprecated in 5.3/2014.03" data-macro-schema-version="1"></td><td colspan="1" class="confluenceTd">Use LocationSearch with <code>Location\Depth</code>, since <code>Depth</code> can give unpredictable results <span>when content has</span> several locations.</td></tr><tr><td colspan="1" class="confluenceTd"><code>LocationPriority </code><img class="editor-inline-macro" height="18" width="88" src="../servlet/status-macro/placeholderc625.png?title=deprecated+in+5.3%2F2014.03&amp;colour=Red" data-macro-name="status" data-macro-id="ffde933e-e5f3-4694-9850-2efee93c5934" data-macro-parameters="colour=Red|title=deprecated in 5.3/2014.03" data-macro-schema-version="1"></td><td colspan="1" class="confluenceTd"><span>Use LocationSearch with </span><code>Location\Priority</code>, since <span><code><span>LocationPriority</span></code> can give unpredictable results when content has several locations.</span></td></tr></tbody></table><h3>Common</h3><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Criterion</th><th class="confluenceTh">Constructor arguments description</th></tr><tr><td colspan="1" class="confluenceTd"><code>ContentId</code></td><td colspan="1" class="confluenceTd"><span><code>value being</code> scalar(s) representing the Content id.</span></td></tr><tr><td colspan="1" class="confluenceTd"><code>ContentTypeGroupId</code></td><td colspan="1" class="confluenceTd"><code>value being</code><span> scalar(s) representing the ContentTypeGroup id.</span></td></tr><tr><td colspan="1" class="confluenceTd"><code>ContentTypeId</code></td><td colspan="1" class="confluenceTd"><code>value being</code><span> scalar(s) representing the ContentType id.</span></td></tr><tr><td colspan="1" class="confluenceTd"><code><span>ContentTypeIdentifier </span></code><img class="editor-inline-macro" height="18" width="88" src="../servlet/status-macro/placeholder3141.png?title=%3E%3D+5.1%2F2013.01&amp;colour=Yellow" data-macro-name="status" data-macro-id="45b2b5d9-4fee-4a64-b106-1ee53bba851f" data-macro-parameters="colour=Yellow|title=>\= 5.1/2013.01" data-macro-schema-version="1"></td><td colspan="1" class="confluenceTd"><code>value being</code><span> string(s) representing the ContentType identifier, example: &quot;article&quot;.</span></td></tr><tr><td colspan="1" class="confluenceTd"><code>DateMetadata</code></td><td colspan="1" class="confluenceTd"><span><code>target (</code><code>DateMetadata</code></span><span><code>::MODIFIED</code> <code>, DateMetadata</code></span><code>::CREATED), <code>operator</code> (<code>IN, EQ, GT, GTE, LT, LTE</code>,</code><span> </span><code><code>BETWEEN</code>),</code> <code><code>value</code></code> being <span>integer</span>(s) representing unix timestamp.</td></tr><tr><td colspan="1" class="confluenceTd"><code>Field</code></td><td colspan="1" class="confluenceTd"><p><span style="line-height: 1.4285715;"><code>target</code> <code>(</code>FieldDefinition identifier</span><code style="line-height: 1.4285715;">), <code>operator</code></code><span style="line-height: 1.4285715;"> (</span><code style="line-height: 1.4285715;"><code>IN, EQ, GT, GTE, LT, LTE</code>, LIKE,</code><span style="line-height: 1.4285715;"> </span><code style="line-height: 1.4285715;"><code>BETWEEN, CONTAINS</code>),</code><span style="line-height: 1.4285715;"> </span><code style="line-height: 1.4285715;"><code>value</code></code><span style="line-height: 1.4285715;"> being</span><span style="line-height: 1.4285715;"> scalar(s) relevant for the field.</span></p></td></tr><tr><td colspan="1" class="confluenceTd"><code>FieldRelation </code><img class="editor-inline-macro" height="18" width="88" src="../servlet/status-macro/placeholder5b29.png?title=%3E%3D+5.3%2F2014.05&amp;colour=Yellow" data-macro-name="status" data-macro-id="32306083-78c5-4145-8a6f-42a3a8306a5a" data-macro-parameters="colour=Yellow|title=>\= 5.3/2014.05" data-macro-schema-version="1"></td><td colspan="1" class="confluenceTd"><span><code>target</code> <code>(</code>FieldDefinition identifier</span><code>), <code>operator</code></code><span> (</span><code><code>IN</code></code><code><code>, CONTAINS</code>),</code><span> </span><code><code>value</code></code><span> being</span><span> array of scalars representing Content id of relation.<br /><em>Use of <code>IN</code> means relation needs to have one of the provided ID's, while <code>CONTAINS</code> implies it needs to have all provide id's.</em></span></td></tr><tr><td colspan="1" class="confluenceTd"><code>FullText</code></td><td colspan="1" class="confluenceTd"><p><code>value</code> being the string to search for, <code>properties</code> is array to set additional properties for use with future search engines like Solr/ElasticSearch.</p></td></tr><tr><td colspan="1" class="confluenceTd"><code>LanguageCode</code></td><td colspan="1" class="confluenceTd"><code>value</code> being string(s) representing Language Code(s) on the Content (<em>not</em> on <a href="https://jira.ez.no/browse/EZP-23524">Fields</a>), <code>matchAlwaysAvailable</code> <img class="editor-inline-macro" height="18" width="88" src="../servlet/status-macro/placeholder9649.png?title=%3E%3D+5.2%2F2013.11&amp;colour=Yellow" data-macro-name="status" data-macro-id="d635637c-f421-4c3a-81d0-3f58f965f452" data-macro-parameters="colour=Yellow|title=>\= 5.2/2013.11" data-macro-schema-version="1"> as boolean.</td></tr><tr><td colspan="1" class="confluenceTd"><code>LocationId</code></td><td colspan="1" class="confluenceTd"><code>value being</code><span> scalar(s) representing the Location id.</span></td></tr><tr><td colspan="1" class="confluenceTd"><code>LocationRemoteId</code></td><td colspan="1" class="confluenceTd"><code>value being</code><span> string(s) representing the Location Remote id.</span></td></tr><tr><td colspan="1" class="confluenceTd"><code>LogicalAnd</code></td><td colspan="1" class="confluenceTd">A <span style="line-height: 1.4285715;"><code>LogicalOperator</code> that takes <code>array</code> of other Criteria, makes sure all Criteria matches.</span></td></tr><tr><td colspan="1" class="confluenceTd"><code>LogicalNot</code></td><td colspan="1" class="confluenceTd"><span>A </span><span><code>LogicalOperator</code> that takes <code>array</code> of other Criteria, makes sure none of the Criteria matches.</span></td></tr><tr><td colspan="1" class="confluenceTd"><code>LogicalOr</code></td><td colspan="1" class="confluenceTd"><span>A </span><span><code>LogicalOperator</code> that takes <code>array</code> of other Criteria, makes sure one of the Criteria matches.</span></td></tr><tr><td colspan="1" class="confluenceTd"><code>MapLocationDistance </code><img class="editor-inline-macro" height="18" width="88" src="../servlet/status-macro/placeholder91ff.png?title=%3E%3D+5.3%2F2014.03&amp;colour=Yellow" data-macro-name="status" data-macro-id="d5e99b2d-98e9-4e99-8d55-52e2225def7f" data-macro-parameters="colour=Yellow|title=>\= 5.3/2014.03" data-macro-schema-version="1"></td><td colspan="1" class="confluenceTd"><span><code>target</code> <code>(</code>FieldDefinition identifier</span><code>), <code>operator</code></code><span> (</span><code><code>IN, EQ, GT, GTE, LT, LTE</code>, </code><code><code>BETWEEN</code>),</code><code> <code>distance</code></code><span> as</span><span> float(s)<code> from a position using</code><code> <code>latitude</code></code><span> as</span><span> float</span><code>,</code> <code><code>longitude</code></code><span> as</span><span> float as arguments<br /></span></span></td></tr><tr><td colspan="1" class="confluenceTd"><code>MatchAll</code></td><td colspan="1" class="confluenceTd"><em>No arguments, mainly for internal use when no <code>filter</code> or <code>query</code> is provided on <code>Query</code> object.</em></td></tr><tr><td colspan="1" class="confluenceTd"><code>MatchNone</code></td><td colspan="1" class="confluenceTd"><em><em>No arguments, m</em>ainly for internal use by <a class="confluence-link" href="../../display/EZP/BlockingLimitation.html" data-linked-resource-id="23528187" data-linked-resource-version="1" data-linked-resource-type="page" data-linked-resource-default-alias="BlockingLimitation" data-base-url="../../index.html">BlockingLimitation</a>.</em></td></tr><tr><td colspan="1" class="confluenceTd"><code>MoreLikeThis</code></td><td colspan="1" class="confluenceTd"><img class="editor-inline-macro" height="18" width="88" src="../servlet/status-macro/placeholderc9df.png?title=not+implemented&amp;colour=Red" data-macro-name="status" data-macro-id="8f3192ca-1bf9-488a-b95f-f6686f3503f7" data-macro-parameters="colour=Red|title=not implemented" data-macro-schema-version="1"></td></tr><tr><td colspan="1" class="confluenceTd"><code>ObjectStateId</code></td><td colspan="1" class="confluenceTd"><code>value being</code><span> string(s) representing the Content ObjectState id.</span></td></tr><tr><td colspan="1" class="confluenceTd"><code>ParentLocationId</code></td><td colspan="1" class="confluenceTd"><p><span>value being scalar(s) representing the Parent's Location id</span></p></td></tr><tr><td colspan="1" class="confluenceTd"><code>RemoteId</code></td><td colspan="1" class="confluenceTd"><code>value being</code><span> string(s) representing the Content Remote id.</span></td></tr><tr><td colspan="1" class="confluenceTd"><code>SectionId</code></td><td colspan="1" class="confluenceTd"><code>value being</code><span> scalar(s) representing the Content Section id.</span></td></tr><tr><td colspan="1" class="confluenceTd"><code>Subtree</code></td><td colspan="1" class="confluenceTd"><code>value being</code><span> string(s) representing the Location id in which you can filter. <em>If the Location Id is  /1/2/20/42, you will filter everything under 42.</em><br /></span></td></tr><tr><td colspan="1" class="confluenceTd"><code>UserMetadata</code></td><td colspan="1" class="confluenceTd"><span><code>target (<span>UserMetadata</span></code></span><span><code>::OWNER</code> <code>, <span>UserMetadata</span></code></span><code>::GROUP<span><code>, UserMetadata</code></span><code>::MODIFIER</code>), <code>operator</code> (<code>IN, EQ</code></code><code>),</code><code> <code>value</code></code><span> being </span><span>scalars</span><span>(s) representing the User or UserGroup id(s).</span></td></tr><tr><td colspan="1" class="confluenceTd"><code>Visibility</code></td><td colspan="1" class="confluenceTd"><span><code>value (<span>Visibility</span></code></span><span><code>::VISIBLE</code> <code>, <span>Visibility</span></code></span><code>::HIDDEN),</code><em> Note: This acts on all assigned locations when used with ContentSearch, meaning hidden content will be returned if it has a location which is visible. Use LocationSearch to avoid this.</em></td></tr></tbody></table>
        <p>&nbsp;</p>
    </body>

<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=26675665 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 09:52:28 GMT -->
</html>
