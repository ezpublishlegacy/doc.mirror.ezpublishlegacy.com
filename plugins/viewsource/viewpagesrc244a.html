                    
    
                    
    
                    
    
<!DOCTYPE html>
<html>
    
<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=31425654 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 10:01:14 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
        <title>View Source</title>
        <link rel="canonical" href="../../pages/viewpage244a.html?pageId=31425654" />
        <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager.resource-base-url-pattern"]="\"(?:(?:/s/.*?/_)?/download)\"";
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"\"";
WRM._unparsedData["com.atlassian.plugins.browser.metrics.browser-metrics-plugin:browser-metrics.feature-data-provider-legacy"]="true";
</script>
<link type="text/css" rel="stylesheet" href="../../s/1b9968ac17721e3a6947d14e3a43c3f8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch9c16.css?build-number=5983" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/f3685658010e413141854089096800b5/_/download/contextbatch/css/plugin.viewsource/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/df762e50bc83a9608020a1ff1476cda6-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/5714bd5a5c86641cad10106916cda7c8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css" media="all">
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/8/_/styles/colors82a8.css?spaceKey=TECHDOC" media="all">
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/8/_/styles/custom82a8.css?spaceKey=TECHDOC" media="all">

    </head>

    <body class="mceContentBody aui-theme-default wiki-content fullsize">
        <p>&nbsp;</p>         <p>The first sub-release of <a class="confluence-link" href="../../display/TECHDOC/eZ%2bPlatform%2b15.html" data-linked-resource-id="30712024" data-linked-resource-version="9" data-linked-resource-type="page" data-linked-resource-default-alias="eZ Platform 15.12 Release notes" data-base-url="https://doc.ez.no">eZ Platform 15.12</a> is now available for update.</p><table class="wysiwyg-macro" data-macro-name="note" data-macro-id="c9fef391-9264-457d-a86d-bc90f5199046" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingdd57.png?definition=e25vdGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>For the release notes of the corresponding eZ Studio sub-release, see <a class="confluence-link" href="../../display/TECHDOC/eZ%2bStudio%2b15.12.html" data-linked-resource-id="31425861" data-linked-resource-version="20" data-linked-resource-type="page" data-linked-resource-default-alias="eZ Studio 15.12.1 Release notes" data-base-url="../../index.html">eZ Studio 15.12.1 Release Notes</a>.</p></td></tr></table><h2>Changes since 15.12</h2><table class="wysiwyg-macro" data-macro-name="warning" data-macro-id="f4ff05f9-8c47-498b-8d8b-af798ca8045f" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingca13.png?definition=e3dhcm5pbmd9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>As already deprecated on <a class="confluence-link" href="../../display/TECHDOC/Requirements.html" data-linked-resource-id="30711832" data-linked-resource-version="16" data-linked-resource-type="page" data-linked-resource-default-alias="Requirements" data-base-url="../../index.html">requirements page</a>, this release <strong>does not support PHP 5.4</strong> any longer.</p></td></tr></table><p>For list of issues fixed in 15.12.1 see<img class="editor-inline-macro" src="../servlet/image-generator8d8b.png?totalIssues=13" data-macro-name="jira" data-macro-id="b730724c-5e4e-4a0a-bff6-fe8399b94c3a" data-macro-parameters="count=true|jqlQuery=fixVersion in (&quot;2015.12.1&quot;) AND project \= EZP AND issuetype in (Story, Improvement, Bug) order by issuetype     |server=eZ Systems JIRA tracker|serverId=841cf523-cc54-30bc-bc5d-89e63192498a" data-macro-schema-version="1">, below is a list of notable bugs/features/enhancements done in the release. </p><h3>Distribution</h3><ul><li>Improved Install doc and Apache/Nginx doc, added script to generate vhost for automation needs.</li><li>PHP Internal web server &quot;works&quot;, further fixes in 16.02 to make it tested and supported for dev use.</li><li>Installers don't write to config anymore, only folders mentioned in directory permissions are written to.</li><li>Info on where to find <a href="https://github.com/ezsystems/ezplatform-demo">demo install</a> of eZ Platform added.</li><li><span style="line-height: 1.42857;">Several improvements done on </span><a href="../../index.html" style="line-height: 1.42857;">doc.ez.no</a><span style="line-height: 1.42857;"> and specifically </span><a href="../../display/TECHDOC/eZ%2bTechnical%2bManual.html" style="line-height: 1.42857;">doc.ez.no/display/TECHDOC</a>.</li></ul><h3>Kernel</h3><ul><li>[API] Fix publishing to only update modified time, leaving published time to be time of first publish like in legacy</li><li>[Twig] New <a class="confluence-link" href="../../display/TECHDOC/ez_field.html" data-linked-resource-id="31424913" data-linked-resource-version="3" data-linked-resource-type="page" data-linked-resource-default-alias="ez_field" data-base-url="../../index.html">ez_field</a> function, unlike <a class="confluence-link" href="../../display/TECHDOC/ez_field_value.html" data-linked-resource-id="30711460" data-linked-resource-version="3" data-linked-resource-type="page" data-linked-resource-default-alias="ez_field_value" data-base-url="../../index.html">ez_field_value</a> returns whole Field</li><li><img class="editor-inline-macro" src="../servlet/confluence/placeholder/macro90f1.png?definition=e2ppcmE6a2V5PUVaUC0yNDQ2N30=&amp;locale=en_GB" data-macro-name="jira" data-macro-id="ba4991e4-dcbf-4887-9673-9b6733f8a773" data-macro-parameters="key=EZP-24467|server=eZ Systems JIRA tracker|serverId=841cf523-cc54-30bc-bc5d-89e63192498a" data-macro-schema-version="1"></li><li><img class="editor-inline-macro" src="../servlet/confluence/placeholder/macroba6e.png?definition=e2ppcmE6a2V5PUVaUC0yNTM2Nn0=&amp;locale=en_GB" data-macro-name="jira" data-macro-id="88b51d01-303a-41ce-98f5-db9902351563" data-macro-parameters="key=EZP-25366|server=eZ Systems JIRA tracker|serverId=841cf523-cc54-30bc-bc5d-89e63192498a" data-macro-schema-version="1"></li></ul><h3>UI</h3><ul><li>Improvements to policy &amp; limitation handling, more coming in 16.02</li><li>Display language names instead of language code</li><li>API doc js-rest-client: <a href="http://ezsystems.github.io/javascript-rest-client/">http://ezsystems.github.io/javascript-rest-client/</a></li><li>API doc Platform UI: <a href="http://ezsystems.github.io/platformui-javascript-api/">http://ezsystems.github.io/platformui-javascript-api/</a></li><li>Tutorials for extending UI: <a href="../../display/TECHDOC/Extending%2bTutorials.html">https://doc.ez.no/display/TECHDOC/Extending+Tutorials</a></li></ul><h3>New projects in work for future releases</h3><ul><li><a href="https://github.com/ezsystems/docker-php">https://github.com/ezsystems/docker-php</a></li><li><a href="https://github.com/ezsystems/ezplatform-demo" style="line-height: 1.42857;">https://github.com/ezsystems/ezplatform-demo</a></li></ul><h3>Contributors</h3><p>Several of the mentioned changes above where done by contributors for this release, notable contributions merged from among others:</p><ul><li>@rihards</li><li>@iherak</li><li>@crevillo</li><li>@wizhippo</li><li>@blankse</li><li>@jeromegamez</li><li>@emodric</li><li><span style="line-height: 1.42857;">@GromNaN</span></li></ul><h2>Upgrading a 15.12 project</h2><table class="wysiwyg-macro" data-macro-name="info" data-macro-id="1f993a95-10f4-49d9-b2e4-5f58ef13a32d" data-macro-parameters="title=New proposed upgrade process" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading7577.png?definition=e2luZm86dGl0bGU9TmV3IHByb3Bvc2VkIHVwZ3JhZGUgcHJvY2Vzc30&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>This section reflects a proposed git based workflow for handling upgrades, feedback on how this works in practice and input on how to further improve/simplify it is welcome.</p></td></tr></table><p>Existing 15.12 (1.0) projects can also easily be updated using Composer. From the project's root, create a new branch from the project's master, or from the branch you're upgrading on:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="6101b553-5e22-4dec-b3ea-6a88db2ed64e" data-macro-parameters="language=bash|title=From your master branch" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading7b81.png?definition=e2NvZGU6bGFuZ3VhZ2U9YmFzaHx0aXRsZT1Gcm9tIHlvdXIgbWFzdGVyIGJyYW5jaH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>git checkout -b upgrade-1.1.0</pre></td></tr></table><p>If it's not there, add ezsystems/ezplatform as an upstream remote:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="d54b7fb8-0b8b-48d5-92ac-36e8f9fd363d" data-macro-parameters="language=bash|title=From the upgrade-1.1.0 branch" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingbff2.png?definition=e2NvZGU6bGFuZ3VhZ2U9YmFzaHx0aXRsZT1Gcm9tIHRoZSB1cGdyYWRlLTEuMS4wIGJyYW5jaH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>git remote add ezplatform http://github.com/ezsystems/ezplatform.git</pre></td></tr></table><p>Then pull the tag into your branch:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="c68e2480-032a-4e96-be04-ab3031ca0ec7" data-macro-parameters="language=bash|title=From the upgrade-1.1.0 branch" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingbff2.png?definition=e2NvZGU6bGFuZ3VhZ2U9YmFzaHx0aXRsZT1Gcm9tIHRoZSB1cGdyYWRlLTEuMS4wIGJyYW5jaH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>git pull ezplatform v1.1.0</pre></td></tr></table><p>You will get conflicts, and it is perfectly normal. The most common ones will be on <code style="line-height: 1.42857;">composer.json</code> and <code style="line-height: 1.42857;">composer.lock</code>.</p><table class="wysiwyg-macro" data-macro-name="note" data-macro-id="a98142c8-110a-45e4-bd50-a342ac53c9ad" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingdd57.png?definition=e25vdGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>If you get a <strong>lot</strong> of conflicts (on the <code>doc</code> folder for instance), and eZ Platform was installed from the <a href="http://share.ez.no/">share.ez.no</a> tarball, it might be because of incomplete history. You will have to run <code>git fetch ezplatform --unshallow</code> to load the full history, and run the merge again.</p></td></tr></table><p>The latter can be ignored, as it will be regenerated when we execute composer update later. The easiest is to checkout the version from the tag, and add it to the changes:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="bd5f7800-d1a3-4cd2-8c40-601ce1342038" data-macro-parameters="language=bash|title=From the upgrade-1.1.0 branch" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingbff2.png?definition=e2NvZGU6bGFuZ3VhZ2U9YmFzaHx0aXRsZT1Gcm9tIHRoZSB1cGdyYWRlLTEuMS4wIGJyYW5jaH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>git checkout --theirs composer.lock &amp;&amp; git add composer.lock</pre></td></tr></table><p>You may also run <code>git remove composer.lock</code> if you do not keep a copy of it in the branch.</p><h4>Merging composer.json</h4><h5>Manual merging</h5><p>Conflicts in <code>composer.json</code> need to be fixed manually. If you're not familiar with the diff output, you may checkout the tag's version, and inspect the changes. It should be readable for most:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="fdad6601-b755-47e3-a08a-b25de6a06790" data-macro-parameters="language=bash|title=From the upgrade-1.1.0 branch" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingbff2.png?definition=e2NvZGU6bGFuZ3VhZ2U9YmFzaHx0aXRsZT1Gcm9tIHRoZSB1cGdyYWRlLTEuMS4wIGJyYW5jaH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>git checkout --theirs composer.json &amp;&amp; git diff composer.json</pre></td></tr></table><p>You should see what was changed, as compared to your own version, in the diff output. The 1.1.0-rc1 tag changes the requirements for all of the <code>ezsystems/</code> packages. Those should be left untouched. All of the other changes should be removals of your project's additions. You can use <code>git checkout -p</code> to selectively cancel those changes:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="91385cea-1705-429b-880c-09d80206db44" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>git checkout -p composer.json</pre></td></tr></table><p>Answer <code>no</code> (do not discard) to the requirement changes of <code>ezsystems</code> dependencies, and <code>yes</code> (discard) to removals of your changes.</p><h5>Using composer require</h5><p>You may also checkout your own <code>composer.json</code>, and run the following commands to update the <code>ezsystems</code> packages requirements from v1.0.x to v1.1.0:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="9952b770-0d80-47b7-aa5c-e4205df8c334" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>git checkout --ours composer.json
composer require --no-update "ezsystems/ezpublish-kernel:~6.1.0"
composer require --no-update "ezsystems/platform-ui-bundle:~1.1.0"
composer require --dev --no-update "ezsystems/behatbundle:~6.1.0"

# PHP requirement is now 5.5+, and 7.0 is now supported for dev use (see top of this page for requirements link)
composer require --no-update "php:~5.5|~7.0"

# As there are some bugs with Symfony 2.8, make sure to pull in Symfony 2.7 LTS updates
composer require --no-update "symfony/symfony:~2.7.0" 
 
# This command will remove platform.php: "5.4.4" as php 5.4 is no longer supported
composer config --unset platform.php</pre></td></tr></table><h4>Fixing other conflicts (if any)</h4><p>Depending on the local changes you have done, you may get other conflicts: configuration files, kernel... </p><p>There shouldn't be many, and you should be able to figure out which value is the right one for all of them:</p><ul style="list-style-type: square;"><li>Edit the file, and identify the conflicting changes. If a setting you have modified has also been changed by us, you should be able to figure out which value is the right one.</li><li>Run <code>git add conflicting-file</code> to add the changes</li></ul><h4>Updating composer.lock</h4><p>At this point, you should have a composer.json file with the correct requirements. Run <code>composer update</code> to update the dependencies. </p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="f0b7e998-fc67-41ea-a004-a51133040432" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>composer update --with-dependencies ezsystems/ezpublish-kernel ezsystems/platform-ui-bundle ezsystems/behatbundle</pre></td></tr></table><table class="wysiwyg-macro" data-macro-name="info" data-macro-id="8ffc1b37-de31-4ecc-94e7-d06782c4f558" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingd35c.png?definition=e2luZm99&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>In order to restrict the possibility of unforeseen updates of 3rd party packages, we recommend by default that <code>composer update</code> is restricted to the list of packages we have tested the update for. You may remove this restriction, but be aware that you might get a package combination we have not tested.</p></td></tr></table><table class="wysiwyg-macro" data-macro-name="info" data-macro-id="dbb670ca-b4a0-4e4b-916f-860ff2aa7639" data-macro-parameters="title=On PHP conflict" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading989f.png?definition=e2luZm86dGl0bGU9T24gUEhQIGNvbmZsaWN0fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>Because from this release onwards eZ Platform is compatible only with PHP 5.5 and higher, the update command above will fail if you use an older PHP version. Please update PHP to proceed.</p></td></tr></table><h4>Commit, test and merge</h4><p>Once all the conflicts have been resolved, and <code>composer.lock</code> updated, the merge can be committed. Note that you may or may not keep <code>composer.lock</code>, depending on your version management workflow. If you do not wish to keep it, run <code>git reset HEAD &lt;file&gt;</code> to remove it from the changes. Run <code style="line-height: 1.42857;">git commit</code>, and adapt the message if necessary. You can now test the project, run integration tests... once the upgrade has been approved, go back to <code style="line-height: 1.42857;">master</code>, and merge the <code style="line-height: 1.42857;">upgrade-1.1.0</code> branch:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="88c403ae-2c75-4ef0-bfbe-3467956cb733" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>git checkout master
git merge upgrade-1.1.0</pre></td></tr></table>
        <p>&nbsp;</p>
    </body>

<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=31425654 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 10:01:16 GMT -->
</html>
