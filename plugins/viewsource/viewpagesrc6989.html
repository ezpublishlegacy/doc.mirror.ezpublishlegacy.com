                    
    
                    
    
                    
    
<!DOCTYPE html>
<html>
    
<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=30711221 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 09:51:14 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
        <title>View Source</title>
        <link rel="canonical" href="../../pages/viewpage6989.html?pageId=30711221" />
        <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager.resource-base-url-pattern"]="\"(?:(?:/s/.*?/_)?/download)\"";
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"\"";
WRM._unparsedData["com.atlassian.plugins.browser.metrics.browser-metrics-plugin:browser-metrics.feature-data-provider-legacy"]="true";
</script>
<link type="text/css" rel="stylesheet" href="../../s/1b9968ac17721e3a6947d14e3a43c3f8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch9c16.css?build-number=5983" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/f3685658010e413141854089096800b5/_/download/contextbatch/css/plugin.viewsource/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/df762e50bc83a9608020a1ff1476cda6-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/5714bd5a5c86641cad10106916cda7c8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css" media="all">
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/8/_/styles/colors82a8.css?spaceKey=TECHDOC" media="all">
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/8/_/styles/custom82a8.css?spaceKey=TECHDOC" media="all">

    </head>

    <body class="mceContentBody aui-theme-default wiki-content fullsize">
        <p>&nbsp;</p>         <p>eZ Platform comes with a Twig helper as a <a href="http://symfony.com/doc/master/cookbook/templating/global_variables.html">global variable</a> named <strong><code>ezpublish</code></strong>.</p><p>This helper is accessible from all Twig templates and allows you to easily retrieve useful information.</p><h2>Reference</h2><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Property</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><code>ezpublish.siteaccess</code></td><td class="confluenceTd"><p>Returns the current siteaccess.</p></td></tr><tr><td colspan="1" class="confluenceTd"><code><span>ezpublish.rootLocation</span></code></td><td colspan="1" class="confluenceTd">Returns the root Location object</td></tr><tr><td colspan="1" class="confluenceTd"><code>ezpublish.requestedUriString</code></td><td colspan="1" class="confluenceTd">Returns the requested URI string (also known as semanticPathInfo).</td></tr><tr><td colspan="1" class="confluenceTd"><code>ezpublish.systemUriString</code></td><td colspan="1" class="confluenceTd">Returns the &quot;system&quot; URI string. System URI is the URI for internal content controller. If current route is not an URLAlias, then the current Pathinfo is returned.</td></tr><tr><td colspan="1" class="confluenceTd"><code>ezpublish.viewParameters</code></td><td colspan="1" class="confluenceTd">Returns the view parameters as a hash.</td></tr><tr><td colspan="1" class="confluenceTd"><code>ezpublish.viewParametersString</code></td><td colspan="1" class="confluenceTd">Returns the view parameters as a string.</td></tr><tr><td colspan="1" class="confluenceTd"><code>ezpublish.legacy</code></td><td colspan="1" class="confluenceTd">Returns legacy information.</td></tr></tbody></table><p> </p><h2>Legacy</h2><table class="wysiwyg-macro" data-macro-name="note" data-macro-id="ab933b51-bf33-4758-9675-b34c6de92ee2" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingdd57.png?definition=e25vdGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p><code>ezpublish.legacy</code> is only available <strong>when viewing content in legacy fallback</strong> (e.g. no corresponding Twig templates)</p></td></tr></table><p> </p><p>The <code>ezpublish.legacy</code> property returns an object of type <a href="http://api.symfony.com/2.0/Symfony/Component/HttpFoundation/ParameterBag.html">ParameterBag</a>, which is a container for key/value pairs, and contains additional properties to retrieve/handle legacy information.</p><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Property</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><code><span>ezpublish.legacy.all</span></code></td><td class="confluenceTd">Returns all the parameters, with all the contained information.</td></tr><tr><td class="confluenceTd"><code><span>ezpublish.legacy.keys</span></code></td><td class="confluenceTd">Returns the parameter keys only.</td></tr><tr><td class="confluenceTd"><code><span>ezpublish.legacy.get</span></code></td><td class="confluenceTd">Returns a parameter by name.</td></tr><tr><td class="confluenceTd"><code><span>ezpublish.legacy.has</span></code></td><td class="confluenceTd">Returns true if the parameter is defined.</td></tr></tbody></table><p> </p><h3>Listing the available parameters</h3><p>You can list the available parameters in <code>ezpublish.legacy</code> by using the <code>ezpublish.legacy.keys</code> property, as shown in the following example:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="05b30f37-0fa4-49df-9782-b832897d7b12" data-macro-parameters="title=Example on retrieving the available parameters under ezpublish.legacy" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading383f.png?definition=e2NvZGU6dGl0bGU9RXhhbXBsZSBvbiByZXRyaWV2aW5nIHRoZSBhdmFpbGFibGUgcGFyYW1ldGVycyB1bmRlciBlenB1Ymxpc2gubGVnYWN5fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>{{ dump(ezpublish.legacy.keys()) }}</pre></td></tr></table><p>which will give a result similar to:</p><table class="wysiwyg-macro" data-macro-name="noformat" data-macro-id="129aaea8-963e-4cfa-bdcc-bd6e71a6410c" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading8813.png?definition=e25vZm9ybWF0fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>array
  0 => string 'view_parameters' (length=15)
  1 => string 'path' (length=4)
  2 => string 'title_path' (length=10)
  3 => string 'section_id' (length=10)
  4 => string 'node_id' (length=7)
  5 => string 'navigation_part' (length=15)
  6 => string 'content_info' (length=12)
  7 => string 'template_list' (length=13)
  8 => string 'cache_ttl' (length=9)
  9 => string 'is_default_navigation_part' (length=26)
  10 => string 'css_files' (length=9)
  11 => string 'js_files' (length=8)
  12 => string 'css_files_configured' (length=20)
  13 => string 'js_files_configured' (length=19)</pre></td></tr></table><h3>Retrieving legacy information</h3><p>Legacy information is accessible by using the <code>ezpublish.legacy.get</code> property, which will allow you to access all data contained in <a href="../../eZ-Publish/Technical-manual/4.x/Templates/The-pagelayout/Variables-in-pagelayout.html#module_result">$module_result</a>, from the legacy kernel.</p><p>This allows you to import information directly into twig templates. For more details please check the available examples on using the <code>ezpublish.legacy.get</code> property for retrieving <a href="https://confluence.ez.no/display/EZP/Legacy+template+fallback#Legacytemplatefallback-Persistentvariable">persistent variables</a> and <a href="https://confluence.ez.no/display/EZP/Legacy+template+fallback#Legacytemplatefallback-Assets">assets</a>.</p><p> </p><p>As a usage example, if you want to access the legacy information related to 'content_info' you can do it, as shown in the following example:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="fe623b48-c1d0-4405-bb77-1c543893b78e" data-macro-parameters="title=Example on accessing 'content_info' under ezpublish.legacy" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading0f03.png?definition=e2NvZGU6dGl0bGU9RXhhbXBsZSBvbiBhY2Nlc3NpbmcgJ2NvbnRlbnRfaW5mbycgdW5kZXIgZXpwdWJsaXNoLmxlZ2FjeX0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>{{ ezpublish.legacy.get('content_info') }}</pre></td></tr></table><p>The previous call will return the contents on the 'content_info' as an <code>array</code>, and if we <code>dump</code> it the result will be similar to the following:</p><table class="wysiwyg-macro" data-macro-name="noformat" data-macro-id="3babb258-33a9-4b51-93e6-5ce4aaf794d1" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading8813.png?definition=e25vZm9ybWF0fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>array
  'object_id' => string '57' (length=2)
  'node_id' => string '2' (length=1)
  'parent_node_id' => string '1' (length=1)
  'class_id' => string '23' (length=2)
  'class_identifier' => string 'landing_page' (length=12)
  'remote_id' => string '8a9c9c761004866fb458d89910f52bee' (length=32)
  'node_remote_id' => string 'f3e90596361e31d496d4026eb624c983' (length=32)
  'offset' => boolean false
  'viewmode' => string 'full' (length=4)
  'navigation_part_identifier' => string 'ezcontentnavigationpart' (length=23)
  'node_depth' => string '1' (length=1)
  'url_alias' => string '' (length=0)
  'current_language' => string 'eng-GB' (length=6)
  'language_mask' => string '3' (length=1)
  'main_node_id' => string '2' (length=1)
  'main_node_url_alias' => boolean false
  'persistent_variable' => 
    array
      'css_files' => 
        array
          0 => string 'video.css' (length=9)
      'js_files' => 
        array
          0 => string 'video.js' (length=8)
  'class_group' => boolean false
  'state' => 
    array
      2 => string '1' (length=1)
  'state_identifier' => 
    array
      0 => string 'ez_lock/not_locked' (length=18)
  'parent_class_id' => string '1' (length=1)
  'parent_class_identifier' => string 'folder' (length=6)
  'parent_node_remote_id' => string '629709ba256fe317c3ddcee35453a96a' (length=32)
  'parent_object_remote_id' => string 'e5c9db64baadb82ab8db54f0e2192ec3' (length=32)</pre></td></tr></table><p>Additionally, for retrieving information contained in 'content_info' such as the current language of the content in the page you can do it like in the following example:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="e0f447e3-9c74-4aed-9ba2-b24d671856ce" data-macro-parameters="title=Example on retrieving 'current_language'" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading3174.png?definition=e2NvZGU6dGl0bGU9RXhhbXBsZSBvbiByZXRyaWV2aW5nICdjdXJyZW50X2xhbmd1YWdlJ30&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>{{ ezpublish.legacy.get('content_info')['current_language'] }}</pre></td></tr></table>
        <p>&nbsp;</p>
    </body>

<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=30711221 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 09:51:15 GMT -->
</html>
