                    
    
                    
    
                    
    
<!DOCTYPE html>
<html>
    
<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=30711188 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 08:35:34 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
        <title>View Source</title>
        <link rel="canonical" href="../../pages/viewpage66a2.html?pageId=30711188" />
        <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager.resource-base-url-pattern"]="\"(?:(?:/s/.*?/_)?/download)\"";
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"\"";
WRM._unparsedData["com.atlassian.plugins.browser.metrics.browser-metrics-plugin:browser-metrics.feature-data-provider-legacy"]="true";
</script>
<link type="text/css" rel="stylesheet" href="../../s/1b9968ac17721e3a6947d14e3a43c3f8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch9c16.css?build-number=5983" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/f3685658010e413141854089096800b5/_/download/contextbatch/css/plugin.viewsource/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/df762e50bc83a9608020a1ff1476cda6-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/5714bd5a5c86641cad10106916cda7c8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css" media="all">
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/8/_/styles/colors82a8.css?spaceKey=TECHDOC" media="all">
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/8/_/styles/custom82a8.css?spaceKey=TECHDOC" media="all">

    </head>

    <body class="mceContentBody aui-theme-default wiki-content fullsize">
        <p>&nbsp;</p>         <p><br /><img class="editor-inline-macro" src="../servlet/confluence/placeholder/macro4170.png?definition=e3RvY30&amp;locale=en_GB&amp;version=2" data-macro-name="toc" data-macro-id="15d187f8-e534-4ac6-af9a-bd8d006e1f7e" data-macro-schema-version="1"></p><h1>Introduction</h1><p><strong>Tech Note</strong></p><p>Current implementation uses a caching library called <a href="http://stash.tedivm.com/">Stash</a> (via <a href="https://github.com/tedivm/TedivmStashBundle">StashBundle</a>). Stash supports the following cache backends: <strong>FileSystem, Memcache</strong>, <strong>APC, Sqlite</strong>, <strong>Redis </strong>and BlackHole.</p><p><em>Use of Memcached (or experimentally using Redis) is a requirement for use in Clustering setup. For an overview of this feature, see <a class="confluence-link" href="../../display/TECHDOC/Clustering.html" data-linked-resource-id="30711376" data-linked-resource-version="6" data-linked-resource-type="page" data-linked-resource-default-alias="Clustering" data-base-url="https://doc.ez.no">Clustering</a>. </em></p><table class="wysiwyg-macro" data-macro-name="info" data-macro-id="18f93891-ff58-4e66-a4e5-3a8fd040f849" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingd35c.png?definition=e2luZm99&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body">When eZ Platform changes to another PSR-6 based cache system in the future, then configuration documented below will change.</td></tr></table><p><strong>Cache service</strong></p><p>The cache system is exposed as a &quot;cache&quot; service, and can be reused by any other service as described on the <a class="confluence-link" href="../../display/TECHDOC/Using%2bCache%2bservice.html" data-linked-resource-id="31425411" data-linked-resource-version="4" data-linked-resource-type="page" data-linked-resource-default-alias="Using Cache service" data-base-url="../../index.html">Using Cache service</a> page.</p><h1>Configuration</h1><p>By default, configuration is currently using<strong> FileSystem</strong>, with<code> %kernel.cache_dir%/stash</code> to store cache files.</p><p>The configuration is placed in <code>app/config/config.yml</code> and looks like this:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="7fe9131c-4b46-462e-9d7f-6d1e4ca20908" data-macro-parameters="title=Default config.yml" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingaa51.png?definition=e2NvZGU6dGl0bGU9RGVmYXVsdCBjb25maWcueW1sfQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>stash:
    caches:
        default:
            drivers:
                - FileSystem
            inMemory: true
            registerDoctrineAdapter: false</pre></td></tr></table><table class="wysiwyg-macro" data-macro-name="note" data-macro-id="9036fe7e-a834-49f6-b95b-670c531b767d" data-macro-parameters="title=Note for &quot;inMemory&quot; cache with long running scripts" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headinged13.png?definition=e25vdGU6dGl0bGU9Tm90ZSBmb3IgImluTWVtb3J5IiBjYWNoZSB3aXRoIGxvbmcgcnVubmluZyBzY3JpcHRzfQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>Use <code>inMemory</code> with caution, and avoid it completely for long running scripts for the following reasons:</p><ul><li>It does not have any limits, so can result in the application running out of PHP memory.</li><li><span>Its cache pool is by design a PHP variable and is not shared across requests/processes/servers, so data becomes stale if any other concurrent activity happens towards the repository.</span></li></ul></td></tr></table><h3>Multi repository setup</h3><p>In <code>ezplatform.yml</code> you can specify which cache pool you want to use on a siteaccess or sitegroup level. The following example shows use in a sitegroup:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="c2c3dad3-bf5a-4b06-a1c4-b67403270d43" data-macro-parameters="title=ezplatform.yml site group setting" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingcf54.png?definition=e2NvZGU6dGl0bGU9ZXpwbGF0Zm9ybS55bWwgc2l0ZSBncm91cCBzZXR0aW5nfQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>ezpublish:
    system:
        # "site_group" refers to the group configured in site access
        site_group:
            # "default" refers to the cache pool, the one configured on stash.caches above
            cache_pool_name: "default"
</pre></td></tr></table><table class="wysiwyg-macro" data-macro-name="note" data-macro-id="14817cc2-ada3-45b5-9b6d-4ebd0db3b577" data-macro-parameters="title=One cache pool for each repository" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading496d.png?definition=e25vdGU6dGl0bGU9T25lIGNhY2hlIHBvb2wgZm9yIGVhY2ggcmVwb3NpdG9yeX0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body">If your installation has several repositories <em>(databases)</em>, make sure every group of sites using different repositories also uses a different cache pool.</td></tr></table><h1>Stash cache backend configuration</h1><h3>General settings</h3><p>To check which cache settings are available for your installation, run the following command in your terminal:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="b0233589-ef6d-4625-90ed-0c08f7ef9194" data-macro-parameters="language=bash" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading174f.png?definition=e2NvZGU6bGFuZ3VhZ2U9YmFzaH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>php app/console config:dump-reference stash</pre></td></tr></table><h3><span>FileSystem</span></h3><p>This cache backend uses the local filesystem, by default the Symfony cache folder. As this is per server, it <strong>does not support multi server (<a class="confluence-link" href="../../display/TECHDOC/Clustering.html" data-linked-resource-id="30711376" data-linked-resource-version="6" data-linked-resource-type="page" data-linked-resource-default-alias="Clustering" data-base-url="../../index.html">cluster</a>) setups</strong>!</p><table class="wysiwyg-macro" data-macro-name="note" data-macro-id="0b933771-9687-41ac-b609-aa8de852c672" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingdd57.png?definition=e25vdGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><strong>We strongly discourage you from storing cache files on NFS</strong>, as it defeats the purpose of the cache: speed.</td></tr></table><h4><strong><span style="color: rgb(51,51,51);font-size: 10.0pt;line-height: 13.0pt;">Available settings</span></strong></h4><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><pre>path</pre></td><td class="confluenceTd">The path where the cache is placed; default is <code>%kernel.cache_dir%/stash</code>, effectively <code>app/cache/&lt;env&gt;/stash</code></td></tr><tr><td colspan="1" class="confluenceTd"><pre>dirSplit</pre></td><td colspan="1" class="confluenceTd">Number of times the cache key should be split up to avoid having too many files in each folder; default is 2.</td></tr><tr><td colspan="1" class="confluenceTd"><pre>filePermissions</pre></td><td colspan="1" class="confluenceTd">The permissions of the cache file; default is 0660.</td></tr><tr><td colspan="1" class="confluenceTd"><pre>dirPermissions</pre></td><td colspan="1" class="confluenceTd">The permission of the cache file directories (see dirSplit); default is 0770.</td></tr><tr><td colspan="1" class="confluenceTd"><pre>memKeyLimit</pre></td><td colspan="1" class="confluenceTd"><p>Limit on how many key to path entries are kept in memory during execution at a time to avoid having to recalculate the path on key lookups; default is 200.</p></td></tr><tr><td colspan="1" class="confluenceTd"><pre>keyHashFunction</pre></td><td colspan="1" class="confluenceTd">Algorithm used for creating paths; default is md5. Use crc32 on Windows to avoid path length issues.<code><code><br /></code></code></td></tr></tbody></table><table class="wysiwyg-macro" data-macro-name="info" data-macro-id="d2c03a34-0b07-4a7e-9125-e97edb20480c" data-macro-parameters="title=Issues with Microsoft Windows" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading5ea9.png?definition=e2luZm86dGl0bGU9SXNzdWVzIHdpdGggTWljcm9zb2Z0IFdpbmRvd3N9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>If you are using a Windows OS, you may encounter an issue regarding<strong> long paths for cache directory name</strong>. The paths are long because Stash uses md5 to generate unique keys that are sanitized really quickly.</p><p>Solution is to <strong>change the hash algorithm</strong> used by Stash.</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="0e1a93a5-4656-4098-bed0-e87c1459641e" data-macro-parameters="title=Specifying key hash function" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading6c20.png?definition=e2NvZGU6dGl0bGU9U3BlY2lmeWluZyBrZXkgaGFzaCBmdW5jdGlvbn0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>stash:
    caches:
        default:
            drivers:
                - FileSystem
            inMemory: true
            registerDoctrineAdapter: false
            FileSystem:
                keyHashFunction: 'crc32'</pre></td></tr></table><p><strong>This configuration is only recommended for Windows users</strong>.<br /><br />Note: You can also define the<strong> path</strong> where you want the cache files to be generated to be able to get even shorter system path for cache files.</p></td></tr></table><p> </p><h4>FileSystem cache backend troubleshooting</h4><p>By default, Stash Filesystem cache backend stores cache to a sub-folder named after the environment (<code>i.e. app/cache/dev</code>, <code>app/cache/prod</code>). This can lead to the following issue: if different environments are used for operations, persistence cache (manipulating content, mostly) will be affected and cache can become inconsistent.</p><p>To prevent this, there are 2 solutions:</p><p> </p><h6><strong>1. <a name="manual" />Manual</strong></h6><p><strong>Always</strong> use the same environment, for web, command line, cronjobs etc.</p><h6><strong>2 . Share stash cache across environments</strong></h6><p>Either by using another Stash cache backend, or by setting Stash to use a shared cache folder that does not depend on the environment.</p><p>In <code>ezplatform.yml</code>:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="5be25e08-86ab-4ce6-a68a-c215efe367b9" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>stash:
    caches:
        default:
            FileSystem:
                path: "%kernel.root_dir%/cache/common"
</pre></td></tr></table><p>This will store stash cache to <code>app/cache/common.</code></p><h3>APC &amp; APCu</h3><p>This cache backend is using shard memory with APC's user cache feature. As this is per server, it <strong>does not support multi server (<a class="confluence-link" href="../../display/TECHDOC/Clustering.html" data-linked-resource-id="30711376" data-linked-resource-version="6" data-linked-resource-type="page" data-linked-resource-default-alias="Clustering" data-base-url="../../index.html">cluster</a>) setups</strong>.</p><table class="wysiwyg-macro" data-macro-name="note" data-macro-id="6b3e8b34-1f62-48d3-a7e1-441298130f87" data-macro-parameters="title=Not supported because of following limitation" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingd5d6.png?definition=e25vdGU6dGl0bGU9Tm90IHN1cHBvcnRlZCBiZWNhdXNlIG9mIGZvbGxvd2luZyBsaW1pdGF0aW9ufQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>As APC(u) user cache is not shared between processes, it is not possible to clear the user cache from CLI, even if you set <span style="color: rgb(0,0,0);"><code>apc.enable_cli</code> to On</span>. That is why publishing content from a command line script won't let you properly clear SPI Persistence cache.</p></td></tr></table><p>Please also note that the default value for <code>apc.shm_size</code> is 128MB. However, 256MB is recommended for APC to work properly. For more details please refer to the <a href="http://www.php.net/manual/en/apc.configuration.php#ini.apc.shm-size">APC configuration manual</a>.</p><p> </p><p><strong>Available settings</strong></p><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><code><strong>ttl</strong></code></td><td class="confluenceTd">The time to live of the cache in seconds; default is 500 (8.3 minutes)</td></tr><tr><td colspan="1" class="confluenceTd"><code><strong>namespace</strong></code></td><td colspan="1" class="confluenceTd">A namespace to prefix cache keys with to avoid key conflicts with other eZ Platform sites on same eZ Platform installation; default is <code>null</code>.</td></tr></tbody></table><h3>Memcache(d)</h3><p>This cache backend is using <a href="http://memcached.org/">Memcached, a distributed caching solution</a>. This is the only supported cache solution for multi server (<a class="confluence-link" href="../../display/TECHDOC/Clustering.html" data-linked-resource-id="30711376" data-linked-resource-version="6" data-linked-resource-type="page" data-linked-resource-default-alias="Clustering" data-base-url="../../index.html">cluster</a>) setups!</p><table class="wysiwyg-macro" data-macro-name="info" data-macro-id="43475de5-72d0-4ae0-974c-4b3bfdfe707e" data-macro-parameters="title=Note" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingb7a0.png?definition=e2luZm86dGl0bGU9Tm90ZX0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>Stash supports both the <a href="http://php.net/memcache">php-memcache</a> and <a href="http://php.net/memcached">php-memcached</a> extensions. <strong>However</strong> only php-memcached is officially supported as php-memcache is missing many features and is less stable.</p></td></tr></table><table class="confluenceTable"><tbody><tr><td colspan="1" class="confluenceTd"><code><strong>servers</strong></code></td><td colspan="1" class="confluenceTd"><p>Array of Memcached servers, with host/IP, port and weight</p><p><code><strong>server</strong></code>: Host or IP of your Memcached server<br /><code><strong>port</strong></code>: Port that Memcached is listening to (defaults to 11211)<br /><code><strong>weight</strong></code>: Weight of the server, when using several Memcached servers</p></td></tr><tr><td colspan="1" class="confluenceTd"><code><strong>prefix_key</strong></code></td><td colspan="1" class="confluenceTd"><span>A namespace to prefix cache keys with to avoid key conflicts with other eZ Platform sites on same eZ Platform installation (default is an empty string). </span><br /><span>Must be the same on all servers with the same installation.<span> </span><a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-prefix-key">See Memcached prefix_key option</a><span> <strong>*</strong><span style="color: rgb(128,128,0);"> </span></span></span></td></tr><tr><td colspan="1" class="confluenceTd"><code><strong>compression</strong></code></td><td colspan="1" class="confluenceTd">default true. <a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-compression">See Memcached compression option</a> <strong>*</strong><span style="color: rgb(128,128,0);"> </span></td></tr><tr><td colspan="1" class="confluenceTd"><code><strong>libketama_compatible</strong></code></td><td colspan="1" class="confluenceTd">default false.<span> </span><a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-libketama-compatible">See Memcached libketama_compatible option</a> <strong>*</strong><span style="color: rgb(128,128,0);"> </span></td></tr><tr><td colspan="1" class="confluenceTd"><code><strong>buffer_writes</strong></code></td><td colspan="1" class="confluenceTd">default false.<span> </span><a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-buffer-writes">See Memcached buffer_writes option</a><span> <strong>*</strong><span style="color: rgb(128,128,0);"> </span></span></td></tr><tr><td colspan="1" class="confluenceTd"><code><strong>binary_protocol</strong></code></td><td colspan="1" class="confluenceTd">default false.<span> </span><a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-binary-protocol">See Memcached binary_protocol option</a><span><strong>*</strong><span style="color: rgb(128,128,0);"> </span></span></td></tr><tr><td colspan="1" class="confluenceTd"><code><strong>no_block</strong></code></td><td colspan="1" class="confluenceTd">default false.<span> </span><a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-no-block">See Memcached no_block option</a><span><strong> *</strong><span style="color: rgb(128,128,0);"> </span></span></td></tr><tr><td colspan="1" class="confluenceTd"><code><strong>tcp_nodelay</strong></code></td><td colspan="1" class="confluenceTd">default false.<span> </span><a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-tcp-nodelay">See Memcached tcp_nodelay option</a><span> <strong>*</strong><span style="color: rgb(128,128,0);"> </span></span></td></tr><tr><td colspan="1" class="confluenceTd"><code><strong>connection_timeout</strong></code></td><td colspan="1" class="confluenceTd">default 1000.<span> </span><a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-connection-timeout">See Memcached connection_timeout option</a><span> <strong>*</strong><span style="color: rgb(128,128,0);"> </span></span></td></tr><tr><td colspan="1" class="confluenceTd"><code><strong>retry_timeout</strong></code></td><td colspan="1" class="confluenceTd">default 0.<span> </span><a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-memcached-timeout">See Memcached retry_timeout option</a><span> <strong>*</strong><span style="color: rgb(128,128,0);"> </span></span></td></tr><tr><td colspan="1" class="confluenceTd"><code><strong>send_timeout</strong></code></td><td colspan="1" class="confluenceTd">default 0.<span> </span><a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-send-timeout">See Memcached send_timeout option</a><span> <strong>*</strong><span style="color: rgb(128,128,0);"> </span></span></td></tr><tr><td colspan="1" class="confluenceTd"><code><strong>recv_timeout</strong></code></td><td colspan="1" class="confluenceTd"><p>default 0.<span> </span><a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-recv-timeout">See Memcached recv_timeout option</a><span> <strong>*</strong><span style="color: rgb(128,128,0);"> </span></span></p></td></tr><tr><td colspan="1" class="confluenceTd"><code><strong>poll_timeout</strong></code></td><td colspan="1" class="confluenceTd">default 1000.<span> </span><a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-poll-timeout">See Memcached poll_timeout option</a><span> <strong>*</strong><span style="color: rgb(128,128,0);"> </span></span></td></tr><tr><td colspan="1" class="confluenceTd"><code><strong>cache_lookups</strong></code></td><td colspan="1" class="confluenceTd">default false.<span> </span><a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-cache-lookups">See Memcached cache_lookups option</a><span> <strong>*</strong><span style="color: rgb(128,128,0);"> </span></span></td></tr><tr><td colspan="1" class="confluenceTd"><strong><code>server_failure_limit</code></strong></td><td colspan="1" class="confluenceTd">default 0.<span> </span><a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-server-failure-limit">See PHP Memcached documentation</a><span> <strong>*</strong><span style="color: rgb(128,128,0);"> </span><br /></span></td></tr><tr><td colspan="1" class="confluenceTd"><strong><span style="color: rgb(34,34,34);"><code>socket_send_size </code><br /></span></strong></td><td colspan="1" class="confluenceTd">See <a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-socket-send-size">Memcached socket_send_size option</a> *</td></tr><tr><td colspan="1" class="confluenceTd"><strong><code>socket_recv_size</code></strong></td><td colspan="1" class="confluenceTd">See <a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-socket-recv-size">Memcached socket_recv_size option</a> *</td></tr><tr><td colspan="1" class="confluenceTd"><strong><code>serializer</code></strong></td><td colspan="1" class="confluenceTd">See <a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-serializer">Memcached serializer option</a> *</td></tr><tr><td colspan="1" class="confluenceTd"><strong><code>hash</code></strong></td><td colspan="1" class="confluenceTd">See <a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-hash">Memcached hash option</a> *</td></tr><tr><td colspan="1" class="confluenceTd"><strong><code>distribution</code></strong></td><td colspan="1" class="confluenceTd"><p>Specifies the method of distributing item keys to the servers. See<a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-distribution"> Memcached distribution option</a> *</p></td></tr></tbody></table><p> </p><p><strong>*</strong> All settings except <code>servers </code>are only available with memcached PHP extension. For more information on these settings and which version of php-memcache<u>d</u> they are available in, see: <a href="http://php.net/Memcached">http://php.net/Memcached</a><span style="color: rgb(128,128,0);"><br /></span></p><p> </p><table class="wysiwyg-macro" data-macro-name="info" data-macro-id="f2de3847-01bd-444d-8fc6-7da6803dad2d" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingd35c.png?definition=e2luZm99&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>When using Memcache cache backend, you <em>may</em> use inMemory to reduce network traffic as long as you are aware of its limitations mentioned above.</p></td></tr></table><h4>Example with Memcache</h4><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="55b98bcf-2c4c-4bc8-990b-9e1aa0d83f3c" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>stash:
    caches:
        default:
            drivers: [ Memcache ]
            inMemory: true
            registerDoctrineAdapter: false
            Memcache:
                prefix_key: ezdemo_
                retry_timeout: 1
                servers:
                    -
                        server: 127.0.0.1
                        port: 11211</pre></td></tr></table><table class="wysiwyg-macro" data-macro-name="warning" data-macro-id="5b984e56-2ba6-4fdf-9bff-721dd96710bc" data-macro-parameters="title=Connection errors issue" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading1450.png?definition=e3dhcm5pbmc6dGl0bGU9Q29ubmVjdGlvbiBlcnJvcnMgaXNzdWV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>If memcached does display connection errors when using the default (ascii) protocol, then switching to binary protocol <em>(in the stash configuration and memcached daemon)</em> should resolve the issue.</p></td></tr></table>
        <p>&nbsp;</p>
    </body>

<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=30711188 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 08:35:36 GMT -->
</html>
