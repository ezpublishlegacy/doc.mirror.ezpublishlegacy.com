                    
    
                    
    
                    
    
<!DOCTYPE html>
<html>
    
<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=12125316 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 13:29:44 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
        <title>View Source</title>
        <link rel="canonical" href="../../pages/viewpageb53d.html?pageId=12125316" />
        <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager.resource-base-url-pattern"]="\"(?:(?:/s/.*?/_)?/download)\"";
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"\"";
WRM._unparsedData["com.atlassian.plugins.browser.metrics.browser-metrics-plugin:browser-metrics.feature-data-provider-legacy"]="true";
</script>
<link type="text/css" rel="stylesheet" href="../../s/1b9968ac17721e3a6947d14e3a43c3f8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch9c16.css?build-number=5983" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/f3685658010e413141854089096800b5/_/download/contextbatch/css/plugin.viewsource/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/df762e50bc83a9608020a1ff1476cda6-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/5714bd5a5c86641cad10106916cda7c8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css" media="all">
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/16/_/styles/colors556c.css?spaceKey=EZP51" media="all">
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/16/_/styles/custom556c.css?spaceKey=EZP51" media="all">

    </head>

    <body class="mceContentBody aui-theme-default wiki-content fullsize">
        <p>&nbsp;</p>         <p><img class="editor-inline-macro" src="../servlet/confluence/placeholder/macro4170.png?definition=e3RvY30&amp;locale=en_GB&amp;version=2" data-macro-name="toc" data-macro-schema-version="1"></p><p>Siteaccess matching is done through <strong>eZ\Publish\MVC\SiteAccess\Matcher</strong> objects. You can configure this matching and even develop custom matchers.</p><h2>Configuration</h2><p>You can configure siteaccess matching in your main <strong>ezpublish/config/ezpublish.yml</strong> :</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-parameters="language=none|title=ezpublish.yml" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading85c7.png?definition=e2NvZGU6bGFuZ3VhZ2U9bm9uZXx0aXRsZT1lenB1Ymxpc2gueW1sfQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>ezpublish:
    siteaccess:
        default_siteaccess: ezdemo_site
        list:
            - ezdemo_site
            - eng
            - fre
            - fr_eng
            - ezdemo_site_admin
        groups:
            ezdemo_site_group:
                - ezdemo_site
                - eng
                - fre
                - fr_eng
                - ezdemo_site_admin
        match:
            Map\URI:
                ezdemo_site: ezdemo_site
                fre: fre
                ezdemo_site_admin: ezdemo_site_admin
</pre></td></tr></table><p> </p><p>You need to set several parameters:</p><ul><li><strong>ezpublish.siteaccess.default_siteaccess</strong></li><li><strong>ezpublish.siteaccess.list</strong></li><li><em>(optional)</em><strong> ezpublish.siteaccess.groups</strong></li><li><strong>ezpublish.siteaccess.match</strong></li></ul><p><strong>ezpublish.siteaccess.default_siteaccess</strong> is the default siteaccess that will be used if matching was not successful. This ensures that a siteaccess is always defined.</p><p><strong>ezpublish.siteaccess.list</strong> is the list of all available siteaccesses in your website.</p><p><em>(optional)</em> <strong>ezpublish.siteaccess.groups</strong> defines which groups siteaccesses are member of. This is useful when you want to mutualize settings between several siteaccesses and avoid config duplication. Siteaccess groups are considered as regular siteaccesses as far as configuration is concerned.</p><table class="wysiwyg-macro" data-macro-name="tip" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading7f8c.png?definition=e3RpcH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>A siteaccess can be part of several groups.</p><p>A siteaccess configuration has always precedence on the group configuration.</p></td></tr></table><p><strong style="font-size: 10.0pt;line-height: 13.0pt;">ezpublish.siteaccess.match</strong><span style="font-size: 10.0pt;line-height: 13.0pt;"> holds the matching configuration. It consists in a hash where the key is the name of the matcher class. If the matcher class doesn't start with a </span><strong style="font-size: 10.0pt;line-height: 13.0pt;">\</strong><span style="font-size: 10.0pt;line-height: 13.0pt;">, it will be considered relative to </span><code style="font-size: 10.0pt;line-height: 13.0pt;">eZ\Publish\MVC\SiteAccess\Matcher</code><span style="font-size: 10.0pt;line-height: 13.0pt;"> (e.g. </span><code style="font-size: 10.0pt;line-height: 13.0pt;">Map\Host</code><span style="font-size: 10.0pt;line-height: 13.0pt;"> will refer to </span><span style="font-size: 10.0pt;line-height: 13.0pt;"><code>eZ\Publish\MVC\SiteAccess\Matcher\Map\Host</code>)</span></p><table class="wysiwyg-macro" data-macro-name="tip" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading7f8c.png?definition=e3RpcH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p><span>Every <strong>custom matcher</strong> can be specified with a <strong>fully qualified class name</strong> (e.g. <code>\My\SiteAccess\Matcher</code>) or by a <strong>service identifier prefixed by @</strong> (e.g. <code>@my_matcher_service</code>).</span></p><ul><li><span>In the case of a fully qualified class name, the matching configuration will be passed in the constructor.</span></li><li><span>In the case of a service, it must implement <code>eZ\Bundle\EzPublishCoreBundle\SiteAccess\Matcher</code>. The matching configuration will be passed to <code>setMatchingConfiguration()</code>.</span></li></ul></td></tr></table><h2>Available matchers</h2><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Name</th><th class="confluenceTh">Description</th><th class="confluenceTh">Configuration</th><th colspan="1" class="confluenceTh">Example</th></tr><tr><td class="confluenceTd"><code>URIElement</code></td><td class="confluenceTd">Maps a URI element to a siteaccess.<br />This is the default matcher used when choosing <br />URI matching in setup wizard. </td><td class="confluenceTd"><p>The element number you want to match (starting from 1).</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>ezpublish:
    siteaccess:
        match:
            URIElement: 1</pre></td></tr></table><p><span style="font-size: 10.0pt;line-height: 13.0pt;"><strong>Important:</strong> When using a value &gt; 1, <br />it will concatenate the elements with _</span></p></td><td colspan="1" class="confluenceTd"><p><strong>URI:</strong> <code>/ezdemo_site/foo/bar</code></p><p><span style="font-size: 10.0pt;line-height: 13.0pt;"><u>Element number</u>: 1</span><br /><span style="font-size: 10.0pt;line-height: 13.0pt;"><u>Matched siteaccess</u>: ezdemo_site</span></p><p><u>Element number</u>: 2<br /><span style="font-size: 10.0pt;line-height: 13.0pt;"><u>Matched siteaccess</u>: ezdemo_site_foo </span></p></td></tr><tr><td colspan="1" class="confluenceTd"><code>URIText</code></td><td colspan="1" class="confluenceTd">Matches URI using <em>pre</em> and/or <em>post</em> sub-strings <br />in the first URI segment</td><td colspan="1" class="confluenceTd"><p>The prefix and/or suffix (none are required)</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>ezpublish:
    siteaccess:
        match:
            URIText:
                prefix: foo
                suffix: bar</pre></td></tr></table></td><td colspan="1" class="confluenceTd"><p><strong>URI:</strong> <code>/footestbar/my/content</code></p><p><u>Prefix</u>: foo<br /><u>Suffix</u>: bar<br /><u>Matched siteaccess</u>: test </p></td></tr><tr><td colspan="1" class="confluenceTd"><code>HostElement</code></td><td colspan="1" class="confluenceTd">Maps an element in the host name to a siteaccess.</td><td colspan="1" class="confluenceTd"><p>The element number you want to match (starting from 1).</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>ezpublish:
    siteaccess:
        match:
            HostElement: 2</pre></td></tr></table></td><td colspan="1" class="confluenceTd"><p><strong>Host name:</strong> <code>www.example.com</code></p><p><u>Element number</u>: 2<br /><u>Matched siteaccess</u>: example </p></td></tr><tr><td colspan="1" class="confluenceTd"><code>HostText</code></td><td colspan="1" class="confluenceTd">Matches a siteaccess in the host name, <br />using <em>pre</em> and/or <em>post</em> sub-strings.</td><td colspan="1" class="confluenceTd"><p>The prefix and/or suffix (none are required)</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>ezpublish:
    siteaccess:
        match:
            HostText:
                prefix: www.
                suffix: .com</pre></td></tr></table></td><td colspan="1" class="confluenceTd"><p><strong>Host name</strong>: <code>www.foo.com</code></p><p><u>Prefix</u>: www.<br /><u>Suffix</u>: .com<br /><u>Matched siteaccess</u>: foo </p></td></tr><tr><td colspan="1" class="confluenceTd"><code>Map\Host</code></td><td colspan="1" class="confluenceTd">Maps a host name to a siteaccess.</td><td colspan="1" class="confluenceTd"><p>A hash map of host/siteaccess</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>ezpublish:
    siteaccess:
        match:
            Map\Host:
                www.foo.com: foo_front
                adm.foo.com: foo_admin
                www.stuff.fr: bar_front
                adm.stuff.fr: bar_admin</pre></td></tr></table></td><td colspan="1" class="confluenceTd"><strong>Map</strong>:<ul><li>www.foo.com =&gt; foo_front</li><li>admin.foo.com =&gt; foo_admin </li></ul><p><strong>Host name</strong>: www.example.com</p><p><u>Matched siteaccess</u>: foo_front</p></td></tr><tr><td colspan="1" class="confluenceTd"><code>Map\URI</code></td><td colspan="1" class="confluenceTd">Maps a URI to a siteaccess</td><td colspan="1" class="confluenceTd"><p>A hash map of URI/siteaccess</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>ezpublish:
    siteaccess:
        match:
            Map\URI:
                something: ezdemo_site
                foobar: ezdemo_site_admin</pre></td></tr></table></td><td colspan="1" class="confluenceTd"><p><strong>URI:</strong> <code>/something/my/content</code></p><p><u>Map</u>:</p><ul><li>something =&gt; ezdemo_site</li><li>foobar =&gt; ezdemo_site_admin</li></ul><p><u>Matched siteaccess</u>: ezdemo_site</p></td></tr><tr><td colspan="1" class="confluenceTd"><code>Map\Port</code></td><td colspan="1" class="confluenceTd">Maps a port to a siteaccess</td><td colspan="1" class="confluenceTd"><p>A has map of Port/siteaccess</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>ezpublish:
    siteaccess:
        match:
            Match\Port:
                80: foo
                8080: bar</pre></td></tr></table></td><td colspan="1" class="confluenceTd"><p><strong>URL:</strong> <code><span class="nolink">http://ezpublish.dev:8080/my/content</span></code></p><p><u>Map</u>:</p><ul><li>80: foo</li><li>8080: bar</li></ul><p><u>Matched siteaccess</u>: bar</p></td></tr><tr><td colspan="1" class="confluenceTd"><code>Regex\Host</code></td><td colspan="1" class="confluenceTd">Matches against a regexp and extract a portion of it</td><td colspan="1" class="confluenceTd"><p>The regexp to match against <br />and the captured element to use</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>ezpublish:
    siteaccess:
        match:
            Regex\Host:
                regex: "^(\\w+_sa)$"
                # Default is 1
                itemNumber: 1</pre></td></tr></table></td><td colspan="1" class="confluenceTd"><p><strong>Host name:</strong> <code>example_sa</code></p><p><u>regex</u>: <code>^(\\w+)_sa$</code><br /><u>itemNumber</u>: 1</p><p><u>Matched siteaccess</u>: example</p></td></tr><tr><td colspan="1" class="confluenceTd"><code>Regex\URI</code></td><td colspan="1" class="confluenceTd">Matches against a regexp and extract a portion of it</td><td colspan="1" class="confluenceTd"><p><span>The regexp to match against <br />and the captured element to use</span></p><table class="wysiwyg-macro" data-macro-name="code" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>ezpublish:
    siteaccess:
        match:
            Regex\URI:
                regex: "^/foo(\\w+)bar"
                # Default is 1
                itemNumber: 1</pre></td></tr></table><p><span><br /></span></p></td><td colspan="1" class="confluenceTd"><p><strong>URI:</strong> <code>/footestbar/something</code></p><p><u>regex</u>: ^/foo(\\w+)bar<br /><u>itemNumber</u>: 1</p><p><u>Matched siteaccess</u>: test </p></td></tr></tbody></table><p> </p><h2>Compound siteaccess matcher</h2><p>The Compound siteaccess matcher allows to combine several matchers together, which is performed using the legacy <strong><em>host_uri</em></strong>.</p><p>For that, the following matchers can be used in your siteaccess match:</p><ul><li><code>Compound\LogicalAnd</code></li><li><code>Compound\LogicalOr</code><br /><br /></li></ul><table class="wysiwyg-macro" data-macro-name="code" data-macro-parameters="language=none|title=ezpublish.yml" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading85c7.png?definition=e2NvZGU6bGFuZ3VhZ2U9bm9uZXx0aXRsZT1lenB1Ymxpc2gueW1sfQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>ezpublish:
    siteaccess:
        default_siteaccess: ezdemo_site
        list:
            - ezdemo_site
            - eng
            - fre
            - fr_eng
            - ezdemo_site_admin
        groups:
            ezdemo_site_group:
                - ezdemo_site
                - eng
                - fre
                - fr_eng
                - ezdemo_site_admin
        match:
            Map\URI:
                ezdemo_site: ezdemo_site
                fre: fre
                ezdemo_site_admin: ezdemo_site_admin
            # The following mimics host_uri for 2 different configuration.
            Compound\LogicalAnd:
                my_compound_rule_1:
                    # Nested matchers, with their configuration.
                    # No need to precise their matching values (true will suffice).
                    matchers:
                        Map\URI:
                            the_front: true
                        Map\Host:
                            ezpublish.dev: true
                    # The siteaccess to match in the end
                    match: ezdemo_site 
                my_compound_rule_2:
                    matchers:
                        Map\URI:
                            the_admin: true
                        Map\Host:
                            ezpublish.dev: true
                    match: ezdemo_site_admin
            # Matching hosts as host: siteaccess
            Map\Host:
                ezpublish.dev: ezdemo_site
                admin.ezpublish.dev: ezdemo_site_admin</pre></td></tr></table><h2>Matching by request header</h2><p>It is possible to define which siteaccess to use by setting a <strong>X-Siteaccess</strong> header in your request. This can be useful for REST requests.</p><p>In such case, <strong>X-Siteaccess</strong> must be the <strong>siteaccess name</strong> (e.g. <em>ezdemo_site</em>).</p><h2>Matching by environment variable</h2><p>It is also possible to define which siteaccess to use directly via an <strong>EZPUBLISH_SITEACCESS</strong> environment variable.</p><p>This is recommended if you want to get <strong>performance gain</strong> since no matching logic is done in this case.</p><p>You can define this environment variable directly from your web server configuration:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-parameters="language=none|title=Apache VirtualHost example" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading3ae0.png?definition=e2NvZGU6bGFuZ3VhZ2U9bm9uZXx0aXRsZT1BcGFjaGUgVmlydHVhbEhvc3QgZXhhbXBsZX0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre># This configuration assumes that mod_env is activated
&lt;VirtualHost *:80>
    DocumentRoot "/path/to/ezpublish5/web/folder"
    ServerName example.com
    ServerAlias www.example.com
    SetEnv EZPUBLISH_SITEACCESS ezdemo_site
&lt;/VirtualHost></pre></td></tr></table><table class="wysiwyg-macro" data-macro-name="tip" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading7f8c.png?definition=e3RpcH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p><span>This can also be done via PHP-FPM configuration file, if you use it. See </span><a href="http://php.net/manual/en/install.fpm.configuration.php#example-60">PHP-FPM documentation</a><span> for more information.</span></p></td></tr></table><table class="wysiwyg-macro" data-macro-name="info" data-macro-parameters="title=Note about precedence" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingb2aa.png?definition=e2luZm86dGl0bGU9Tm90ZSBhYm91dCBwcmVjZWRlbmNlfQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p> The precedence order for siteaccess matching is the following (the first matched wins):</p><ol><li>Request header</li><li>Environment variable</li><li>Configured matchers</li></ol></td></tr></table><p> </p><h2>URILexer and semanticPathinfo</h2><p>In some cases, after matching a siteaccess, it is neecessary to modify the original request URI. This is for example needed with URI-based matchers since the siteaccess is contained in the original URI and it is not part of the route itself.</p><p>The problem is addressed by <em>analyzing</em> this URI and by modifying it when needed through the <strong>URILexer</strong> interface.</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-parameters="language=php|title=URILexer interface" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading4aab.png?definition=e2NvZGU6bGFuZ3VhZ2U9cGhwfHRpdGxlPVVSSUxleGVyIGludGVyZmFjZX0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>/**
 * Interface for SiteAccess matchers that need to alter the URI after matching.
 * This is useful when you have the siteaccess in the URI like "/&lt;siteaccessName>/my/awesome/uri"
 */
interface URILexer
{
    /**
     * Analyses $uri and removes the siteaccess part, if needed.
     *
     * @param string $uri The original URI
     * @return string The modified URI
     */
    public function analyseURI( $uri );
    /**
     * Analyses $linkUri when generating a link to a route, in order to have the siteaccess part back in the URI.
     *
     * @param string $linkUri
     * @return string The modified link URI
     */
    public function analyseLink( $linkUri );
}</pre></td></tr></table><p>Once modified, the URI is stored in the <em><strong>semanticPathinfo</strong></em> request attribute, and the original pathinfo is not modified.</p><p> </p>
        <p>&nbsp;</p>
    </body>

<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=12125316 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 13:29:44 GMT -->
</html>
