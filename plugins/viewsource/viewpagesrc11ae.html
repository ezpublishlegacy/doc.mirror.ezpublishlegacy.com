                    
    
                    
    
                    
    
<!DOCTYPE html>
<html>
    
<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=8323629 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 11:10:15 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
        <title>View Source</title>
        <link rel="canonical" href="../../pages/viewpage11ae.html?pageId=8323629" />
        <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager.resource-base-url-pattern"]="\"(?:(?:/s/.*?/_)?/download)\"";
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"\"";
WRM._unparsedData["com.atlassian.plugins.browser.metrics.browser-metrics-plugin:browser-metrics.feature-data-provider-legacy"]="true";
</script>
<link type="text/css" rel="stylesheet" href="../../s/1b9968ac17721e3a6947d14e3a43c3f8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch9c16.css?build-number=5983" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/f3685658010e413141854089096800b5/_/download/contextbatch/css/plugin.viewsource/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/df762e50bc83a9608020a1ff1476cda6-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/5714bd5a5c86641cad10106916cda7c8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css" media="all">
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/3/_/styles/colorscc60.css?spaceKey=EZMA" media="all">

    </head>

    <body class="mceContentBody aui-theme-default wiki-content fullsize">
        <p>&nbsp;</p>         <p>In order to configure eZ Marketing Automation please follow these steps:</p><p><strong>1.</strong> Create new '<em>ezma.ini.append.php</em>' configuration file under <em>settings/override/</em> directory.<br /><br /><strong>2.</strong> Set your Net-Results account credentials for Web Service settings as:<br /><br /></p><table class="wysiwyg-macro" data-macro-name="noformat" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading8813.png?definition=e25vZm9ybWF0fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>[WebServiceSettings]
Username=john.doe@example.com
Password=secret</pre></td></tr></table><p><br /><strong>3.</strong> Token configuration</p><p style="margin-left: 30.0px;"><strong>3.1.</strong> Generate token with a following command line:</p><table class="wysiwyg-macro" data-macro-name="noformat" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading8813.png?definition=e25vZm9ybWF0fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>$ md5 -s 'SOME_TEXT</pre></td></tr></table><p style="margin-left: 60.0px;">Note: Replace SOME_TEXT with the string you want to use.</p><p style="margin-left: 30.0px;"><br /><strong>3.2.</strong> Set a newly generated string for Token setting under [SecuritySettings] block:</p><table class="wysiwyg-macro" data-macro-name="noformat" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading8813.png?definition=e25vZm9ybWF0fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>[SecuritySettings]
Token=f7a5d4ca0b2a6cf667fe3da9fc06edff</pre></td></tr></table><p> </p><p><strong>4.</strong> Mail authoring feature requires preview configuration.</p><p style="margin-left: 30.0px;"><strong>4.1.</strong> Set <em>SiteAccessName</em> on your settings/override/ezma.ini.append.php file, under [PreviewSettings] block:</p><table class="wysiwyg-macro" data-macro-name="noformat" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading8813.png?definition=e25vZm9ybWF0fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>[PreviewSettings]
SiteAccessName=eng</pre></td></tr></table><p style="margin-left: 30.0px;"><br /><strong>4.2.</strong> Copy content of the existing administration interface siteacces folder into a new ezmacontentpicker folder</p><table class="wysiwyg-macro" data-macro-name="noformat" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading8813.png?definition=e25vZm9ybWF0fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>$ cp -rf ezpublish_legacy/settings/siteaccess/(your_site_admin)/ ezpublish_legacy/settings/siteaccess/ezmacontentpicker/</pre></td></tr></table><p style="margin-left: 30.0px;"><strong>4.3.</strong> Set it to use the &quot;ezma&quot; design with the SiteDesign setting, on your ezpublish_legacy/settings/siteaccess/ezmacontentpicker/site.ini.append.php file:<br /><br /></p><table class="wysiwyg-macro" data-macro-name="noformat" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading8813.png?definition=e25vZm9ybWF0fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>[DesignSettings]
SiteDesign=ezma</pre></td></tr></table><p style="margin-left: 30.0px;"><br /><br /><strong>4.4.</strong> Disable the generation of a new session name for content picker siteaccess by placing following settings on your settings/siteaccess/ezmacontentpicker/site.ini.append.php file:<br /><br /></p><table class="wysiwyg-macro" data-macro-name="noformat" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading8813.png?definition=e25vZm9ybWF0fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>[Session]
SessionNamePerSiteAccess=disabled</pre></td></tr></table><p style="margin-left: 30.0px;"><br /><br /><strong>4.5.</strong> Next open your <em>settings/override/site.ini.append.php</em> file and add the newly created siteaccess into the <strong>AvailableSiteAccessList[]</strong> and <strong>SiteList[]</strong> arrays:<br /><br /></p><table class="wysiwyg-macro" data-macro-name="noformat" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading8813.png?definition=e25vZm9ybWF0fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>[SiteAccessSettings]
[...]
AvailableSiteAccessList[]=ezmacontentpicker

[SiteSettings]
[...]
SiteList[]=ezmacontentpicker</pre></td></tr></table><p style="margin-left: 60.0px;">Note: if your eZ Publish setup is using HOST based matching you will need to update [SiteAccessSettings].HostMatchMapItems accordingly.</p><p style="margin-left: 30.0px;"><br /><strong>4.6.</strong> Set full URL (inc. http:// prefix) to ezmacontentpicker siteaccess for content picker widget, in your <em>settings/override/ezma.ini.append.php</em>:</p><table class="wysiwyg-macro" data-macro-name="noformat" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading8813.png?definition=e25vZm9ybWF0fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>[WidgetSettings_ezmacontentpicker]
FullURL=http://example.com/ezmacontentpicker</pre></td></tr></table><p><br /><strong>5.</strong> Copy the integer value of data-pid=&quot;XXXX&quot; to the <em>InstallationId</em> setting</p><table class="wysiwyg-macro" data-macro-name="noformat" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading8813.png?definition=e25vZm9ybWF0fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>[TrackingSettings]
InstallationId=XXXX</pre></td></tr></table><p style="margin-left: 30.0px;">Note: By default <em>ezma</em> extension inserts the implementation code above the &lt;/body&gt; tag at the end of each page. Implementation code for automatic website tracking requires installation identifier which can be found in the &quot;My Account&quot; tab in the &quot;eZ Marketing Automation Implementation Code&quot; section.<br />Please check the following screenshot for more details:</p><p style="margin-left: 30.0px;"><img class="confluence-embedded-image confluence-thumbnail" width="300" src="../../download/thumbnails/8323629/Screen%20Shot%202013-02-06%20at%2016.36.12_1ec0.png?version=1&amp;modificationDate=1360166151000&amp;api=v2" data-image-src="/download/attachments/8323629/Screen%20Shot%202013-02-06%20at%2016.36.12_.png?version=1&amp;modificationDate=1360166151000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="8519898" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Screen Shot 2013-02-06 at 16.36.12_.png" data-base-url="https://doc.ez.no" data-linked-resource-content-type="image/png" data-linked-resource-container-id="8323629" data-linked-resource-container-version="8" title="eZ Marketing Automation > Configuring eZ Marketing Automation > Screen Shot 2013-02-06 at 16.36.12_.png" data-location="eZ Marketing Automation > Configuring eZ Marketing Automation > Screen Shot 2013-02-06 at 16.36.12_.png" data-image-height="925" data-image-width="1012"></p><p><br /><strong>6.</strong> Add a table in the database used by your eZ Publish instance. You can do so as follows</p><div class="line">   (from eZ Publish's root directory), in the case you are using MySQL:</div><div class="line"><p> </p><table class="wysiwyg-macro" data-macro-name="code" data-macro-parameters="language=bash" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading174f.png?definition=e2NvZGU6bGFuZ3VhZ2U9YmFzaH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre> $ mysql -u &lt;user> -p &lt;database_name> &lt; extension/ezma/sql/mysql/schema.sql</pre></td></tr></table><p> </p></div><div class="line">   The procedure is very similar in case you are using another RDMS. You may want to have a look at the sql/postgresql for PostgreSQL.</div><div class="line">   Please refer to the documentation reference for your DBMS if you are experiencing issues.</div><div class="line"><strong>7.</strong> Embedded forms requires CNAME setup. Define CNAME hostname which points to forms.cdnma.com e.g forms.example.com.</div><div class="line">   Next update settings in the settings/override/ezma.ini.append.php file</div><div class="line"><p> </p><table class="wysiwyg-macro" data-macro-name="code" data-macro-parameters="title=settings/override/ezma.ini.append.php" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading105b.png?definition=e2NvZGU6dGl0bGU9c2V0dGluZ3Mvb3ZlcnJpZGUvZXptYS5pbmkuYXBwZW5kLnBocH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>[FormSettings]
Hostname=forms.example.com</pre></td></tr></table><p> </p></div><div class="line"><strong>8.</strong> Clear the cache, by executing the <em>ezcache.php</em> script, from your <strong>ezpublish_legacy</strong> folder:</div><table class="wysiwyg-macro" data-macro-name="noformat" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading8813.png?definition=e25vZm9ybWF0fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>$ php bin/php/ezcache.php --clear-all --purge</pre></td></tr></table>
        <p>&nbsp;</p>
    </body>

<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=8323629 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 11:10:16 GMT -->
</html>
