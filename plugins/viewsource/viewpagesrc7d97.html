                    
    
                    
    
                    
    
<!DOCTYPE html>
<html>
    
<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=30712447 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 10:02:07 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
        <title>View Source</title>
        <link rel="canonical" href="../../pages/viewpage7d97.html?pageId=30712447" />
        <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager.resource-base-url-pattern"]="\"(?:(?:/s/.*?/_)?/download)\"";
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"\"";
WRM._unparsedData["com.atlassian.plugins.browser.metrics.browser-metrics-plugin:browser-metrics.feature-data-provider-legacy"]="true";
</script>
<link type="text/css" rel="stylesheet" href="../../s/1b9968ac17721e3a6947d14e3a43c3f8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch9c16.css?build-number=5983" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/f3685658010e413141854089096800b5/_/download/contextbatch/css/plugin.viewsource/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/df762e50bc83a9608020a1ff1476cda6-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/5714bd5a5c86641cad10106916cda7c8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css" media="all">
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/8/_/styles/colors82a8.css?spaceKey=TECHDOC" media="all">
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/8/_/styles/custom82a8.css?spaceKey=TECHDOC" media="all">

    </head>

    <body class="mceContentBody aui-theme-default wiki-content fullsize">
        <p>&nbsp;</p>         <p><img class="editor-inline-macro" src="../servlet/confluence/placeholder/macro4170.png?definition=e3RvY30&amp;locale=en_GB&amp;version=2" data-macro-name="toc" data-macro-id="b72dd14e-ae41-4c26-9f5f-77ca96dbd2c4" data-macro-schema-version="1"></p><h2>PlatformUI Configuration files</h2><h3>JavaScript modules in <code>yui.yml</code></h3><p>Each component of the PlatformUI application is written as <a href="http://yuilibrary.com/yui/docs/yui/create.html">a YUI module</a>. The YUI module system comes with a dependency system which is used in the PlatformUI application. For instance, the PlatformUI application has a module called <code>ez-templatebasedview</code> which provides a base view class to ease the usage of a template. This module is a dependency of most of the views in the application and has itself some dependencies, like for instance the view module from YUI. Those dependencies are expressed in the <code>yui.yml</code> configuration and this configuration is meant to be extended / overridden in others bundles. For instance:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="db0bbbe1-b68b-4d61-a39a-525aa839ac13" data-macro-parameters="language=text|theme=Midnight|title=Excerpt of yui.yml" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading441d.png?definition=e2NvZGU6bGFuZ3VhZ2U9dGV4dHx0aGVtZT1NaWRuaWdodHx0aXRsZT1FeGNlcnB0IG9mIHl1aS55bWx9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>system:
    default:
        yui:
            modules:                
                ez-templatebasedview:
                    requires: ['ez-texthelper', 'ez-view', 'handlebars', 'template']
                    path: %ez_platformui.public_dir%/js/views/ez-templatebasedview.js
                ez-loginformview:
                    requires: ['ez-templatebasedview', 'node-style', 'loginformview-ez-template']
                    path: %ez_platformui.public_dir%/js/views/ez-loginformview.js</pre></td></tr></table><p><span class="inline-comment-marker" data-ref="736650a3-b2b6-46ac-9bf9-f9904ede18f5">This configuration defines two modules <code>ez-templatebasedview</code> and <code>ez-loginformview</code>:</span></p><ul><li><code>ez-templatebasedview</code> requires the modules <code>ez-texthelper</code>, <code>ez-view</code>, <code>handlebars</code> and <code>template</code>. The source code of this module is in <code>%ez_platformui.public_dir%/js/views/ez-templatebasedview.js</code> on the disk;</li><li><code>ez-loginformview</code> requires the modules <code>ez-templatebasedview</code>, <code>node-style</code> and <code>loginformview-ez-template</code>. The source code of this module is in <code>%ez_platformui.public_dir%/js/views/ez-loginformview.js</code> on the disk.</li></ul><p>Â </p><table class="wysiwyg-macro" data-macro-name="info" data-macro-id="3ecb25b0-11bc-49c6-9f25-7f393750bd0a" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingd35c.png?definition=e2luZm99&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>Note that the order of module definitions is not important, <code>ez-loginformview</code> can be defined before the <code>ez-templatebaseview</code> module even if the latter is a dependency of the former.</p></td></tr></table><p>Most of the PlatformUI application views use a Handlebars template to generate the HTML markup. In the application the templates are also handled as YUI modules but those modules are special because they are dynamically generated from the regular template files on the disk. For this to work, the YUI module corresponding to a template must have the <code>type</code> flag set to <code>template</code>. To complete the example above, the template module <code>loginforview-ez-template</code> should be defined in the following way:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="4d553a83-aad0-4190-ab9d-a59abb15917a" data-macro-parameters="language=text|theme=Midnight" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading1e1b.png?definition=e2NvZGU6bGFuZ3VhZ2U9dGV4dHx0aGVtZT1NaWRuaWdodH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>loginformview-ez-template:
    type: 'template'
    path: %ez_platformui.public_dir%/templates/loginform.hbt</pre></td></tr></table><h3>CSS files in <code>css.yml</code></h3><p>The CSS files used by the application are also listed in <code>css.yml</code>, but in the case of CSS files, it's much simpler as this file just lists the CSS files to load, example:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="8f2f6f52-73bd-4d30-9930-06decb92e90f" data-macro-parameters="language=text|theme=Midnight|title=Excerpt of css.yml" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading5598.png?definition=e2NvZGU6bGFuZ3VhZ2U9dGV4dHx0aGVtZT1NaWRuaWdodHx0aXRsZT1FeGNlcnB0IG9mIGNzcy55bWx9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>system:
    default:
        css:
            files:
                - '@eZPlatformUIBundle/Resources/public/css/views/field.css'
                - '@eZPlatformUIBundle/Resources/public/css/views/fields/view/relation.css'</pre></td></tr></table><h2>Injecting the extension custom configuration files</h2><p>To be able to extend the PlatformUI application configuration, the extension bundle has to set up its own configuration handling. For this, you only have to tweak the extension class generated in the bundle <a class="confluence-link" href="../../display/TECHDOC/Create%2bthe%2bextension%2bBundle.html" data-linked-resource-id="30712443" data-linked-resource-version="6" data-linked-resource-type="page" data-linked-resource-default-alias="Create the extension Bundle" data-base-url="../../index.html">in the first step</a> to load the extension bundle's <code>yui.yml</code> and <code>css.yml</code> and to process their respective content with PlatformUI's configuration. The default empty <code>yui.yml</code> and <code>css.yml</code> also have to be created so that eZ Platform is still usable.</p><table class="wysiwyg-macro" data-macro-name="info" data-macro-id="3e10c5d6-6ff9-4d0f-8c35-e8a3ca0f6a82" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingd35c.png?definition=e2luZm99&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>If you want to get more details on this operation, you can read the <a class="confluence-link" href="../../display/TECHDOC/How%2bto%2bexpose%2bSiteAccess%2baware%2bconfiguration%2bfor%2byour%2bbundle.html" data-linked-resource-id="30711542" data-linked-resource-version="3" data-linked-resource-type="page" data-linked-resource-default-alias="How to expose SiteAccess aware configuration for your bundle" data-base-url="../../index.html">How to expose SiteAccess aware configuration for your bundle</a> cookbook page.</p></td></tr></table><p>After this, you just have to make sure the bundle has a <code>Resources/public</code> directory to install the assets with the following command:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="515d62c2-f590-4937-986a-29b356ce3544" data-macro-parameters="language=bash|theme=Midnight" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading687c.png?definition=e2NvZGU6bGFuZ3VhZ2U9YmFzaHx0aGVtZT1NaWRuaWdodH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>$ app/console assets:install --symlink</pre></td></tr></table><table class="wysiwyg-macro" data-macro-name="tip" data-macro-id="0f032f38-1fe2-4ca4-9dd5-6d7ec635f90b" data-macro-parameters="title=Results and next step:" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading31fc.png?definition=e3RpcDp0aXRsZT1SZXN1bHRzIGFuZCBuZXh0IHN0ZXA6fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>The resulting code can be seen in <a href="https://github.com/ezsystems/ExtendingPlatformUIConferenceBundle/tree/2_configuration">the 2_configuration tag on GitHub</a> (the interesting part is the <a href="https://github.com/ezsystems/ExtendingPlatformUIConferenceBundle/blob/2_configuration/DependencyInjection/EzSystemsExtendingPlatformUIConferenceExtension.php"><span class="pl-s1"><span class="pl-en">EzSystemsExtendingPlatformUIConferenceExtension</span></span></a> class), this step result can also be viewed as <a href="https://github.com/ezsystems/ExtendingPlatformUIConferenceBundle/compare/1_bundle...2_configuration">a diff between tags <code>1_bundle</code> and <code>2_configuration</code></a>.</p><p>After these two first steps, PlatformUI should remain perfectly usable and unchanged. The next step is then <a class="confluence-link" href="../../display/TECHDOC/Alter%2bthe%2bJavaScript%2bApplication%2brouting.html" data-linked-resource-id="30712500" data-linked-resource-version="12" data-linked-resource-type="page" data-linked-resource-default-alias="Alter the JavaScript Application routing" data-base-url="../../index.html">to tweak the PlatformUI Application routing to start implementing the new feature</a>.</p></td></tr></table>
        <p>&nbsp;</p>
    </body>

<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=30712447 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 10:02:08 GMT -->
</html>
