                    
    
                    
    
                    
    
<!DOCTYPE html>
<html>
    
<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=16286213 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 21 Oct 2014 11:55:32 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
        <title>View Source</title>
        <link rel="canonical" href="../../pages/viewpage0113.html?pageId=16286213" />
        <link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch934e.css?media=print" media="print">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 8]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+8" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/1f2a9c4c7f2593422cc9b02d1a652a22/_/download/contextbatch/css/plugin.viewsource/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/70f6d025b64de5008ccd042576cd8d90/_/download/contextbatch/css/page/batch.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/70f6d025b64de5008ccd042576cd8d90/_/download/contextbatch/css/page/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/26ac2724af3c6ece1051365650d982fa/_/download/contextbatch/css/editor-content/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/1.3/_/download/batch/com.atlassian.confluence.plugins.confluence-hig/com.atlassian.confluence.plugins.confluence-highlight-ac" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/1.3/_/download/batch/com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources/com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/12/_/styles/colors.css" media="all">

    </head>

    <body class="mceContentBody aui-theme-default wiki-content fullsize">
        <p>&nbsp;</p>         <h1>Download</h1><p>You can download the extension by clicking on this link: <a href="https://confluence.ez.no/download/attachments/16286206/ezcloud-extension-v1.0.0.tar.gz">https://confluence.ez.no/download/attachments/16286206/ezcloud-extension-v1.0.0.tar.gz</a></p><p>Current version: 1.0.0</p><h1>About</h1><p>This extension is used to customize your eZ Cloud installation with various set parameters found in ini and/or other types of configuration provided by this extension.</p><p> </p><h1>Settings</h1><p> </p><h5>extension/ezcloud/settings/ezcloud.ini</h5><p> </p><table class="wysiwyg-macro" data-macro-name="noformat" style="background-image: url(../servlet/confluence/placeholder/macro-heading8813.png?definition=e25vZm9ybWF0fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>[SiteAccessSettings]
AdminList[]
AdminList[]=ezdemo_site_admin
</pre></td></tr></table><p>In this block setting you need to specify the siteaccess name to your admin siteaccess. This is so that eZ Cloud can put your admin interface on a dedicated set of machines.</p><p> </p><table class="wysiwyg-macro" data-macro-name="noformat" style="background-image: url(../servlet/confluence/placeholder/macro-heading8813.png?definition=e25vZm9ybWF0fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>[Solr]
# Path to the custom config tarball you uploaded to the ftp
# If you don't have any custom configuation just leave empty string
CustomConfigFile=
</pre></td></tr></table><p>In your SFTP account there is a folder called &quot;solr/&quot;. In this folder you can upload a custom solr configuration tarball if you have special customizations to solr configuration.</p><p>The correct method of packing the solr config is as follows:</p><table class="wysiwyg-macro" data-macro-name="noformat" style="background-image: url(../servlet/confluence/placeholder/macro-heading8813.png?definition=e25vZm9ybWF0fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>cd /path/to/solr/conf
tar zcvf ezcloud_solr_config.tar.gz schema.xml protwords.txt stopwords.txt synonyms.txt
</pre></td></tr></table><p>Note: We currently do not support changes to solrconfig.xml</p><p>If you pack solr config using this method (assuming you upload the file to the solr/ directory on sftp) the correct ini setting would be</p><table class="wysiwyg-macro" data-macro-name="noformat" style="background-image: url(../servlet/confluence/placeholder/macro-heading8813.png?definition=e25vZm9ybWF0fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>[Solr]
CustomConfigFile=ezcloud_solr_config.tar.gz
</pre></td></tr></table><p> </p><p> </p><table class="wysiwyg-macro" data-macro-name="noformat" style="background-image: url(../servlet/confluence/placeholder/macro-heading8813.png?definition=e25vZm9ybWF0fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>[Settings]
# List of settings to enforce
#
# Syntax:
# ForceSettings[]=&lt;file>|&lt;group>|&lt;key>|&lt;value>
#
# Example
# ForceSettings[]=site.ini|TemplateSettings|TemplateCache|disabled
#
ForceSettings[]
</pre></td></tr></table><p>This block should be used with caution and needs to be pre-approved by eZ Cloud team before applying them.</p><p>This block allows the override of any setting in eZ Publish (even settings we modify on deployment like cache enforcement). You need to have a good reason to need to set settings in this manner.</p><p>Note that all settings will be written to settings/override/&lt;file&gt;[.append.php]</p><p> </p><h1>Cronjobs</h1><p>Cronjobs in eZ Cloud are preset to run on 5 different cronjob parts, prefixed with &quot;ezc_&quot;.</p><p>Here are the dates for the different parts:</p><ul><li>frequent: Every 5 minutes</li><li>hourly: Random minute every hour</li><li>nightly: Random minute between 03:00 and 03:59 (UTC+3) every night</li><li>daily: Random minute between 13:00 and 13:59 (UTC+3) every day</li><li>weekly: Random minute between 02:00 and 02:59 (UTC+3) every week at Saturday</li></ul><p>The random minute is because the servers are in a shared environment to prevent multiple cronjobs spawning at the same time.</p><p>You find the parts defined in extension/ezcloud/settings/cronjob.ini.append.php</p><table class="wysiwyg-macro" data-macro-name="noformat" style="background-image: url(../servlet/confluence/placeholder/macro-heading8813.png?definition=e25vZm9ybWF0fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>[CronjobSettings]
ExtensionDirectories[]=ezcloud

[CronjobPart-ezc_frequent]

[CronjobPart-ezc_hourly]

[CronjobPart-ezc_nightly]

[CronjobPart-ezc_daily]

[CronjobPart-ezc_weekly]

</pre></td></tr></table><p>This file functions like the normal cronjobs.ini provided by eZ Publish.</p><p> </p><h1>Apache configuration</h1><p>We also allow to add custom RewriteRule and RewriteCond as well as custom mimetypes</p><h5>Custom rewrites</h5><p>There is a file in the extension located extension/ezcloud/conf/httpd/custom-rewrites.conf</p><p>All rewrite entries in this file is prepended to the top of our rewrite section in the Apache configuration to make sure your custom rewrites will always trigger.</p><p>In this file you will find a commented example on how to add rewrites. You can copy paste the custom rewrites you need from your local apache config into this file. Note that all rewrites must start with the forward slash regardless of what your local version may look like, example:</p><p>If you have a working rewrite that looks like this:</p><table class="wysiwyg-macro" data-macro-name="noformat" style="background-image: url(../servlet/confluence/placeholder/macro-heading8813.png?definition=e25vZm9ybWF0fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>RewriteRule ^my_custom_file.txt - [L]

</pre></td></tr></table><p>it needs to be rewritten to look like this</p><table class="wysiwyg-macro" data-macro-name="noformat" style="background-image: url(../servlet/confluence/placeholder/macro-heading8813.png?definition=e25vZm9ybWF0fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>RewriteRule ^/my_custom_file.txt - [L]

</pre></td></tr></table><p>This is because we run httpd on RHEL and this is the syntax that it requires for rewrites due to how we have setup eZ Cloud.</p><p> </p><h5>Custom mime-types</h5><p>There is a file in the extension located extension/ezcloud/conf/httpd/custom-mime-types.conf</p><p>In this file you can add AddType entries</p><p>Example</p><table class="wysiwyg-macro" data-macro-name="noformat" style="background-image: url(../servlet/confluence/placeholder/macro-heading8813.png?definition=e25vZm9ybWF0fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>AddType application/x-font-woff .woff
</pre></td></tr></table><p>This would add support of .woff files to be of type application/x-font-woff in eZ Cloud Apache configuration.</p>
        <p>&nbsp;</p>
    </body>

<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=16286213 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 21 Oct 2014 11:55:32 GMT -->
</html>
