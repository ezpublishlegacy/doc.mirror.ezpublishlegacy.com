                    
    
                    
    
                    
    
<!DOCTYPE html>
<html>
    
<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=12780609 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 21 Oct 2014 16:30:38 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
        <title>View Source</title>
        <link rel="canonical" href="../../pages/viewpage653b.html?pageId=12780609" />
        <link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch934e.css?media=print" media="print">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 8]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+8" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/1f2a9c4c7f2593422cc9b02d1a652a22/_/download/contextbatch/css/plugin.viewsource/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/70f6d025b64de5008ccd042576cd8d90/_/download/contextbatch/css/page/batch.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/70f6d025b64de5008ccd042576cd8d90/_/download/contextbatch/css/page/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/26ac2724af3c6ece1051365650d982fa/_/download/contextbatch/css/editor-content/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/1.3/_/download/batch/com.atlassian.confluence.plugins.confluence-hig/com.atlassian.confluence.plugins.confluence-highlight-ac" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/1.3/_/download/batch/com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources/com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/12/_/styles/colors.css" media="all">

    </head>

    <body class="mceContentBody aui-theme-default wiki-content fullsize">
        <p>&nbsp;</p>         <p><img class="editor-inline-macro" src="../servlet/confluence/placeholder/macro4170.png?definition=e3RvY30&amp;locale=en_GB&amp;version=2" data-macro-name="toc"></p><h2>Description</h2><p>With the Page FieldType, editors define a <strong>layout</strong> with <strong>multiple zones</strong> within a single front page.</p><p>Within each zone, editors create <strong>blocks</strong> that contain particular content categories. Specific content can be added to these blocks, they are called <strong>block items</strong>.</p><p>This is particularly useful for managing homepages/landing pages.</p><table class="wysiwyg-macro" data-macro-name="note" style="background-image: url(../servlet/confluence/placeholder/macro-headingdd57.png?definition=e25vdGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>The Page FieldType is currently <strong>read-only</strong> with the Public API.<br />It's however still possible to edit content with it through the admin interface (which runs through the legacy stack). </p></td></tr></table><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Name</th><th class="confluenceTh">Internal name</th><th colspan="1" class="confluenceTh">Expected input</th><th colspan="1" class="confluenceTh">Output</th></tr><tr><td class="confluenceTd"><code>Page</code></td><td class="confluenceTd"><code>ezpage</code></td><td colspan="1" class="confluenceTd"><code>N/A</code></td><td colspan="1" class="confluenceTd"><code>eZ\Publish\Core\FieldType\Page\Parts\Page </code></td></tr></tbody></table><h2>Configuration</h2><table class="wysiwyg-macro" data-macro-name="warning" data-macro-parameters="title=Warning" style="background-image: url(../servlet/confluence/placeholder/macro-heading340d.png?definition=e3dhcm5pbmc6dGl0bGU9V2FybmluZ30&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>You still need to define your available layouts and blocks in the legacy part to get them available in the admin interface. Please refer to <a href="../../Extensions/eZ-Publish-extensions/eZ-Flow/eZ-Flow-2.5/Configuration/Configuring-the-eZ-Flow-block-system.html">eZ Publish legacy documentation</a> to learn how to do so.</p></td></tr></table><h3>Defining a zone layout</h3><p><span>A layout is a combination of zones that are placed on a page. The placement of the zones is defined in a template that is specified as part of the layout configuration. You can define as many layouts as you need.</span></p><p>You can define a new layout in your main YAML configuration:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-parameters="title=ezpublish.yml" style="background-image: url(../servlet/confluence/placeholder/macro-heading8bc7.png?definition=e2NvZGU6dGl0bGU9ZXpwdWJsaXNoLnltbH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>ezpublish:
    system:
        my_siteaccess:
            ezpage:
                layouts:
                    myLayoutIdentifier:
                        name: "My über cool layout"
                        template: "AcmeDemoBundle:page/zonelayouts:my_template.html.twig"</pre></td></tr></table><p>Then, when rendering a Page FieldType using <code>myLayoutIdentifier</code>, <code>Resources/views/page/zonelayouts/my_template.html.twig</code> from AcmeDemoBundle will be used (see <a href="http://symfony.com/doc/master/book/controller.html#rendering-templates">how to use template identifiers in Symfony documentation</a>).</p><table class="wysiwyg-macro" data-macro-name="tip" data-macro-parameters="title=Tip" style="background-image: url(../servlet/confluence/placeholder/macro-heading6668.png?definition=e3RpcDp0aXRsZT1UaXB9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>You can specify a legacy template in your layout definition.</p><table class="wysiwyg-macro" data-macro-name="code" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>ezpublish:
    system:
        my_siteaccess:
            ezpage:
                layouts:
                    myLegacyLayout:
                        name: My legacy layout
                        template: "design:zone/my_legacy_template.tpl"</pre></td></tr></table><p><span>However, doing so will defer block display to the legacy templates as well.</span></p></td></tr></table><h3>Block template selection</h3><table class="wysiwyg-macro" data-macro-name="note" style="background-image: url(../servlet/confluence/placeholder/macro-headingdd57.png?definition=e25vdGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>Template selection rules are applied only when you render a block with the <code>PageController</code> (using <code>ez_page:viewBlock</code> from templates), <a class="confluence-link" href="../../display/EZP51/The%2bPage%2bFieldType.html#ThePageFieldType-Renderingblocks" data-anchor="Renderingblocks" data-linked-resource-default-alias="Renderingblocks" data-base-url="../../index.html">see below</a>.</p></td></tr></table><p><span>Like you are able to </span><a class="confluence-link" href="../../display/EZP/View%2bprovider%2bconfiguration.html" data-linked-resource-id="2720462" data-linked-resource-type="page" data-linked-resource-default-alias="View provider configuration" data-base-url="../../index.html">define template selection rules when displaying Location and Content objects</a><span>, you can also define rules for blocks, with dedicated matchers.</span></p><p>Configuration is a hash built in the following way:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-parameters="title=ezpublish.yml" style="background-image: url(../servlet/confluence/placeholder/macro-heading8bc7.png?definition=e2NvZGU6dGl0bGU9ZXpwdWJsaXNoLnltbH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>ezpublish:
    system:
        my_siteaccess:
            block_view:
                # A simple unique key for your matching ruleset
                my_rule_set:
                    # The template identifier to load, following the Symfony bundle notation for templates
                    template: AcmeTestBundle:block:campaign.html.twig
                    # Hash of matchers to use, with their corresponding values to match against
                    match:
                        # Key is the matcher "identifier" (class name or service identifier)
                        # Value will be passed to the matcher's setMatchingConfig() method.
                        Type: Campaign
                another_rule:
                    template: AcmeTestBundle:block:custom_block.html.twig
                    match:
                        Type: CustomBlock</pre></td></tr></table><table class="wysiwyg-macro" data-macro-name="tip" data-macro-parameters="title=Tip" style="background-image: url(../servlet/confluence/placeholder/macro-heading6668.png?definition=e3RpcDp0aXRsZT1UaXB9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>You can define your template selection rules in a different configuration file. <a class="confluence-link" href="../../display/EZP/Import%2bsettings%2bfrom%2ba%2bbundle.html" data-linked-resource-id="12125508" data-linked-resource-type="page" data-linked-resource-default-alias="import settings from a bundle" data-base-url="../../index.html">Read the cookbook recipe to learn more about it</a> .</p></td></tr></table><table class="wysiwyg-macro" data-macro-name="info" style="background-image: url(../servlet/confluence/placeholder/macro-headingd35c.png?definition=e2luZm99&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>Matchers for <code>block_view</code> follow the same behavior than <a class="confluence-link" href="../../display/EZP/View%2bprovider%2bconfiguration.html#Viewproviderconfiguration-Matchers" data-anchor="Matchers" data-linked-resource-id="2720462" data-linked-resource-type="page" data-linked-resource-default-alias="View provider configuration#Matchers" data-base-url="../../index.html">matchers for regular location_view / content_view</a>, except that their relative namespace will be <code>eZ\Publish\Core\MVC\Symfony\View\BlockViewProvider\Configured\Matcher</code> .</p><p>Hence you can combine matchers with AND and OR capabilities (<a class="confluence-link" href="../../display/EZP/View%2bprovider%2bconfiguration.html#Viewproviderconfiguration-Matcher" data-anchor="Matcher" data-linked-resource-id="2720462" data-linked-resource-type="page" data-linked-resource-default-alias="View provider configuration#Matcher" data-base-url="../../index.html">see main matchers' documentation page</a>).</p></td></tr></table><h4>Available matchers</h4><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Identifier</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><code>Type</code></td><td class="confluenceTd"><p><span>Matches the unique <strong>block identifier</strong> defined in the legacy </span><code>block.ini</code><span> file (<a href="../../Extensions/eZ-Publish-extensions/eZ-Flow/eZ-Flow-2.5/Configuration/Configuring-the-eZ-Flow-block-system/Defining-the-eZ-Flow-blocks/Defining-block-types.html">see legacy documentation</a>).</span></p><p><span>For example with the following configuration in legacy block.ini, it will match against <code>Manual3Items</code>:</span></p><table class="wysiwyg-macro" data-macro-name="code" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>[Manual3Items]
Name=3 Column News</pre></td></tr></table><p><span><br /></span></p></td></tr><tr><td colspan="1" class="confluenceTd"><code>View</code></td><td colspan="1" class="confluenceTd"><p><span>Matches the <strong>view’s unique identifier</strong> defined in the block definition in the legacy </span><code>block.ini</code><span> (see legacy documentation).</span></p><p><span>For example with the following configuration in legacy <code>block.ini</code>, it will match against <code>3_items1</code>:</span></p><table class="wysiwyg-macro" data-macro-name="code" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>[Manual3Items]
Name=3 Column News
ViewList[]=3_items1</pre></td></tr></table><table class="wysiwyg-macro" data-macro-name="info" style="background-image: url(../servlet/confluence/placeholder/macro-headingd35c.png?definition=e2luZm99&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>When no view is defined, the default value is <strong>default</strong>.</p></td></tr></table><p><span><br /></span></p></td></tr><tr><td colspan="1" class="confluenceTd"><code>Id\Block</code></td><td colspan="1" class="confluenceTd">Matches against the block ID, as stored in <code>ezm_block</code> table</td></tr><tr><td colspan="1" class="confluenceTd"><code>Id\Zone</code></td><td colspan="1" class="confluenceTd">Matches against the zone ID a block belongs to, as stored in <code>ezm_block</code> table</td></tr></tbody></table><p> </p><h2>Displaying the Page content</h2><h3>Layout template</h3><p>Goal of a <strong>layout</strong> template is to display <strong>zones</strong> for the given layout, depending on your layout configuration.</p><h4>Variables passed to the layout template</h4><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Variable name</th><th class="confluenceTh">Description</th><th class="confluenceTh">Type</th></tr><tr><td class="confluenceTd"><code>zones</code></td><td class="confluenceTd">Zone objects for this Page field</td><td class="confluenceTd">Array of <code>eZ\Publish\Core\FieldType\Page\Parts\Zone</code> objects</td></tr><tr><td colspan="1" class="confluenceTd"><code>zone_layout</code></td><td colspan="1" class="confluenceTd">The layout identifier (e.g. &quot;2ZonesLayout1&quot;)</td><td colspan="1" class="confluenceTd"><code>string</code></td></tr><tr><td colspan="1" class="confluenceTd"><code>pageService</code></td><td colspan="1" class="confluenceTd"><p>The PageService object (read more below). </p></td><td colspan="1" class="confluenceTd"><code>eZ\Bundle\EzPublishCoreBundle\FieldType\Page</code></td></tr></tbody></table><h3>Rendering blocks</h3><p>Each zone contain blocks that hold your content as block items. <span>To render blocks from a layout template, you need to do a sub-request.</span></p><table class="wysiwyg-macro" data-macro-name="tip" data-macro-parameters="title=Tip" style="background-image: url(../servlet/confluence/placeholder/macro-heading6668.png?definition=e3RpcDp0aXRsZT1UaXB9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>You can use a custom controller to display a block.</p><p>However, if you do so, you might need to get access to the <a class="confluence-link" href="../../display/EZP51/The%2bPage%2bFieldType.html#ThePageFieldType-ThePageServiceobj" data-anchor="ThePageServiceobj" data-linked-resource-default-alias="ThePageServiceobj" data-base-url="../../index.html">PageService</a>. You can get it via the service container with identifier <code>ezpublish.fieldType.ezpage.pageService</code>.</p></td></tr></table><h4>Using <code>ez_page:viewBlock</code></h4><p><span>This controller is responsible of choosing the right template for your block, <a class="confluence-link" href="../../display/EZP51/The%2bPage%2bFieldType.html#ThePageFieldType-Blocktemplates" data-anchor="Blocktemplates" data-linked-resource-default-alias="Blocktemplates" data-base-url="../../index.html">depending on the rules you defined</a>.</span></p><p><span>You can use this controller from templates with the following syntax:</span></p><table class="wysiwyg-macro" data-macro-name="code" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>{{ render( controller( "ez_page:viewBlock", {'block': myBlock} ) ) }}</pre></td></tr></table><h5><span style="color: rgb(51,51,51);">Available arguments</span></h5><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Name</th><th class="confluenceTh">Description</th><th class="confluenceTh">Type</th><th class="confluenceTh">Default value</th></tr><tr><td class="confluenceTd"><code>block</code></td><td class="confluenceTd">The block object you want to render</td><td class="confluenceTd"><code>eZ\Publish\Core\FieldType\Page\Parts\Block</code></td><td class="confluenceTd">N/A</td></tr><tr><td colspan="1" class="confluenceTd"><code>params</code></td><td colspan="1" class="confluenceTd"><p>Hash of variables you want to inject to sub-template, key being the exposed variable name.</p><table class="wysiwyg-macro" data-macro-name="code" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>{{ render(
      controller( 
          "ez_page:viewBlock", 
          {
              'block': myBlock,
              'params': { 'some_variable': 'some_value' }
          }
      )
) }}</pre></td></tr></table></td><td colspan="1" class="confluenceTd">hash</td><td colspan="1" class="confluenceTd">empty</td></tr><tr><td colspan="1" class="confluenceTd"><code>cacheSettings</code></td><td colspan="1" class="confluenceTd"><p>Hash of cache settings to use by the sub-controller (useful if you use ESI or Hinclude strategies).</p><table class="wysiwyg-macro" data-macro-name="code" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>{{ render_esi(
      controller( 
          "ez_page:viewBlock", 
          {
              'block': myBlock,
              'params': { 'some_variable': 'some_value' },
              'cacheSettings': { 'smax-age': 600 }
          }
      )
) }}</pre></td></tr></table></td><td colspan="1" class="confluenceTd">hash (accepted keys are <code>max-age</code> and <code>smax-age</code>)</td><td colspan="1" class="confluenceTd">empty</td></tr></tbody></table><p><span><br /></span></p><table class="wysiwyg-macro" data-macro-name="info" data-macro-parameters="title=Legacy BC" style="background-image: url(../servlet/confluence/placeholder/macro-heading93d6.png?definition=e2luZm86dGl0bGU9TGVnYWN5IEJDfQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>If no template selection rule is matched, the system will fallback to the legacy kernel and will use rules you might have defined in legacy. The result will be <a href="../../Extensions/eZ-Publish-extensions/eZ-Flow/eZ-Flow-2.5/Configuration/Configuring-the-eZ-Flow-block-system/Defining-the-eZ-Flow-blocks/Defining-block-types.html#eztoc134744_0_2">the same as when using legacy <code>block_view_gui</code> function</a>.</p><p>However, additional variables (from the <code>params</code> argument) won't be passed to the resulted template.</p></td></tr></table><h5>Variables exposed to the block template</h5><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Variable name</th><th class="confluenceTh">Type</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><code>block</code></td><td class="confluenceTd"><code>eZ\Publish\Core\FieldType\Page\Parts\Block</code></td><td class="confluenceTd">The block to display</td></tr><tr><td colspan="1" class="confluenceTd"><code>pageService</code></td><td colspan="1" class="confluenceTd"><code>eZ\Bundle\EzPublishCoreBundle\FieldType\Page\PageService</code></td><td colspan="1" class="confluenceTd"><a class="confluence-link" href="../../display/EZP51/The%2bPage%2bFieldType.html#ThePageFieldType-ThePageServiceo" data-anchor="ThePageServiceo" data-linked-resource-default-alias="ThePageServiceo" data-base-url="../../index.html">The PageService object</a></td></tr></tbody></table><p>And of course, all the additional variables <a class="confluence-link" href="../../display/EZP51/The%2bPage%2bFieldType.html#ThePageFieldType-Availablear" data-anchor="Availablear" data-linked-resource-default-alias="Availablear" data-base-url="../../index.html">you injected in the <code>params</code> argument </a>.</p><h4>Rendering Block items</h4><p>As said above, <strong>a block holds your displayable content as block items</strong> which consists of <code>eZ\Publish\Core\FieldType\Page\Parts\Item</code> objects. Among <a href="https://github.com/ezsystems/ezpublish-kernel/blob/master/eZ/Publish/Core/FieldType/Page/Parts/Item.php">the available properties</a>, you will find <code>contentId</code> and <code>locationId</code> which reference the content/location you want to display. All you have to do then is to <strong>render it view <code>ez_content:viewLocation</code> or <code>ez_content:viewContent</code></strong> (<a class="confluence-link" href="../../display/EZP51/The%2bPage%2bFieldType.html#ThePageFieldType-ThePageFieldType-ExampleExample" data-anchor="ThePageFieldType-ExampleExample" data-linked-resource-default-alias="ThePageFieldType-ExampleExample" data-base-url="../../index.html">see full example below</a>).</p><h3>The PageService object</h3><p>The PageService object (<code>eZ\Bundle\EzPublishCoreBundle\FieldType\Page\PageService</code>) is a helper giving the possibility to get current zone/block definitions and to retrieve block items.</p><h4>Main methods</h4><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Method name</th><th class="confluenceTh">Description</th><th class="confluenceTh">Return type</th></tr><tr><td class="confluenceTd"><code>getZoneDefinition()</code></td><td class="confluenceTd">Returns zone definition (all defined zones for the current siteaccess) as an array</td><td class="confluenceTd"><code>array</code></td></tr><tr><td colspan="1" class="confluenceTd"><code>getZoneDefinitionByLayout()</code></td><td colspan="1" class="confluenceTd">Returns a zone definition for a given layout. It consists of a configuration array for the given layout.</td><td colspan="1" class="confluenceTd"><code>array</code></td></tr><tr><td colspan="1" class="confluenceTd"><code>getBlockDefinition()</code></td><td colspan="1" class="confluenceTd">Returns block definition as an array</td><td colspan="1" class="confluenceTd"><code>array</code></td></tr><tr><td colspan="1" class="confluenceTd"><code>getBlockDefinitionByIdentifier()</code></td><td colspan="1" class="confluenceTd">Returns a block definition for a given block identifier.</td><td colspan="1" class="confluenceTd"><code>array</code></td></tr><tr><td colspan="1" class="confluenceTd"><code>getValidBlockItems()</code></td><td colspan="1" class="confluenceTd">Returns valid items (that are to be displayed), for a given block.</td><td colspan="1" class="confluenceTd"><code>eZ\Publish\Core\FieldType\Page\Parts\Item[]</code></td></tr><tr><td colspan="1" class="confluenceTd"><code>getLastValidBlockItem()</code></td><td colspan="1" class="confluenceTd">Returns the last valid item, for a given block.</td><td colspan="1" class="confluenceTd"><code>eZ\Publish\Core\FieldType\Page\Parts\Item|null</code></td></tr><tr><td colspan="1" class="confluenceTd"><code>getWaitingBlockItems()</code></td><td colspan="1" class="confluenceTd">Returns queued items (the next to be displayed), for a given block.</td><td colspan="1" class="confluenceTd"><code>eZ\Publish\Core\FieldType\Page\Parts\Item[]</code></td></tr><tr><td colspan="1" class="confluenceTd"><code>getArchivedBlockItems()</code></td><td colspan="1" class="confluenceTd">Returns archived items (that were previously displayed), for a given block.</td><td colspan="1" class="confluenceTd"><code>eZ\Publish\Core\FieldType\Page\Parts\Item[]</code></td></tr><tr><td colspan="1" class="confluenceTd"><code>getValidBlockItemsAsContentInfo()</code></td><td colspan="1" class="confluenceTd">Returns valid block items as content objects</td><td colspan="1" class="confluenceTd"><code>eZ\Publish\API\Repository\Values\Content\ContentInfo[] </code></td></tr></tbody></table><h3><img class="editor-inline-macro" src="../servlet/confluence/placeholder/macroa2f5.png?definition=e2FuY2hvcjpFeGFtcGxlfQ&amp;locale=en_GB&amp;version=2" data-macro-name="anchor" data-macro-default-parameter="Example">Example</h3><table class="wysiwyg-macro" data-macro-name="code" data-macro-parameters="language=html/xml|title=2zoneslayout1.html.twig" style="background-image: url(../servlet/confluence/placeholder/macro-headingf83c.png?definition=e2NvZGU6dGl0bGU9MnpvbmVzbGF5b3V0MS5odG1sLnR3aWd8bGFuZ3VhZ2U9aHRtbC94bWx9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>&lt;h2>TWIG Template for 2zoneslayout1 zone&lt;/h2>
&lt;div class="zone-layout-{{ zone_layout|lower }} row">
    &lt;div class="span8">
        &lt;section class="content-view-block">
        {% if zones[0].blocks %}
            {# Rendering blocks with default PageController #}
            {% for block in zones[0].blocks %}
                {{ render( controller( "ez_page:viewBlock", {'block': block} ) ) }}
            {% endfor %}
            &lt;div class="block-separator">&lt;/div>
        {% endif %}
        &lt;/section>
    &lt;/div>
    &lt;div class="span4">
        &lt;aside>
            &lt;section class="content-view-block content-view-aside">
            {% if zones[1].blocks %}
                {# Still rendering with default PageController, but passing specific cache value (TTL of 100 seconds) and using ESI #}
                {% for block in zones[1].blocks %}
                    {{ render_esi( controller( "ez_page:viewBlock", {'block': block, 'cacheSettings': {'smax-age': 100}} ) ) }}
                {% endfor %}
                &lt;div class="block-separator">&lt;/div>
            {% endif %}
            &lt;/section>
        &lt;/aside>
    &lt;/div>
&lt;/div></pre></td></tr></table><table class="wysiwyg-macro" data-macro-name="code" data-macro-parameters="language=html/xml|title=campaign_block.html.twig" style="background-image: url(../servlet/confluence/placeholder/macro-heading3e44.png?definition=e2NvZGU6dGl0bGU9Y2FtcGFpZ25fYmxvY2suaHRtbC50d2lnfGxhbmd1YWdlPWh0bWwveG1sfQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>&lt;h3>TWIG Template for Campaign block type&lt;/h3>
{% set validContentInfoItems = pageService.getValidBlockItemsAsContentInfo( block ) %}
{% set validItems = pageService.getValidBlockItems( block ) %}
&lt;!-- BLOCK: START -->
&lt;div class="block-type-campaign">
    &lt;div class="campaign">
        &lt;a href="#" class="navig prev" style="opacity:0;">&lt;span class="hide">&amp;lt;&lt;/span>&lt;/a>
        &lt;a href="#" class="navig next">&lt;span class="hide">&amp;gt;&lt;/span>&lt;/a>
        &lt;ul class="indicator">
            {% for contentInfo in validContentInfoItems %}
                &lt;li>&lt;span>{{ contentInfo.name }} (#{{ contentInfo.id }})&lt;/span>&lt;/li>
            {% endfor %}
        &lt;/ul>
        &lt;ul class="images">
        {# Rendering valid items with regular view controller, with "block_item_campaign" view type #}
        {# Also passing an "image_class" parameter which will be available in sub-template. #}
        {% for item in validItems %}
            {{ render(
                controller(
                    'ez_content:viewLocation',
                    {
                        'locationId': item.locationId,
                        'viewType': 'block_item_campaign',
                        'params': {'image_class': 'campaign'}
                    }
                )
            ) }}
        {% endfor %}
        &lt;/ul>
    &lt;/div>
&lt;/div>
&lt;!-- BLOCK: END --></pre></td></tr></table>
        <p>&nbsp;</p>
    </body>

<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=12780609 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 21 Oct 2014 16:30:38 GMT -->
</html>
