<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">


<!-- Mirrored from doc.ez.no/doc_hidden/Extensions/eZ-Publish-extensions/eZ-Publish-Extension-for-Oracle-R-database/1.4/Installation/Automated-initialization by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 13:21:16 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>

<link rel="stylesheet" type="text/css" href="https://ez.no/extension/ez_ezno/design/ezno_2011/stylesheets/core.css" /><link rel="stylesheet" type="text/css" href="https://ez.no/extension/ez_ezno/design/ezno_2011/stylesheets/header-footer.css" /><link rel="stylesheet" type="text/css" href="https://ez.no/extension/ez_ezno/design/ezno_2011/stylesheets/header-footer-lookfeel.css" /><link rel="stylesheet" type="text/css" href="https://ez.no/extension/ez_ezno/design/ezno_2011/stylesheets/pagelayout.css" /><link rel="stylesheet" type="text/css" href="https://ez.no/extension/ez_ezno/design/ezno_2011/stylesheets/buttons.css" /><link rel="stylesheet" type="text/css" href="https://ez.no/extension/ez_ezno/design/ezno_2011/stylesheets/960.css" /><link rel="stylesheet" type="text/css" href="https://ez.no/extension/ez_ezno/design/ezno_2011/stylesheets/superfish.css" /><script type="text/javascript" src="https://ez.no/extension/ez_ezno/design/ezno_2011/javascript/jquery-1.6.3.min.js" charset="utf-8"></script><script type="text/javascript" src="https://ez.no/extension/ez_ezno/design/ezno_2011/javascript/superfish.js" charset="utf-8"></script><script type="text/javascript" src="https://ez.no/extension/ez_ezno/design/ezno_2011/javascript/jquery.popmenu.min.js" charset="utf-8"></script>
<style type="text/css">
    @import url(../../../../../../extension/ezdoc/design/doc/stylesheets/core.css);
    @import url(../../../../../../extension/ezdoc/design/doc/stylesheets/classes.css);
    @import url(../../../../../../extension/ezdoc/design/doc/stylesheets/doc.css);
    @import url(../../../../../../extension/ezdoc/design/doc/stylesheets/print.css) print;</style>

<link type="text/css" rel="stylesheet" href="../../../../../../extension/ezdoc/design/doc/stylesheets/print.css" media="print" />

<!-- IE conditional comments; for bug fixes for different IE versions -->
<!--[if IE 5]>     <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie5.css);    </style>     <![endif]-->
<!--[if lte IE 6]> <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie6lte.css); </style>     <![endif]-->
<!--[if lte IE 6]> <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie6lte-doc.css); </style> <![endif]-->
<!--[if IE 6]>     <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie6.css);    </style>     <![endif]-->

<!-- Load special stylesheet (if necessary) for newer Netscape decendants, Mozilla and Firefox, using the Gecko renderer -->
<script type="text/javascript"><!-- if ((navigator.userAgent.indexOf("Gecko") != -1)&&(navigator.userAgent.indexOf("KHTML") == -1)) document.write("<style type=\"text/css\">@import url(/extension/ezdoc/design/doc/stylesheets/gecko.css);</style>"); --></script>

<script type="text/javascript" src="../../../../../../extension/ezdoc/design/doc/javascripts/mainmenu-hover.js"></script>
<script type="text/javascript" src="../../../../../../extension/ezdoc/design/doc/javascripts/dropdownmenu.js"></script>
<script type="text/javascript" src="../../../../../../extension/ezdoc/design/doc/javascripts/ezno-searchbox.js"></script>
                                                    
    <title>Automated initialization / Installation / 1.4 / eZ Publish Extension for Oracle® database / eZ Publish extensions / Extensions / Documentation - Doc</title>

    
    
    
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

            <meta http-equiv="Content-language" content="en-GB" />

    
                <meta name="author" content="eZ systems" />
                    <meta name="copyright" content="eZ systems" />
                    <meta name="description" content="eZ Publish Documentation" />
                    <meta name="keywords" content="eZ Publish, documentation, manual, reference, eZ systems" />
        
    <meta name="generator" content="eZ Publish" />
    <link rel="Home" href="../../../../../../doc_hidden.html" title="Doc front page" />
<link rel="Search" href="../../../../../content/advancedsearch.html" title="Search Doc" />
<link rel="Shortcut icon" href="../../../../../../extension/ezdoc/design/doc/images/favicon.ico" type="image/x-icon" />

</head>
<body onload="initDocSearch();menuInit();">

<!-- Complete page area: START -->
<div id="page">


	<div id="header-bg">
			<div id="header" class="container_12">
				<div class="grid_12">
					<div class="searchboxes" id="searchbox">
	  <form action="https://ez.no/headerandfooteraccess/content/search">
	    <label for="searchtext" class="hide">Search text:</label>
	    	    <div class="ezautocomplete">
	        <button value="Search" title="Search" type="submit"><span class="w"><span class="l"></span><span class="c">Search</span><span class="r"></span></span></button>
	        <div class="searchtext-wrap"><input class="searchtext" id="searchtext" name="SearchText" type="text" value="Search" size="12" onblur="if(this.value=='') this.value='Search';" onfocus="if(this.value=='Search') this.value='';" /></div>
	        <div class="ezautocompletecontainer"></div>
	    </div>
	    
	    	  </form>
	</div>

                <div id="header-social-connect">
    <a href="http://www.youtube.com/user/ezpublish/" class="youtube" target="_blank">youtube</a>
    <a href="https://google.com/+ezsystems" class="googleplus" target="_blank">google plus</a>
    <a href="http://www.linkedin.com/groups?gid=2759&amp;trk=myg_ugrp_ovr" class="linkedin" target="_blank">linkedin</a>
    <a href="https://www.facebook.com/eZPublishEnterprise" class="facebook" target="_blank">facebook</a>
    <a href="http://twitter.com/#!/ezsystems" class="twitter" target="_blank">twitter</a>
</div>
				<div id="links">
		
							
		
		</div>                <div id="languages" class="popmenu">	<div class="eng"><a href="#">English&nbsp;<span></span></a></div></div>

				<p class="hide"><a href="#main">Skip to main content</a></p>
				</div>
			</div>

			
	</div>

    <div class="topmenu-anchor"></div>
    <div id="topmenu-bg">
	    <div id="logo" class="container_12">

    <div class="grid_3">
        <a href="https://ez.no/headerandfooteraccess" title="eZ Publish Platform, CXM &amp; CMS">
            <img src="https://ez.no/extension/ez_ezno/design/ezno_2011/images/ez-logo.png"
                 alt="" height="45px"/>
        </a>
    </div>

    <div class="grid_9">
                <div class="topmenu-design">
	<!-- Top menu content: START -->
	<div id="topmenu-firstlevel-position">
	<ul id="topmenu-firstlevel" class="sf-menu sf-js-enabled sf-shadow">
		
		
		        </ul>
    </div>
        <!-- Top menu content: END -->
</div>        </div>
</div>    </div>


<div id="page-content-position"><div id="page-content-position-inner"><div id="page-content">

<!-- Path area: START -->
<div id="path">

<div id="page-width4">
<h2 class="hide">Path</h2>

<!-- Path content: START -->
<p> <a href="http://ez.no/">ez.no</a> /
                        <a href="../../../../../../doc_hidden.html">documentation</a>
        
                        /
                            <a href="../../../../../Extensions.html">extensions</a>
        
                        /
                            <a href="../../../../eZ-Publish-extensions.html">ez publish extensions</a>
        
                        /
                            <a href="../../../eZ-Publish-Extension-for-Oracle-R-database.html">ez publish extension for or...</a>
        
                        /
                            <a href="../../1-3.html">1.4</a>
        
                        /
                            <a href="../Installation.html">installation</a>
        
                        /
                            automated initialization
        
            </p>
<!-- Path content: END -->

</div>

</div>
<!-- Path area: END -->

<hr class="hide" />

<!-- Main area: START -->
                                    <div id="ezp5disclaimer">
                <p><strong style="color: red">Caution:</strong> This documentation is for <strong>eZ Publish</strong> <em>legacy</em>, from version 3.x to 5.x.<br/>
                For 5.x documentation covering <em>Platform</em> see <a href="../../../../../../display/MAIN/eZ%2bDocumentation%2bCenter.html">eZ Documentation Center</a>, for difference between <em>legacy</em> and <em>Platform</em> see <a href="../../../../../../pages/viewpage0139.html?pageId=11403666">5.x Architecture overview</a>.</p>
            </div>
            
<div id="page-width5">
<div id="main" class="float-break">


<div class="template-design area-docmenu-normal">
<div class="template-module">
<div class="template-object">
<div id="contentmenu">
                        <div class="attribute-heading"><h2 class="bullet"><a href="../../../eZ-Publish-Extension-for-Oracle-R-database.html">Table of contents</a></h2></div>
<div class="boxcontent">

<map id="contentstructure">

    
    
</map>

</div>            
</div>
</div>
</div>
</div>
<div class="area-docmain-normal">
<div class="template-design">
<div class="template-module content-view-full">
<div class="template-object">

<div class="attribute-heading">
<h1>Automated initialization</h1>
</div>

 <p>This section describes how you can create a clean eZ Publish database on your Oracle server using the &quot;ora-initialize.sh&quot; script. The script is intended to help those UNIX/Linux users who wish to create a new eZ Publish site running on an Oracle database (It is also possible to re-initialize an Oracle database that contains eZ Publish related information left after previous eZ Publish installations).</p> <p>The &quot;ora-initialize.sh&quot; script is located in the &quot;extension/ezoracle/scripts&quot; directory and can be executed using the <a href="http://en.wikipedia.org/wiki/Bash" target="_blank">Bourne Again Shell (bash)</a>. </p> <p>Please note that if you are using the <a href="http://www.oracle.com/technology/tech/oci/instantclient/index.html" target="_blank">Oracle Instant Client</a>, the &quot;ora-initialize.sh&quot; script might not work correctly because the &quot;ORACLE_HOME&quot; environment variable is probably not in use and the script will not find the &quot;$ORACLE_HOME/network/admin/tnsnames.ora&quot; file. In this case, you can manually set this environment variable and copy the &quot;tnsnames.ora&quot; file to the &quot;$ORACLE_HOME/network/admin/&quot; directory before running the script. The following example demonstrates how this can be done.</p>
<ol>
 <li><div> Make sure that the &quot;ORACLE_HOME&quot; environment variable is not set: <pre class="wordwrap"><span class="line">echo $ORACLE_HOME</span>
</pre>  </div></li> <li><div> Locate the &quot;tnsnames.ora&quot; file (in most cases it can be found in &quot;/etc/tnsnames.ora&quot; or &quot;~/.tnsnames.ora&quot;). </div></li> <li><div> Create the &quot;~/network/admin/&quot; directory and copy the &quot;tnsnames.ora&quot; file there. (If there is a dot in the beginning of a filename, remove it.) </div></li> <li><div> Set the &quot;ORACLE_HOME&quot; environment variable: <pre class="wordwrap"><span class="line">export ORACLE_HOME=path_to_your_home_directory</span>
</pre>  </div></li> 
</ol>
 <p>The following example shows how to run the &quot;ora-initialize.sh&quot; script.</p>
<ol>
 <li><div> Navigate into the eZ Publish installation directory. </div></li> <li><div> 
Run the script using the following command:<br /> <pre class="wordwrap"><span class="line">./extension/ezoracle/scripts/ora-initialize.sh</span>
</pre>  </div></li> 
</ol>
 <p>The script will perform several steps (described below). Please note that when the script needs to perform any actions on an Oracle server, it will create a temporary (hidden) file called &quot;.ezoracle_test.php&quot;, execute it and then remove it (the temporary file is a script that makes use of the PHP Oracle functions). This is done on every step except the 4-th one. In other words, the script must have write/create privileges in the directory.</p>  <a name="eztoc35100_1" id="eztoc35100_1"></a><h2>Step 1. Checking requirements</h2> <p>The script will check if the following requirements are met:</p>
<ul>
 <li><div> PHP CLI is available </div></li> <li><div> The environment variable $ORACLE_HOME, which points to the Oracle installation directory, is set and the &quot;tnsnames.ora&quot; file is present it the &quot;network/admin&quot; subdirectory </div></li> <li><div> PHP has support for Oracle compiled in </div></li> <li><div> The eZ Publish installation contains the &quot;ezoracle&quot; extension </div></li> <li><div> Both database schema and database data files (&quot;share/db_schema.dba&quot; and &quot;share/db_data.dba&quot;) are present in the eZ Publish directory. </div></li> 
</ul>
   <a name="eztoc35100_2" id="eztoc35100_2"></a><h2>Step 2. Testing connection to an Oracle server (optional)</h2> <p>The script will ask you if this step should be performed or not (skipping is not recommended). If yes, you will have to provide the following information:</p> <table class="renderedtable" cellpadding="2" cellspacing="0">
 
<tr>
 <th >   <p>Information</p> 
  </th> <th >   <p>Description</p> 
  </th> 
</tr>
 
<tr>
 <td valign="top" style="vertical-align: top">   <p>Username</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>The Oracle username that belongs to the Oracle user.</p> 
  </td>
 
</tr>
 
<tr>
 <td valign="top" style="vertical-align: top">   <p>Password</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>The password that belongs to the Oracle user.</p> 
  </td>
 
</tr>
 
<tr>
 <td valign="top" style="vertical-align: top">   <p>Instance</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>The name of the Oracle instance. In most cases, these names (connect strings) are specified in the &quot;tnsnames.ora&quot; file.</p> 
  </td>
 
</tr>
 
</table>
   <a name="eztoc35100_3" id="eztoc35100_3"></a><h2>Step 3. Creating an Oracle user with sufficient privileges (optional)</h2> <p>The script will ask if you wish to create a new Oracle user account. If you already have a user with <a href="../Requirements.html#privileges" target="_self">sufficient privileges</a>, you can skip this step. To create a new user, you will have to provide the following:</p> 
<ul>
 <li><div> The username and password for the database administrator (or any other Oracle user that has the &quot;CREATE USER&quot; system privilege). </div></li> <li><div> The username and password for the user that is being created. </div></li> <li><div> The name of the Oracle instance. </div></li> 
</ul>
 <p>The script will display the SQL query for creating a new user, ask for confirmation and finally add the user.</p>   <a name="eztoc35100_4" id="eztoc35100_4"></a><h2>Step 4. Connecting to an Oracle server</h2> <p>If you did not create a new user account during step 3, the script will ask you to provide the username/password (not the DB administrator, but the one which the eZ Publish database belongs to) and the name of the Oracle instance. The user must have the <a href="../Requirements.html#privileges" target="_self">required privileges</a>, so that the script can connect to the specified Oracle database and perform the next steps.</p> <p>Please note that this step will be skipped if you created a new user during step 3.</p>   <a name="eztoc35100_5" id="eztoc35100_5"></a><h2>Step 5. Testing user info with Oracle</h2> <p>The script will now attempt to connect to the specified Oracle database using the Oracle account that was specified/created during step 3 or 4.</p>   <a name="eztoc35100_6" id="eztoc35100_6"></a><h2>Step 6. Creating the &quot;md5_digest&quot; function</h2> <p>The database extension requires a custom function called &quot;md5_digest&quot; to be stored in the database. This function returns an MD5 hash (checksum) generated for the provided string input. The script will create this function if the Oracle account that is being used has &quot;CREATE PROCEDURE&quot; privilege.</p>   <a name="eztoc35100_7" id="eztoc35100_7"></a><h2>Step 7. Cleaning up the database</h2> <p>The script will search for existing eZ Publish data in the database and get rid of it (if any).</p>   <a name="eztoc35100_8" id="eztoc35100_8"></a><h2>Step 8. Initializing the database structure</h2> <p>The script will initialize the necessary database structure for eZ Publish (create all the necessary tables, sequences and triggers in the Oracle database) according to the instructions specified in the &quot;share/db_schema.dba&quot; file.</p>   <a name="eztoc35100_9" id="eztoc35100_9"></a><h2>Step 9. Importing pre-defined data to the database</h2> <p>The script will import the pre-defined data from the &quot;share/db_data.dba&quot; file to the database, so that the clean eZ Publish database will be ready to use.</p> <p>Once the automated initialization has successfully finished, you may continue the installation process by following the <a href="../Installation.html#configure_ezp" target="_self">remaining steps</a>.</p> 

<div class="break"></div><div class="pageinfo float-break">
<div class="created">


<p><label>Written by:</label>Svitlana Shatokhina&nbsp;(20/12/2006 10:32 am)</p>
</div>
<div class="modified">
<p><label>Last updated by:</label>Svitlana Shatokhina&nbsp;(25/01/2007 3:31 pm)</p>
</div><div class="authors">
<p><label>Maintainers:</label>Svitlana Shatokhina, Balazs Halasy</p>
</div></div>
<hr class="hide" />

</div>
</div>
</div>

<div id="comments" class="class-comment">
<div class="content-view-children">

<h1>Comments</h1>
<p>There are no comments.</p>
<div class="toolbar">

<form method="post" action="https://doc.ez.no/doc_hidden/content/action">
<input class="button" type="submit" name="NewButton" value="New comment" />
<input type="hidden" name="NodeID" value="6668" />
<input type="hidden" name="RedirectURIAfterPublish" value="Extensions/eZ-Publish-extensions/eZ-Publish-Extension-for-Oracle-R-database/1.4/Installation/Automated-initialization" />
<input type="hidden" name="ClassID" value="17" />
</form>
</div>

</div>
</div>

</div>
<!-- Main area content: END -->

</div>
</div>
<!-- Main area: END -->
<hr class="hide" />

</div></div></div>

        <div id="footer-bg">
        <div id="footer" class="container_12">

            <div class="grid_3">
                <img src="https://ez.no/extension/ez_ezno/design/ezno_2011/images/ez-logo-white.png" alt="ez-publish" />
                <div id="footer-copyright" class="grid_3 alpha omega">
                                    </div>
            </div>

            <div class="grid_6 middle">
                <div class="grid_6 alpha omega">
                    <div class="grid_3 alpha"><div></div></div>
                    <div class="grid_3 omega"><div></div></div>
                </div>
            </div>

            <div class="grid_3 right">
                <div class="contact-ez">
                        <a id="cta-contact" href="https://ez.no/headerandfooteraccess/Home/Forms/Contact-eZ/(origin)/footer" title="Contact eZ!" class="btn-green btn--small">Contact eZ!</a>
                </div>

                <div class="adress"></div>
            </div>

        </div>
    </div>
<div id="footer-connect-bg">
    <div id="footer" class="container_12">
        <div id="footer-connect-copyright" class="grid_8 alpha omega">
            Copyright © 2013 eZ Systems AS (except where otherwise noted). All rights reserved.
            <br/><br/>
            Powered by <a href="http://ez.no/ezpublish" title="eZ Publish Platform">the eZ Publish Platform</a>.<br />
        </div>

        <div id="footer-connect-social" class="grid_4 right">
            <a href="http://www.youtube.com/user/ezpublish/" class="youtube" target="_blank">youtube</a>
            <a href="https://google.com/+ezsystems" class="googleplus" target="_blank">google plus</a>
            <a href="http://www.linkedin.com/groups?gid=2759&amp;trk=myg_ugrp_ovr" class="linkedin" target="_blank">linkedin</a>
            <a href="https://www.facebook.com/eZPublishEnterprise" class="facebook" target="_blank">facebook</a>
            <a href="http://twitter.com/#!/ezsystems" class="twitter" target="_blank">twitter</a>
        </div>


    </div>
</div>


</div>
<!-- Complete page area: END -->



<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-303624-13', 'auto');
  ga('send', 'pageview');

</script>




<script type="text/javascript">
(function()
{var ff=document.createElement('script');ff.type='text/javascript';ff.async=true;ff.src='https://secure.liveviewer.ez.no/statjs/sst-120-1304513615/stat.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(ff,s);}
)();
</script>


</body>

<!-- Mirrored from doc.ez.no/doc_hidden/Extensions/eZ-Publish-extensions/eZ-Publish-Extension-for-Oracle-R-database/1.4/Installation/Automated-initialization by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 13:21:16 GMT -->
</html>

<!-- th[eZ] 20050804 -->
